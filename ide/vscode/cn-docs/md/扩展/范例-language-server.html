<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>示例 - 语言服务  Example - Language Server | LeoLiuGe Blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="LeoLiu 一个不断尝试新事情 学习新技术的80后">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta property="og:type" content="article">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta name="applicable-device" content="pc,mobile">
    <link rel="preload" href="/assets/css/0.styles.e82247ed.css" as="style"><link rel="preload" href="/assets/js/app.26b143c5.js" as="script"><link rel="preload" href="/assets/js/3.c09e7e7a.js" as="script"><link rel="preload" href="/assets/js/2.3613c5bc.js" as="script"><link rel="preload" href="/assets/js/55.cb30724c.js" as="script"><link rel="prefetch" href="/assets/js/10.8b48a5e6.js"><link rel="prefetch" href="/assets/js/100.00e14632.js"><link rel="prefetch" href="/assets/js/101.e983096c.js"><link rel="prefetch" href="/assets/js/102.cbdc022d.js"><link rel="prefetch" href="/assets/js/103.e0752f6b.js"><link rel="prefetch" href="/assets/js/104.5706802a.js"><link rel="prefetch" href="/assets/js/105.458969e3.js"><link rel="prefetch" href="/assets/js/106.447bee86.js"><link rel="prefetch" href="/assets/js/107.2794a2fc.js"><link rel="prefetch" href="/assets/js/108.69196138.js"><link rel="prefetch" href="/assets/js/109.592c15a8.js"><link rel="prefetch" href="/assets/js/11.f4dc73e6.js"><link rel="prefetch" href="/assets/js/110.7f986aa6.js"><link rel="prefetch" href="/assets/js/111.aeae13db.js"><link rel="prefetch" href="/assets/js/112.17891637.js"><link rel="prefetch" href="/assets/js/113.73acce45.js"><link rel="prefetch" href="/assets/js/114.1f735019.js"><link rel="prefetch" href="/assets/js/115.02624466.js"><link rel="prefetch" href="/assets/js/116.86bd99e5.js"><link rel="prefetch" href="/assets/js/117.101af32f.js"><link rel="prefetch" href="/assets/js/118.8c3de42b.js"><link rel="prefetch" href="/assets/js/119.48c4ce96.js"><link rel="prefetch" href="/assets/js/12.88c1b978.js"><link rel="prefetch" href="/assets/js/120.a9068d51.js"><link rel="prefetch" href="/assets/js/121.34d97451.js"><link rel="prefetch" href="/assets/js/122.e3d20fd5.js"><link rel="prefetch" href="/assets/js/123.b15a9909.js"><link rel="prefetch" href="/assets/js/124.16ddbd07.js"><link rel="prefetch" href="/assets/js/125.d42035bf.js"><link rel="prefetch" href="/assets/js/126.97cbcdbb.js"><link rel="prefetch" href="/assets/js/127.269f92d5.js"><link rel="prefetch" href="/assets/js/128.86408adc.js"><link rel="prefetch" href="/assets/js/129.7d45a6dd.js"><link rel="prefetch" href="/assets/js/13.03701fb1.js"><link rel="prefetch" href="/assets/js/130.988c9796.js"><link rel="prefetch" href="/assets/js/131.a843d739.js"><link rel="prefetch" href="/assets/js/132.628877b5.js"><link rel="prefetch" href="/assets/js/133.573adea9.js"><link rel="prefetch" href="/assets/js/134.66e89387.js"><link rel="prefetch" href="/assets/js/135.e6cef2cb.js"><link rel="prefetch" href="/assets/js/136.e5e5efbe.js"><link rel="prefetch" href="/assets/js/137.a14b0855.js"><link rel="prefetch" href="/assets/js/138.5e728b85.js"><link rel="prefetch" href="/assets/js/139.c9b1d1b4.js"><link rel="prefetch" href="/assets/js/14.a87cadd4.js"><link rel="prefetch" href="/assets/js/140.f7aaf293.js"><link rel="prefetch" href="/assets/js/141.96738168.js"><link rel="prefetch" href="/assets/js/142.952e9d63.js"><link rel="prefetch" href="/assets/js/143.6317df9d.js"><link rel="prefetch" href="/assets/js/144.4818c9d9.js"><link rel="prefetch" href="/assets/js/145.eafe018d.js"><link rel="prefetch" href="/assets/js/146.bf88a1f1.js"><link rel="prefetch" href="/assets/js/147.b0ef29a6.js"><link rel="prefetch" href="/assets/js/148.7e1bb92d.js"><link rel="prefetch" href="/assets/js/149.c1b76a69.js"><link rel="prefetch" href="/assets/js/15.d60df077.js"><link rel="prefetch" href="/assets/js/150.1dbe87cb.js"><link rel="prefetch" href="/assets/js/151.58e172dd.js"><link rel="prefetch" href="/assets/js/152.5e45a717.js"><link rel="prefetch" href="/assets/js/153.dd50b2aa.js"><link rel="prefetch" href="/assets/js/154.1f10cdd3.js"><link rel="prefetch" href="/assets/js/155.97fd8c23.js"><link rel="prefetch" href="/assets/js/156.19009773.js"><link rel="prefetch" href="/assets/js/157.60c6b1cf.js"><link rel="prefetch" href="/assets/js/158.602e7f89.js"><link rel="prefetch" href="/assets/js/159.c28a473f.js"><link rel="prefetch" href="/assets/js/16.b3578a43.js"><link rel="prefetch" href="/assets/js/17.53f42748.js"><link rel="prefetch" href="/assets/js/18.83948d00.js"><link rel="prefetch" href="/assets/js/19.f44dde2a.js"><link rel="prefetch" href="/assets/js/20.89a422c0.js"><link rel="prefetch" href="/assets/js/21.6a0ec22b.js"><link rel="prefetch" href="/assets/js/22.8541a381.js"><link rel="prefetch" href="/assets/js/23.3933c13b.js"><link rel="prefetch" href="/assets/js/24.712ae246.js"><link rel="prefetch" href="/assets/js/25.cffdf98e.js"><link rel="prefetch" href="/assets/js/26.2f5c6080.js"><link rel="prefetch" href="/assets/js/27.5f6bfa07.js"><link rel="prefetch" href="/assets/js/28.664913a5.js"><link rel="prefetch" href="/assets/js/29.ac47bba8.js"><link rel="prefetch" href="/assets/js/30.1cadedaf.js"><link rel="prefetch" href="/assets/js/31.4f8b7ea2.js"><link rel="prefetch" href="/assets/js/32.f7202c8c.js"><link rel="prefetch" href="/assets/js/33.1680bf0c.js"><link rel="prefetch" href="/assets/js/34.198aa9b0.js"><link rel="prefetch" href="/assets/js/35.1a72632a.js"><link rel="prefetch" href="/assets/js/36.837cb2f7.js"><link rel="prefetch" href="/assets/js/37.e471763d.js"><link rel="prefetch" href="/assets/js/38.d0881148.js"><link rel="prefetch" href="/assets/js/39.309026eb.js"><link rel="prefetch" href="/assets/js/4.d0490c7c.js"><link rel="prefetch" href="/assets/js/40.e24f783b.js"><link rel="prefetch" href="/assets/js/41.32829608.js"><link rel="prefetch" href="/assets/js/42.4510f96e.js"><link rel="prefetch" href="/assets/js/43.eb4bd008.js"><link rel="prefetch" href="/assets/js/44.1a1dc587.js"><link rel="prefetch" href="/assets/js/45.f7d10c65.js"><link rel="prefetch" href="/assets/js/46.35943b44.js"><link rel="prefetch" href="/assets/js/47.c6417c68.js"><link rel="prefetch" href="/assets/js/48.d49dead4.js"><link rel="prefetch" href="/assets/js/49.132da5d3.js"><link rel="prefetch" href="/assets/js/5.7950ab83.js"><link rel="prefetch" href="/assets/js/50.c75f213d.js"><link rel="prefetch" href="/assets/js/51.debfae61.js"><link rel="prefetch" href="/assets/js/52.fa9d27ed.js"><link rel="prefetch" href="/assets/js/53.d4a4a066.js"><link rel="prefetch" href="/assets/js/54.ce0b57e9.js"><link rel="prefetch" href="/assets/js/56.aecc7992.js"><link rel="prefetch" href="/assets/js/57.fe599b61.js"><link rel="prefetch" href="/assets/js/58.edb098e1.js"><link rel="prefetch" href="/assets/js/59.1bd6ce1e.js"><link rel="prefetch" href="/assets/js/6.607a91ef.js"><link rel="prefetch" href="/assets/js/60.85b29cc0.js"><link rel="prefetch" href="/assets/js/61.471d6bc0.js"><link rel="prefetch" href="/assets/js/62.6fc7e56e.js"><link rel="prefetch" href="/assets/js/63.0e9015b4.js"><link rel="prefetch" href="/assets/js/64.0e414f75.js"><link rel="prefetch" href="/assets/js/65.f2501d0c.js"><link rel="prefetch" href="/assets/js/66.60b00821.js"><link rel="prefetch" href="/assets/js/67.cd173b0e.js"><link rel="prefetch" href="/assets/js/68.7c3c6dc5.js"><link rel="prefetch" href="/assets/js/69.fe6f9a3f.js"><link rel="prefetch" href="/assets/js/7.42b15925.js"><link rel="prefetch" href="/assets/js/70.60803f91.js"><link rel="prefetch" href="/assets/js/71.7cfae612.js"><link rel="prefetch" href="/assets/js/72.eb9e1c69.js"><link rel="prefetch" href="/assets/js/73.cd435e08.js"><link rel="prefetch" href="/assets/js/74.74deecbb.js"><link rel="prefetch" href="/assets/js/75.2fd64052.js"><link rel="prefetch" href="/assets/js/76.ada03ff4.js"><link rel="prefetch" href="/assets/js/77.905af665.js"><link rel="prefetch" href="/assets/js/78.7276e0d4.js"><link rel="prefetch" href="/assets/js/79.97d45520.js"><link rel="prefetch" href="/assets/js/8.aa03d242.js"><link rel="prefetch" href="/assets/js/80.128624f8.js"><link rel="prefetch" href="/assets/js/81.1b9a9fb8.js"><link rel="prefetch" href="/assets/js/82.b3f1cec2.js"><link rel="prefetch" href="/assets/js/83.f5b8d8b4.js"><link rel="prefetch" href="/assets/js/84.a6d7fa4c.js"><link rel="prefetch" href="/assets/js/85.e8da2271.js"><link rel="prefetch" href="/assets/js/86.ea5bbf66.js"><link rel="prefetch" href="/assets/js/87.3727b949.js"><link rel="prefetch" href="/assets/js/88.e2c7d687.js"><link rel="prefetch" href="/assets/js/89.6c1aa203.js"><link rel="prefetch" href="/assets/js/9.259fe5ea.js"><link rel="prefetch" href="/assets/js/90.270b8355.js"><link rel="prefetch" href="/assets/js/91.56eec24d.js"><link rel="prefetch" href="/assets/js/92.56f04099.js"><link rel="prefetch" href="/assets/js/93.f4f8c9f0.js"><link rel="prefetch" href="/assets/js/94.0d070675.js"><link rel="prefetch" href="/assets/js/95.8122b7ce.js"><link rel="prefetch" href="/assets/js/96.1666e281.js"><link rel="prefetch" href="/assets/js/97.e4f6c281.js"><link rel="prefetch" href="/assets/js/98.70b7aa4c.js"><link rel="prefetch" href="/assets/js/99.9222f0c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e82247ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LeoLiuGe Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link router-link-active">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link router-link-active">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ide/" class="sidebar-link">IDE</a></li><li><a href="/ide/webstorm/" class="sidebar-link">WebStorm</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>VSCode</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ide/vscode/" class="sidebar-link">VS Code 使用心得</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/#快捷键" class="sidebar-link">快捷键</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/#扩展-插件" class="sidebar-link">扩展/插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/#推荐插件" class="sidebar-link">推荐插件</a></li></ul></li></ul></li><li><a href="/ide/vscode/keyboard-mac.html" class="sidebar-link">快捷键-Mac</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#全局" class="sidebar-link">全局</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#基本" class="sidebar-link">基本</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#多光标与选择" class="sidebar-link">多光标与选择</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#查找替换" class="sidebar-link">查找替换</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#进阶" class="sidebar-link">进阶</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#导航" class="sidebar-link">导航</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#编辑器管理" class="sidebar-link">编辑器管理</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#文件管理" class="sidebar-link">文件管理</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#显示" class="sidebar-link">显示</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#调试" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/keyboard-mac.html#集成终端" class="sidebar-link">集成终端</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>VSCode中文文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ide/vscode/cn-docs/" class="sidebar-link">Microsoft Visual Studio Code 中文手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#翻译流程" class="sidebar-link">翻译流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#第一阶段" class="sidebar-link">第一阶段</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#第二阶段" class="sidebar-link">第二阶段</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#参与项目" class="sidebar-link">参与项目</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#官方说明文档" class="sidebar-link">官方说明文档</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#正在翻译文章-作者" class="sidebar-link">正在翻译文章+作者</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#项目翻译目录" class="sidebar-link">项目翻译目录</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#贡献者（按参与时间排序）" class="sidebar-link">贡献者（按参与时间排序）</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/#开源协议" class="sidebar-link">开源协议</a></li></ul></li><li><a href="/ide/vscode/cn-docs/summaryTag.html" class="sidebar-link">文档索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#官方文档" class="sidebar-link">官方文档</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#概览" class="sidebar-link">概览</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#快速入门-暂无" class="sidebar-link">[快速入门(暂无)]</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#视频介绍" class="sidebar-link">视频介绍</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#小技巧" class="sidebar-link">小技巧</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#用户接口" class="sidebar-link">用户接口</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#主题" class="sidebar-link">主题</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#设置" class="sidebar-link">设置</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#快捷键绑定" class="sidebar-link">快捷键绑定</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#语言区域" class="sidebar-link">语言区域</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#编辑器" class="sidebar-link">编辑器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#扩展市场" class="sidebar-link">扩展市场</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#任务" class="sidebar-link">任务</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#调试" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#为什么选用vscode" class="sidebar-link">为什么选用VSCode</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#版本控制" class="sidebar-link">版本控制</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#易用性" class="sidebar-link">易用性</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#与时俱进的编辑体验" class="sidebar-link">与时俱进的编辑体验</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#定制化" class="sidebar-link">定制化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#用户和工作空间" class="sidebar-link">用户和工作空间</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#快捷键绑定-2" class="sidebar-link">快捷键绑定</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#用户定义代码段" class="sidebar-link">用户定义代码段</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#调色板" class="sidebar-link">调色板</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#主题-2" class="sidebar-link">主题</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#语言区域-2" class="sidebar-link">语言区域</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#工具" class="sidebar-link">工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#vse命令行工具" class="sidebar-link">vse命令行工具</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#yocode扩展生成器" class="sidebar-link">yocode扩展生成器</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#范例" class="sidebar-link">范例</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#技术支持" class="sidebar-link">技术支持</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#常见问题" class="sidebar-link">常见问题</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#错误代码" class="sidebar-link">错误代码</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#如何升级" class="sidebar-link">如何升级</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#系统要求" class="sidebar-link">系统要求</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#扩展" class="sidebar-link">扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#概述-2" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#范例-hello-world" class="sidebar-link">范例-hello-world</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#范例-word-count" class="sidebar-link">范例-word-count</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#范例-language-server" class="sidebar-link">范例-language-server</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#范例-调试器" class="sidebar-link">范例-调试器</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#调试-扩展" class="sidebar-link">调试-扩展</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#安装-扩展" class="sidebar-link">安装-扩展</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#范式-原则" class="sidebar-link">范式-原则</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#测试-扩展" class="sidebar-link">测试-扩展</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#用我们的方法创造扩展" class="sidebar-link">用我们的方法创造扩展</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#扩展api" class="sidebar-link">扩展API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#概述-3" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#扩展manifest文件" class="sidebar-link">扩展manifest文件</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#扩展点" class="sidebar-link">扩展点</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#激活事件" class="sidebar-link">激活事件</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#vscode-api" class="sidebar-link">vscode-api</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#vscode-api-命令" class="sidebar-link">vscode-api-命令</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#api调试" class="sidebar-link">api调试</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#语言" class="sidebar-link">语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#概述-4" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#javascript" class="sidebar-link">Javascript</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#json" class="sidebar-link">JSON</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#html-暂无" class="sidebar-link">[HTML(暂无)]</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#css-sass-and-less" class="sidebar-link">CSS, Sass and Less</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#typescript" class="sidebar-link">TypeScript</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#markdown" class="sidebar-link">Markdown</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#c" class="sidebar-link">C++</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#java-暂无" class="sidebar-link">[Java(暂无)]</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#php" class="sidebar-link">PHP</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#python" class="sidebar-link">Python</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#go-暂无" class="sidebar-link">[Go(暂无)]</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#dockerfile" class="sidebar-link">Dockerfile</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#t-sql-暂无" class="sidebar-link">[T-SQL(暂无)]</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#c-2" class="sidebar-link">C#</a></li></ul></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#运行时" class="sidebar-link">运行时</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#nodejs" class="sidebar-link">nodejs</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#aspnet5" class="sidebar-link">ASPnet5</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#unity" class="sidebar-link">unity</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/summaryTag.html#office" class="sidebar-link">office</a></li></ul></li></ul></li><li><a href="/ide/vscode/cn-docs/md/Overview.html" class="sidebar-link">开始（Getting Started）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/md/Overview.html#智能代码提示和自动补全（intelligent-code-completion）" class="sidebar-link">智能代码提示和自动补全（Intelligent Code Completion）</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/md/Overview.html#简化调试过程（streamlined-debugging）" class="sidebar-link">简化调试过程（Streamlined Debugging）</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/md/Overview.html#快速，强大的编辑能力（fast-powerful-editing）" class="sidebar-link">快速，强大的编辑能力（Fast, Powerful Editing）</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/md/Overview.html#代码导航和重构（code-navigation-and-refactoring）" class="sidebar-link">代码导航和重构（Code Navigation and Refactoring）</a></li><li class="sidebar-sub-header"><a href="/ide/vscode/cn-docs/md/Overview.html#对于产品的git支持（in-product-git-support）" class="sidebar-link">对于产品的Git支持（In-Product Git Support）</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="示例-语言服务-example-language-server"><a href="#示例-语言服务-example-language-server" class="header-anchor">#</a> 示例 - 语言服务  Example - Language Server</h1> <p>语言服务允许你针对VS Code打开的文件添加一个的验证逻辑。最典型的一个应用是检查编程语言的语法。However validating other file types is useful as well. A language server could, for example, check files for inappropriate language.</p> <p>通常校检查程语言的代价非常高，尤其是当检查动作需要解析多个文件并且建立抽象的语法树。为了避免性能问题，语言服务运行在一个单独的进程。这个特性也让使用除TypeScript/JavaScript之外的语言编写语言服务成为可能，这可以支持一些很耗费性能的操作，例如代码自动完成或者<code>查找所用引用</code>。</p> <p>这篇文章假定你熟悉正常的VS Code插件开发。</p> <p>Language servers allow you to add your own validation logic to files open in VS Code. Typically you just validate programming languages. However validating other file types is useful as well. A language server could, for example, check files for inappropriate language.</p> <p>In general, validating programming language can be expensive. Especially when validation requires parsing multiple files and building up abstract syntax trees. To avoid that performance cost, language servers in VS Code are executed in a separate process. This architecture also makes it possible that language servers can be written in other languages besides TypeScript/JavaScript and that they can support expensive additional language features like code completion or <code>Find All References</code>.</p> <p>The remaining document assumes that you are familiar with normal extension development for VS Code.</p> <h2 id="实现你自己的语言服务-implement-your-own-language-server"><a href="#实现你自己的语言服务-implement-your-own-language-server" class="header-anchor">#</a> 实现你自己的语言服务  Implement your own Language Server</h2> <p>理论上语言服务可以使用任何语言实现，然而现在VS Code只提供Node.js的库。未来将提供其他语言的库。一个使用Node.js语言实现的服务例子是这个示例仓库<a href="https://github.com/Microsoft/vscode-languageserver-node-example.git" target="_blank" rel="noopener noreferrer">Node语言服务示例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>克隆这个仓库然后执行如下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> client
<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span>
<span class="token operator">&gt;</span> code <span class="token builtin class-name">.</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/server
<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span>
<span class="token operator">&gt;</span> code <span class="token builtin class-name">.</span>
</code></pre></div><p>Language servers can be implemented in any language. However, right now VS Code only provides libraries for Node.js. Additional libraries will follow in the future. A good starting point for a language server implementation in Node.js is the example repository <a href="https://github.com/Microsoft/vscode-languageserver-node-example.git" target="_blank" rel="noopener noreferrer">Language Server Node Example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Clone the repository and then do:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> client
<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span>
<span class="token operator">&gt;</span> code <span class="token builtin class-name">.</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/server
<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span>
<span class="token operator">&gt;</span> code <span class="token builtin class-name">.</span>
</code></pre></div><h2 id="客户端-解析-explaining-the-client"><a href="#客户端-解析-explaining-the-client" class="header-anchor">#</a> ‘客户端’解析   Explaining the 'Client'</h2> <p>这个客户端实际上就是一个正常的VS Code插件。它的工作空间根目录包含<code>package.json</code>文件。这个文件有3个值得注意的节。</p> <p>首先来看<code>activationEvents</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;onLanguage:plaintext&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><p>这个节告诉VS Code当纯文本文件被打开时激活这个插件(例如后缀名为<code>.txt</code>的文件).</p> <p>接下来看<code>configuration</code>节:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;configuration&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Example configuration&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;languageServerExample.maxNumberOfProblems&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
            <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Controls the maximum number of problems produced by the server.&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个扩展节是<code>configuration</code>VS Code的配置。这个例子将解析这些设置是怎样在每次配置改变和语言服务启动时发送给语言服务的。</p> <p>最后一部分添加了一个<code>vscode-languageclient</code>库的依赖：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode-languageclient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.4.2&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如同上面提到的，这个客户端就是一个普通的VS Code插件。</p> <p>下面就是相应的extension.ts文件内容：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/* --------------------------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 * ------------------------------------------------------------------------------------------ */</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> workspace<span class="token punctuation">,</span> Disposable<span class="token punctuation">,</span> ExtensionContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LanguageClient<span class="token punctuation">,</span> LanguageClientOptions<span class="token punctuation">,</span> SettingMonitor<span class="token punctuation">,</span> ServerOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vscode-languageclient'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token operator">:</span> ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 服务使用nodejs实现</span>
    <span class="token keyword">let</span> serverModule <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">asAbsolutePath</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'server'</span><span class="token punctuation">,</span> <span class="token string">'server.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 服务的调试选项</span>
    <span class="token keyword">let</span> debugOptions <span class="token operator">=</span> <span class="token punctuation">{</span> execArgv<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--nolazy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--debug=6004&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 服务的调试选项将在插件以调试模式启动的情况下生效</span>
    <span class="token comment">// 运行选项将在其他情况下生效</span>
    <span class="token keyword">let</span> serverOptions<span class="token operator">:</span> ServerOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        run <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">module</span><span class="token operator">:</span> serverModule<span class="token punctuation">,</span> transport<span class="token operator">:</span> TransportKind<span class="token punctuation">.</span>ipc <span class="token punctuation">}</span><span class="token punctuation">,</span>
        debug<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">module</span><span class="token operator">:</span> serverModule<span class="token punctuation">,</span> transport<span class="token operator">:</span> TransportKind<span class="token punctuation">.</span>ipc<span class="token punctuation">,</span> options<span class="token operator">:</span> debugOptions <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 控制语言客户端的选项</span>
    <span class="token keyword">let</span> clientOptions<span class="token operator">:</span> LanguageClientOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// 为纯文本文档注册服务</span>
        documentSelector<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plaintext'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        synchronize<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 将'languageServerExample'选项同步到服务</span>
            configurationSection<span class="token operator">:</span> <span class="token string">'languageServerExample'</span><span class="token punctuation">,</span>
            <span class="token comment">// 当工作空间中的'.clientrc'文件改变时通知服务</span>
            fileEvents<span class="token operator">:</span> workspace<span class="token punctuation">.</span><span class="token function">createFileSystemWatcher</span><span class="token punctuation">(</span><span class="token string">'**/.clientrc'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 创建一个语言客户端并启动这个客户端。</span>
    <span class="token keyword">let</span> disposable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LanguageClient</span><span class="token punctuation">(</span><span class="token string">'Language Server Example'</span><span class="token punctuation">,</span> serverOptions<span class="token punctuation">,</span> clientOptions<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 向context的订阅里插入一个disposable对象使的客户端可以在插件</span>
    <span class="token comment">// 关闭的时候被销毁</span>
    context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>disposable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The client is actually a normal VS Code extension. It contains a <code>package.json</code> file in the root of the workspace folder. There are three interesting sections of that file.</p> <p>First look the <code>activationEvents</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;onLanguage:plaintext&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><p>This section tells VS Code to activate the extension as soon as a plain text file is opened (e.g. a file with the extension <code>.txt</code>).</p> <p>Next look at the <code>configuration</code> section:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;configuration&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Example configuration&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;languageServerExample.maxNumberOfProblems&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
            <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Controls the maximum number of problems produced by the server.&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This section contributes <code>configuration</code> settings to VS Code. The example will explain how these settings are sent over to the language server on startup and on every change of the settings.</p> <p>The last part adds a dependency to the <code>vscode-languageclient</code> library:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode-languageclient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.4.2&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As mentioned, the client is implemented as a normal VS Code extension.</p> <p>Below is the content of the corresponding extension.ts file:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/* --------------------------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 * ------------------------------------------------------------------------------------------ */</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> workspace<span class="token punctuation">,</span> Disposable<span class="token punctuation">,</span> ExtensionContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LanguageClient<span class="token punctuation">,</span> LanguageClientOptions<span class="token punctuation">,</span> SettingMonitor<span class="token punctuation">,</span> ServerOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vscode-languageclient'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token operator">:</span> ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// The server is implemented in node</span>
    <span class="token keyword">let</span> serverModule <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">asAbsolutePath</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'server'</span><span class="token punctuation">,</span> <span class="token string">'server.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// The debug options for the server</span>
    <span class="token keyword">let</span> debugOptions <span class="token operator">=</span> <span class="token punctuation">{</span> execArgv<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--nolazy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--debug=6004&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// If the extension is launch in debug mode the debug server options are use</span>
    <span class="token comment">// Otherwise the run options are used</span>
    <span class="token keyword">let</span> serverOptions<span class="token operator">:</span> ServerOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        run <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">module</span><span class="token operator">:</span> serverModule<span class="token punctuation">,</span> transport<span class="token operator">:</span> TransportKind<span class="token punctuation">.</span>ipc <span class="token punctuation">}</span><span class="token punctuation">,</span>
        debug<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">module</span><span class="token operator">:</span> serverModule<span class="token punctuation">,</span> transport<span class="token operator">:</span> TransportKind<span class="token punctuation">.</span>ipc<span class="token punctuation">,</span> options<span class="token operator">:</span> debugOptions <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Options to control the language client</span>
    <span class="token keyword">let</span> clientOptions<span class="token operator">:</span> LanguageClientOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// Register the server for plain text documents</span>
        documentSelector<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plaintext'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        synchronize<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// Synchronize the setting section 'languageServerExample' to the server</span>
            configurationSection<span class="token operator">:</span> <span class="token string">'languageServerExample'</span><span class="token punctuation">,</span>
            <span class="token comment">// Notify the server about file changes to '.clientrc files contain in the workspace</span>
            fileEvents<span class="token operator">:</span> workspace<span class="token punctuation">.</span><span class="token function">createFileSystemWatcher</span><span class="token punctuation">(</span><span class="token string">'**/.clientrc'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Create the language client and start the client.</span>
    <span class="token keyword">let</span> disposable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LanguageClient</span><span class="token punctuation">(</span><span class="token string">'Language Server Example'</span><span class="token punctuation">,</span> serverOptions<span class="token punctuation">,</span> clientOptions<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Push the disposable to the context's subscriptions so that the </span>
    <span class="token comment">// client can be deactivated on extension deactivation</span>
    context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>disposable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="服务-解析-explaining-the-server"><a href="#服务-解析-explaining-the-server" class="header-anchor">#</a> '服务'解析  Explaining the 'Server'</h2> <p>在这个例子里，服务也使用TypeScript语言实现并使用Node.js执行。因为VS Code已经提供了Node.js运行时，不需要你自己再提供，除非你对运行时有特殊的要求。</p> <p>在服务的package.json文件中我们感兴趣的的节是这个：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode-languageserver&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.4.1&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这将拉取vscode-languageserver库。</p> <p>下面的代码是一个服务实现，这个服务实现了一个通过VS Code发送过全部文本内容来同步文档的简单的文本文档管理器。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/* --------------------------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 * ------------------------------------------------------------------------------------------ */</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>
    createConnection<span class="token punctuation">,</span> IConnection<span class="token punctuation">,</span>
    TextDocuments<span class="token punctuation">,</span> ITextDocument<span class="token punctuation">,</span> Diagnostic<span class="token punctuation">,</span>
    InitializeParams<span class="token punctuation">,</span> InitializeResult
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vscode-languageserver'</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个服务的连接，连接使用Node的IPC作为传输</span>
<span class="token keyword">let</span> connection<span class="token operator">:</span> IConnection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IPCMessageReader</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IPCMessageWriter</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个简单的文本文档管理器，这个管理器仅仅支持同步所有文档</span>
<span class="token keyword">let</span> documents<span class="token operator">:</span> TextDocuments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDocuments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 让文本文档管理器在连接上监听文本文档的打开、改变、关闭事件</span>
documents<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在服务启动后，客户端发送初始化请求。服务收到的参数中包含工作空间的根目录和客户端的能力。</span>
<span class="token keyword">let</span> workspaceRoot<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">onInitialize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">InitializeResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    workspaceRoot <span class="token operator">=</span> params<span class="token punctuation">.</span>rootPath<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        capabilities<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 告诉客户端服务工作在全文本文档同步模式</span>
            textDocumentSync<span class="token operator">:</span> documents<span class="token punctuation">.</span>syncKind
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 监听连接</span>
connection<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In the example, the server is also implemented in TypeScript and executed using Node.js. Since VS Code already ships with a Node.js runtime, there is no need to provide your own, unless you have very specific requirements for the runtime.</p> <p>The interesting section in the server's package.json file is:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode-languageserver&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.4.1&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This pulls in the vscode-languageserver library.</p> <p>Below is a server implementation that uses the provided simple text document manager which synchronizes text documents by always sending the file's full content from VS Code to the server.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/* --------------------------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 * ------------------------------------------------------------------------------------------ */</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>
    createConnection<span class="token punctuation">,</span> IConnection<span class="token punctuation">,</span>
    TextDocuments<span class="token punctuation">,</span> ITextDocument<span class="token punctuation">,</span> Diagnostic<span class="token punctuation">,</span>
    InitializeParams<span class="token punctuation">,</span> InitializeResult
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vscode-languageserver'</span><span class="token punctuation">;</span>

<span class="token comment">// Create a connection for the server. The connection uses Node's IPC as a transport</span>
<span class="token keyword">let</span> connection<span class="token operator">:</span> IConnection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IPCMessageReader</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IPCMessageWriter</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a simple text document manager. The text document manager</span>
<span class="token comment">// supports full document sync only</span>
<span class="token keyword">let</span> documents<span class="token operator">:</span> TextDocuments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDocuments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Make the text document manager listen on the connection</span>
<span class="token comment">// for open, change and close text document events</span>
documents<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// After the server has started the client sends an initilize request. The server receives</span>
<span class="token comment">// in the passed params the rootPath of the workspace plus the client capabilites. </span>
<span class="token keyword">let</span> workspaceRoot<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">onInitialize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">InitializeResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    workspaceRoot <span class="token operator">=</span> params<span class="token punctuation">.</span>rootPath<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        capabilities<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// Tell the client that the server works in FULL text document sync mode</span>
            textDocumentSync<span class="token operator">:</span> documents<span class="token punctuation">.</span>syncKind
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Listen on the connection</span>
connection<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="完成一个简单的校验器-adding-a-simple-validation"><a href="#完成一个简单的校验器-adding-a-simple-validation" class="header-anchor">#</a> 完成一个简单的校验器  Adding a Simple Validation</h2> <p>想完成一个文档校验器，我们只需要简单的添加文本文档管理器的监听器去监听文本文档的改变。它会在最适合校验文档的时机通知服务。在这个实例实现里，服务校验纯文本文档并且通过消息拼写为<code>TypeScript</code>来标记所有的<code>typescript</code>文字。代码片段如下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// The content of a text document has changed. This event is emitted</span>
<span class="token comment">// when the text document first opened or when its content has changed.</span>
documents<span class="token punctuation">.</span><span class="token function">onDidChangeContent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> diagnostics<span class="token operator">:</span> Diagnostic<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lines <span class="token operator">=</span> change<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\r?\n/g</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lines<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'typescript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            diagnostics<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                severity<span class="token operator">:</span> DiagnosticSeverity<span class="token punctuation">.</span>Warning<span class="token punctuation">,</span>
                range<span class="token operator">:</span> <span class="token punctuation">{</span>
                    start<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index<span class="token punctuation">}</span><span class="token punctuation">,</span>
                    end<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should be spelled TypeScript</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                source<span class="token operator">:</span> <span class="token string">'ex'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Send the computed diagnostics to VS Code.</span>
    connection<span class="token punctuation">.</span><span class="token function">sendDiagnostics</span><span class="token punctuation">(</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> change<span class="token punctuation">.</span>document<span class="token punctuation">.</span>uri<span class="token punctuation">,</span> diagnostics <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To add document validation to the server, we simply add a listener to the text document manager that gets called whenever the content of a text document changes. It is then up to the server to decide when the best time is to validate a document. In the example implementation, the server validates the plain text document and flags all occurrences of <code>typescript</code> with a message to spell it <code>TypeScript</code>. The corresponding code snippet looks like this:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// The content of a text document has changed. This event is emitted</span>
<span class="token comment">// when the text document first opened or when its content has changed.</span>
documents<span class="token punctuation">.</span><span class="token function">onDidChangeContent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> diagnostics<span class="token operator">:</span> Diagnostic<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lines <span class="token operator">=</span> change<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\r?\n/g</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lines<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'typescript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            diagnostics<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                severity<span class="token operator">:</span> DiagnosticSeverity<span class="token punctuation">.</span>Warning<span class="token punctuation">,</span>
                range<span class="token operator">:</span> <span class="token punctuation">{</span>
                    start<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index<span class="token punctuation">}</span><span class="token punctuation">,</span>
                    end<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should be spelled TypeScript</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                source<span class="token operator">:</span> <span class="token string">'ex'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Send the computed diagnostics to VS Code.</span>
    connection<span class="token punctuation">.</span><span class="token function">sendDiagnostics</span><span class="token punctuation">(</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> change<span class="token punctuation">.</span>document<span class="token punctuation">.</span>uri<span class="token punctuation">,</span> diagnostics <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="诊断提示和窍门-diagnostics-tips-and-tricks"><a href="#诊断提示和窍门-diagnostics-tips-and-tricks" class="header-anchor">#</a> 诊断提示和窍门  Diagnostics Tips and Tricks!</h3> <ul><li>如果开始和结束位置相同，VS Code将在这个单词de的位置画曲线</li> <li>如果你想画曲线一直到行尾，设置结束位置的字符为Number.MAX_VALUE。</li></ul> <p>向下面这样测试语言服务：</p> <ul><li>到包含服务代码（见上文）的VS Code的实例中并且按下<code>kb(workbench.action.tasks.build)</code>启动构建任务。任务将编译服务代码并且安装服务到插件目录。</li> <li>现在会带有客户端插件的VS Code实例中并且按下<code>kb(workbench.action.debug.start)</code>启动<code>扩展开发主机</code>VS Code实例执行插件代码。</li> <li>在根目录创建一个test.txt文件并且粘贴如下内容：</li></ul> <div class="language-plaintext extra-class"><pre class="language-text"><code>typescript lets you write JavaScript the way you really want to.
typescript is a typed superset of JavaScript that compiles to plain JavaScript.
Any browser. Any host. Any OS. Open Source.
</code></pre></div><p><code>扩展开发主机</code>实例将看起来如下图这样</p> <p><img src="images/example-language-server/validation.png" alt="Validating a text file"></p> <ul><li>If the start and end positions are the same, VS Code will squiggle the word at that position.</li> <li>If you want to squiggle until the end of the line, then set the character of the end position to Number.MAX_VALUE.</li></ul> <p>To test the language server do the following:</p> <ul><li>Go to the VS Code instance containing the server code (see above) and press <code>kb(workbench.action.tasks.build)</code> to start the build task. The task compiles the server code and installs (e.g. copies) it into the extension folder.</li> <li>Now go back to the VS Code instance with the extension (client) and press <code>kb(workbench.action.debug.start)</code> to launch an additional <code>Extension Development Host</code> instance of VS Code that executes the extension code.</li> <li>Create a test.txt file in the root folder and paste the following content:</li></ul> <div class="language-plaintext extra-class"><pre class="language-text"><code>typescript lets you write JavaScript the way you really want to.
typescript is a typed superset of JavaScript that compiles to plain JavaScript.
Any browser. Any host. Any OS. Open Source.
</code></pre></div><p>The <code>Extension Development Host</code> instance will then look like this:</p> <p><img src="images/example-language-server/validation.png" alt="Validating a text file"></p> <h2 id="一起调试客户端和服务-debugging-both-client-and-server"><a href="#一起调试客户端和服务-debugging-both-client-and-server" class="header-anchor">#</a> 一起调试客户端和服务  Debugging both Client and Server</h2> <p>调试客户端代码就像调试普通插件一样简单。在包含客户端代码的VS Code实例中简单的设置断点然后按下<code>kb(workbench.action.debug.start)</code>调试插件。关于启动和调试插件的详细描述请看<a href="/docs/extensions/debugging-extensions.html">运行和调试你的插件</a>。</p> <p><img src="images/example-language-server/debugging-client.png" alt="调试客户端"></p> <p>因为服务是被在客户端中运行<code>LanguageClient</code>启动的。我们需要附加到运行中的服务去调试。要完成这一切，切换到服务代码的VS Code实例中并且按下<code>kb(workbench.action.debug.start)</code>。这将附加一个调试器到服务中。然后使用正常的调试视图调试即可。</p> <p><img src="images/example-language-server/debugging-server.png" alt="调试服务"></p> <p>Debugging the client code is as easy as debugging a normal extension. Simply set a breakpoint in the VS Code instance that contains the client code and debug the extension by pressing <code>kb(workbench.action.debug.start)</code>. For a detailed description about launching and debugging an extension see <a href="/docs/extensions/debugging-extensions.html">Running and Debugging Your Extension</a>.</p> <p><img src="images/example-language-server/debugging-client.png" alt="Debugging the client"></p> <p>Since the server is started by the <code>LanguageClient</code> running in the extension (client), we need to attach a debugger to the running server. To do so, switch to the VS Code instance containing the server code and press <code>kb(workbench.action.debug.start)</code>. This will attach the debugger to the server. Use the normal Debug View to interact with the running server.</p> <p><img src="images/example-language-server/debugging-server.png" alt="Debugging the server"></p> <h2 id="在服务中使用设置选项-using-configuration-settings-in-the-server"><a href="#在服务中使用设置选项-using-configuration-settings-in-the-server" class="header-anchor">#</a> 在服务中使用设置选项   Using Configuration Settings in the Server</h2> <p>当我们编写已经定义了最大问题数设置的插件的客户端部分时，我们可以用同步选项让<code>LanguageClient</code>对象去同步这些设置到服务端。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>synchronize<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将'languageServerExample'选项同步到服务</span>
    configurationSection<span class="token operator">:</span> <span class="token string">'languageServerExample'</span><span class="token punctuation">,</span>
    <span class="token comment">// 当工作空间中的'.clientrc'文件改变时通知服务</span>
    fileEvents<span class="token operator">:</span> workspace<span class="token punctuation">.</span><span class="token function">createFileSystemWatcher</span><span class="token punctuation">(</span><span class="token string">'**/.clientrc'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在我们唯一需要做的就是在服务端监听设置改变并且如果有设置改变就对打开的文本文档重新生效。为了重用文档改变事件处理的逻辑，我们提取这部分代码到<code>validateTextDocument</code>函数中并且添加添加<code>maxNumberOfProblems</code>变量：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">validateTextDocument</span><span class="token punctuation">(</span><span class="token parameter">textDocument<span class="token operator">:</span> ITextDocument</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> diagnostics<span class="token operator">:</span> Diagnostic<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lines <span class="token operator">=</span> textDocument<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\r?\n/g</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> problems <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lines<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> problems <span class="token operator">&lt;</span> maxNumberOfProblems<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> line <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'typescript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            problems<span class="token operator">++</span><span class="token punctuation">;</span>
            diagnostics<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                severity<span class="token operator">:</span> DiagnosticSeverity<span class="token punctuation">.</span>Warning<span class="token punctuation">,</span>
                range<span class="token operator">:</span> <span class="token punctuation">{</span>
                    start<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index<span class="token punctuation">}</span><span class="token punctuation">,</span>
                    end<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should be spelled TypeScript</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 发送诊断信息到VS Code.</span>
    connection<span class="token punctuation">.</span><span class="token function">sendDiagnostics</span><span class="token punctuation">(</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> textDocument<span class="token punctuation">.</span>uri<span class="token punctuation">,</span> diagnostics <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过向连接添加配置改变通知处理器来处理配置变化的处理。相应的代码如下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 设置接口描述了服务相关的设置部分</span>
<span class="token keyword">interface</span> <span class="token class-name">Settings</span> <span class="token punctuation">{</span>
    languageServerExample<span class="token operator">:</span> ExampleSettings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这些是我们在客户端的package.json文件中定义的设置示例</span>
<span class="token keyword">interface</span> <span class="token class-name">ExampleSettings</span> <span class="token punctuation">{</span>
    maxNumberOfProblems<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 控制最大问题数设置</span>
<span class="token keyword">let</span> maxNumberOfProblems<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token comment">// 设置改变，也发送服务器激活</span>
connection<span class="token punctuation">.</span><span class="token function">onDidChangeConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> settings <span class="token operator">=</span> <span class="token operator">&lt;</span>Settings<span class="token operator">&gt;</span>change<span class="token punctuation">.</span>settings<span class="token punctuation">;</span>
    maxNumberOfProblems <span class="token operator">=</span> settings<span class="token punctuation">.</span>languageServerExample<span class="token punctuation">.</span>maxNumberOfProblems <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token comment">// 验证所有打开的文档</span>
    documents<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>validateTextDocument<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>修改最大报告问题数为1个并再次启动客户端的结果：</p> <p><img src="images/example-language-server/validationOneProblem.png" alt="Maximum One Problem"></p> <p>When writing the client part of the extension we already defined a setting to control the maximum numbers of problems reported. We also instructed the <code>LanguageClient</code> to sync these settings to the server using the syncronization configuration</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>synchronize<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Synchronize the setting section 'languageClientExample' to the server</span>
    configurationSection<span class="token operator">:</span> <span class="token string">'languageServerExample'</span><span class="token punctuation">,</span>
    <span class="token comment">// Notify the server about file changes to '.clientrc files contain in the workspace</span>
    fileEvents<span class="token operator">:</span> workspace<span class="token punctuation">.</span><span class="token function">createFileSystemWatcher</span><span class="token punctuation">(</span><span class="token string">'**/.clientrc'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The only thing we need to do now is to listen to configuration changes on the server side and if a settings changes revalidate the open text documents. To be able to reuse the validate logic of the document change event handling we extract the code into a <code>validateTextDocument</code> function and modify the code to honor a <code>maxNumberOfProblems</code> variable:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">validateTextDocument</span><span class="token punctuation">(</span><span class="token parameter">textDocument<span class="token operator">:</span> ITextDocument</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> diagnostics<span class="token operator">:</span> Diagnostic<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lines <span class="token operator">=</span> textDocument<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\r?\n/g</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> problems <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lines<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> problems <span class="token operator">&lt;</span> maxNumberOfProblems<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> line <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'typescript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            problems<span class="token operator">++</span><span class="token punctuation">;</span>
            diagnostics<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                severity<span class="token operator">:</span> DiagnosticSeverity<span class="token punctuation">.</span>Warning<span class="token punctuation">,</span>
                range<span class="token operator">:</span> <span class="token punctuation">{</span>
                    start<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index<span class="token punctuation">}</span><span class="token punctuation">,</span>
                    end<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> i<span class="token punctuation">,</span> character<span class="token operator">:</span> index <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should be spelled TypeScript</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Send the computed diagnostics to VS Code.</span>
    connection<span class="token punctuation">.</span><span class="token function">sendDiagnostics</span><span class="token punctuation">(</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> textDocument<span class="token punctuation">.</span>uri<span class="token punctuation">,</span> diagnostics <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The handling of the configuration change is done by adding a notification handler for configuration changes to the connection. The corresponding code looks like this:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// The settings interface describe the server relevant settings part</span>
<span class="token keyword">interface</span> <span class="token class-name">Settings</span> <span class="token punctuation">{</span>
    languageServerExample<span class="token operator">:</span> ExampleSettings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// These are the example settings we defined in the client's package.json</span>
<span class="token comment">// file</span>
<span class="token keyword">interface</span> <span class="token class-name">ExampleSettings</span> <span class="token punctuation">{</span>
    maxNumberOfProblems<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// hold the maxNumberOfProblems setting</span>
<span class="token keyword">let</span> maxNumberOfProblems<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token comment">// The settings have changed. Is send on server activation</span>
<span class="token comment">// as well.</span>
connection<span class="token punctuation">.</span><span class="token function">onDidChangeConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> settings <span class="token operator">=</span> <span class="token operator">&lt;</span>Settings<span class="token operator">&gt;</span>change<span class="token punctuation">.</span>settings<span class="token punctuation">;</span>
    maxNumberOfProblems <span class="token operator">=</span> settings<span class="token punctuation">.</span>languageServerExample<span class="token punctuation">.</span>maxNumberOfProblems <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token comment">// Revalidate any open text documents</span>
    documents<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>validateTextDocument<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Starting the client again and changing the setting to maximum report 1 problem results in the following validation:</p> <p><img src="images/example-language-server/validationOneProblem.png" alt="Maximum One Problem"></p> <h2 id="添加额外的语言特性-adding-additional-language-features"><a href="#添加额外的语言特性-adding-additional-language-features" class="header-anchor">#</a> 添加额外的语言特性   Adding additional Language Features</h2> <p>第一个有趣的特性是，语言服务通常实现的功能都是校验文档。甚至感觉语法检查器就是语言服务，因为在VS Code中语法检查器通常都是作为语言服务来实现的(参考 <a href="https://github.com/Microsoft/vscode-eslint" target="_blank" rel="noopener noreferrer">eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://github.com/Microsoft/vscode-jshint" target="_blank" rel="noopener noreferrer">jshint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 例子)。但是实际上有更多的语言服务，提供代码自动完成，查找所有引用或者跳转到定义的功能。下面的代码给服务添加了代码自动完成。它简单的提名两个单词'TypeScript'和'JavaScript'。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 这个处理器提供完成项的初始化列表。</span>
connection<span class="token punctuation">.</span><span class="token function">onCompletion</span><span class="token punctuation">(</span><span class="token punctuation">(</span>textDocumentPosition<span class="token operator">:</span> TextDocumentIdentifier<span class="token punctuation">)</span><span class="token operator">:</span> CompletionItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 传递的参数中包含了在文本文档中请求代码自动完成的位置。</span>
    <span class="token comment">// 这个例子中忽略了这些信息，总是提供相同的完成选项。</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            label<span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
            kind<span class="token operator">:</span> CompletionItemKind<span class="token punctuation">.</span>Text<span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            label<span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span>
            kind<span class="token operator">:</span> CompletionItemKind<span class="token punctuation">.</span>Text<span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这个处理器解析了在自动完成列表里选择的选项的额外信息。</span>
connection<span class="token punctuation">.</span><span class="token function">onCompletionResolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> CompletionItem<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">CompletionItem</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span>detail <span class="token operator">=</span> <span class="token string">'TypeScript details'</span><span class="token punctuation">,</span>
        item<span class="token punctuation">.</span>documentation <span class="token operator">=</span> <span class="token string">'TypeScript documentation'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span>detail <span class="token operator">=</span> <span class="token string">'JavaScript details'</span><span class="token punctuation">,</span>
        item<span class="token punctuation">.</span>documentation <span class="token operator">=</span> <span class="token string">'JavaScript documentation'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在解析处理器中<code>data</code>成员通常用来作为自动完成选项的唯一标识符。这个数据属性通过协议来传输。因为底层的消息传输协议是基于数据成员的JSON，所以应该保证数据可以使用JSON序列化和反序列化。</p> <p>剩下的就是告诉VS Code服务支持代码自动完成。要完成这个功能，需要在初始化处理器中声明相应的能力：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>connection<span class="token punctuation">.</span><span class="token function">onInitialize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">InitializeResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        capabilities<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>
            <span class="token comment">// 告诉客户端服务支持代码自动完成</span>
            completionProvider<span class="token operator">:</span> <span class="token punctuation">{</span>
                resolveProvider<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>下面的屏幕截图显示纯文本文件中运行的代码完成：</p> <p><img src="images/example-language-server/codeComplete.png" alt="Code Complete"></p> <p>The first interesting feature a language server usually implements is validation of documents. In that sense even a linter counts as a language server and in VS Code linters are usually implemented as language servers (see <a href="https://github.com/Microsoft/vscode-eslint" target="_blank" rel="noopener noreferrer">eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/Microsoft/vscode-jshint" target="_blank" rel="noopener noreferrer">jshint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for examples). But there is more to language servers. They can provide code complete, find all references or goto definition. The example code below adds code completion to the server. It simply proposes the two words 'TypeScript' and 'JavaScript'.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// This handler provides the initial list of the completion items.</span>
connection<span class="token punctuation">.</span><span class="token function">onCompletion</span><span class="token punctuation">(</span><span class="token punctuation">(</span>textDocumentPosition<span class="token operator">:</span> TextDocumentIdentifier<span class="token punctuation">)</span><span class="token operator">:</span> CompletionItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// The pass parameter contains the position of the text document in </span>
    <span class="token comment">// which code complete got requested. For the example we ignore this</span>
    <span class="token comment">// info and always provide the same completion items.</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            label<span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
            kind<span class="token operator">:</span> CompletionItemKind<span class="token punctuation">.</span>Text<span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            label<span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span>
            kind<span class="token operator">:</span> CompletionItemKind<span class="token punctuation">.</span>Text<span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This handler resolve additional information for the item selected in</span>
<span class="token comment">// the completion list.</span>
connection<span class="token punctuation">.</span><span class="token function">onCompletionResolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> CompletionItem<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">CompletionItem</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span>detail <span class="token operator">=</span> <span class="token string">'TypeScript details'</span><span class="token punctuation">,</span>
        item<span class="token punctuation">.</span>documentation <span class="token operator">=</span> <span class="token string">'TypeScript documentation'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span>detail <span class="token operator">=</span> <span class="token string">'JavaScript details'</span><span class="token punctuation">,</span>
        item<span class="token punctuation">.</span>documentation <span class="token operator">=</span> <span class="token string">'JavaScript documentation'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>data</code> fields is used to uniquely identify a completion item in the resolve handler. The data property is transparent for the protocol. Since the underlying message passing protocol is JSON based the data field should only hold data that is serializable to and from JSON.</p> <p>All that is missing is to tell VS Code that the server support code completion requests. To do so, flag the corresponding capability in the intialize handler:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>connection<span class="token punctuation">.</span><span class="token function">onInitialize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">InitializeResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        capabilities<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>
            <span class="token comment">// Tell the client that the server support code complete</span>
            completionProvider<span class="token operator">:</span> <span class="token punctuation">{</span>
                resolveProvider<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The screen shot below shows the completed code running on a plain text file:</p> <p><img src="images/example-language-server/codeComplete.png" alt="Code Complete"></p> <h2 id="additional-language-server-features"><a href="#additional-language-server-features" class="header-anchor">#</a> Additional Language Server features</h2> <p>下面的来的语言特性是语言服务现在支持的除代码完成以外的特性：</p> <ul><li><em>Document Highlights</em>: 高亮显示所有在文本文档中相同的符号。</li> <li><em>Hover</em>: 提供在文本文档中选择的符号的悬停信息。</li> <li><em>Signature Help</em>: 提供在文本文档中选择的符号的签名信息。</li> <li><em>Goto Definition</em>: 提供跳转到文本文档中选择的符号的定义处支持。</li> <li><em>Find References</em>: 提供查找文本文档中选择的符号在所有项目中的引用。</li> <li><em>List Document Symbols</em>: 列出文本文档中定义的所有符号。</li> <li><em>List Workspace Symbols</em>: 列出所有项目中的符号。</li> <li><em>Code Actions</em>: 对给出的文本文档和范围执行命令。</li> <li><em>CodeLens</em>: 对给出的文本文档计算代码元信息统计。</li> <li><em>Document Formatting</em>: 包括格式化整个文档、文档范围、和类型格式化。</li> <li><em>Rename</em>: 在项目内重命名符号。</li></ul> <p>The following language features are currently support in a language server besides code complete:</p> <ul><li><em>Document Highlights</em>: highlights all 'equal' symbols in a text document.</li> <li><em>Hover</em>: provides hover information for a symbol selected in a text document.</li> <li><em>Signature Help</em>: provides signature help for a symbol selected in a text document.</li> <li><em>Goto Definition</em>: provides goto definition support for a symbol selected in a text document.</li> <li><em>Find References</em>: finds all project-wide references for a symbol selected in a text document.</li> <li><em>List Document Symbols</em>: lists all symbols defined in a text document.</li> <li><em>List Workspace Symbols</em>: lists all project-wide symbols.</li> <li><em>Code Actions</em>: compute commands for a given text document and range.</li> <li><em>CodeLens</em>: compute CodeLens statistics for a given text document.</li> <li><em>Document Formatting</em>: this includes formatting of whole documents, document ranges and formatting on type.</li> <li><em>Rename</em>: project-wide rename of a symbol.</li></ul> <h2 id="增量同步文本文档-incremental-text-document-synchronization"><a href="#增量同步文本文档-incremental-text-document-synchronization" class="header-anchor">#</a> 增量同步文本文档   Incremental Text Document Synchronization</h2> <p>示例中通过<code>vscode-languageserver</code>模块提供的简单的文本文档管理器在VS Code和语言服务间同步文档。有两个缺点：</p> <ul><li>因为整个文本文档内容被重复发送给服务造成大量数据传输。</li> <li>如果使用了语言库，很多库支持增量文档更新以避免非必须的解析和虚拟语法树创建。</li></ul> <p>因为协议也支持增量文档同步。使用增量文档同步需要安装三个通知处理器：</p> <ul><li><em>onDidOpenTextDocument</em>: 当文档在VS Code中被打开时调用。</li> <li><em>onDidChangeTextDocument</em>: 当文档内容在VS Code中被修改时调用。</li> <li><em>onDidCloseTextDocument</em>: 当文档在VS Code中被关闭时调用。</li></ul> <p>下面的代码片段将说明怎样在连接上安装这些通知处理器并且在初始化里返回正确的能力声明：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>connection<span class="token punctuation">.</span><span class="token function">onInitialize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">InitializeResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        capabilities<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 启用增量文档同步</span>
            textDocumentSync<span class="token operator">:</span> TextDocumentSyncKind<span class="token punctuation">.</span>Incremental<span class="token punctuation">,</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">onDidOpenTextDocument</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 一个文档在VS Code中被打开。</span>
    <span class="token comment">// params.uri 唯一标识一个文档。对于存储在磁盘上的文档这是文件URI。</span>
    <span class="token comment">// params.text 文档的全部初始化内容。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">onDidChangeTextDocument</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文档内容在VS Code中被修改。</span>
    <span class="token comment">// params.uri 唯一标识一个文档。</span>
    <span class="token comment">// params.contentChanges 描述文档的内容变化。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">onDidCloseTextDocument</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 一个文档在VS Code中被关闭。</span>
    <span class="token comment">// params.uri 唯一标识一个文档。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The example uses the simple text document manager provided by the <code>vscode-languageserver</code> module to synchronize documents between VS Code and the language server. This has two drawbacks:</p> <ul><li>lots of data transfer since the whole content of a text document is sent to the server repeatedly.</li> <li>if an existing language library is used, such libraries usually support incremental document updates to avoid unnecessary parsing and abstract syntax tree creation.</li></ul> <p>The protocol therefore supports incremental document synchronization as well. To make use of incremental document synchronization a server needs to install three notification handlers:</p> <ul><li><em>onDidOpenTextDocument</em>: is called when a text document got opened in VS Code.</li> <li><em>onDidChangeTextDocument</em>: is called when the content of a text document changes in VS Code.</li> <li><em>onDidCloseTextDocument</em>: is called when a text document got closed in VS Code.</li></ul> <p>Below a code snippet that illustrates how to hook these notification handlers on a connection and how to return the right capability on initialize:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>connection<span class="token punctuation">.</span><span class="token function">onInitialize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">InitializeResult</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        capabilities<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// Enable incremental document sync</span>
            textDocumentSync<span class="token operator">:</span> TextDocumentSyncKind<span class="token punctuation">.</span>Incremental<span class="token punctuation">,</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">onDidOpenTextDocument</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// A text document got opened in VS Code.</span>
    <span class="token comment">// params.uri uniquely identifies the document. For documents store on disk this is a file URI.</span>
    <span class="token comment">// params.text the initial full content of the document.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">onDidChangeTextDocument</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// The content of a text document did change in VS Code.</span>
    <span class="token comment">// params.uri uniquely identifies the document.</span>
    <span class="token comment">// params.contentChanges describe the content changes to the document.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">onDidCloseTextDocument</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// A text document got closed in VS Code.</span>
    <span class="token comment">// params.uri uniquely identifies the document.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="下一步-next-steps"><a href="#下一步-next-steps" class="header-anchor">#</a> 下一步   Next Steps</h2> <p>向学习更多的VS COde插件模型，试试阅读这些文档：</p> <ul><li><a href="/docs/extensionAPI/vscode-api.html">vscode API Reference</a> - 学习VS Code语言服务和语言的深度整合。</li></ul> <p>To learn more about VS Code extensibility model, try these topic:</p> <ul><li><a href="/docs/extensionAPI/vscode-api.html">vscode API Reference</a> - Learn about deep language integration with VS Code language services.</li></ul> <h2 id="常见问题-common-questions"><a href="#常见问题-common-questions" class="header-anchor">#</a> 常见问题    Common Questions</h2> <p><strong>问: 当我尝试去附加到服务时，我遇到&quot;cannot connect to runtime process (timeout after 5000ms)&quot;?</strong></p> <p><strong>答:</strong> 如果你的服务没有正在运行那么当你试图去附加调试器时就会看到超时错误。客户端启动夫妇，所以为了拥有一个已经运行的服务，确保你已经启动客户端。</p> <p><strong>Q: When I try to attach to the server, I get &quot;cannot connect to runtime process (timeout after 5000ms)&quot;?</strong></p> <p><strong>A:</strong> You will see this timeout error if the server isn't running when you try to attach the debugger.  The client starts the language server so make sure you have started the client in order to have a running server.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26b143c5.js" defer></script><script src="/assets/js/3.c09e7e7a.js" defer></script><script src="/assets/js/2.3613c5bc.js" defer></script><script src="/assets/js/55.cb30724c.js" defer></script>
  </body>
</html>
