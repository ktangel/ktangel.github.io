<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Day11-Day15 | LeoLiuGe Blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="LeoLiu 一个不断尝试新事情 学习新技术的80后">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta property="og:type" content="article">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta name="applicable-device" content="pc,mobile">
    <link rel="preload" href="/assets/css/0.styles.e82247ed.css" as="style"><link rel="preload" href="/assets/js/app.26b143c5.js" as="script"><link rel="preload" href="/assets/js/3.c09e7e7a.js" as="script"><link rel="preload" href="/assets/js/2.3613c5bc.js" as="script"><link rel="preload" href="/assets/js/12.88c1b978.js" as="script"><link rel="prefetch" href="/assets/js/10.8b48a5e6.js"><link rel="prefetch" href="/assets/js/100.00e14632.js"><link rel="prefetch" href="/assets/js/101.e983096c.js"><link rel="prefetch" href="/assets/js/102.cbdc022d.js"><link rel="prefetch" href="/assets/js/103.e0752f6b.js"><link rel="prefetch" href="/assets/js/104.5706802a.js"><link rel="prefetch" href="/assets/js/105.458969e3.js"><link rel="prefetch" href="/assets/js/106.447bee86.js"><link rel="prefetch" href="/assets/js/107.2794a2fc.js"><link rel="prefetch" href="/assets/js/108.69196138.js"><link rel="prefetch" href="/assets/js/109.592c15a8.js"><link rel="prefetch" href="/assets/js/11.f4dc73e6.js"><link rel="prefetch" href="/assets/js/110.7f986aa6.js"><link rel="prefetch" href="/assets/js/111.aeae13db.js"><link rel="prefetch" href="/assets/js/112.17891637.js"><link rel="prefetch" href="/assets/js/113.73acce45.js"><link rel="prefetch" href="/assets/js/114.1f735019.js"><link rel="prefetch" href="/assets/js/115.02624466.js"><link rel="prefetch" href="/assets/js/116.86bd99e5.js"><link rel="prefetch" href="/assets/js/117.101af32f.js"><link rel="prefetch" href="/assets/js/118.8c3de42b.js"><link rel="prefetch" href="/assets/js/119.48c4ce96.js"><link rel="prefetch" href="/assets/js/120.a9068d51.js"><link rel="prefetch" href="/assets/js/121.34d97451.js"><link rel="prefetch" href="/assets/js/122.e3d20fd5.js"><link rel="prefetch" href="/assets/js/123.b15a9909.js"><link rel="prefetch" href="/assets/js/124.16ddbd07.js"><link rel="prefetch" href="/assets/js/125.d42035bf.js"><link rel="prefetch" href="/assets/js/126.97cbcdbb.js"><link rel="prefetch" href="/assets/js/127.269f92d5.js"><link rel="prefetch" href="/assets/js/128.86408adc.js"><link rel="prefetch" href="/assets/js/129.7d45a6dd.js"><link rel="prefetch" href="/assets/js/13.03701fb1.js"><link rel="prefetch" href="/assets/js/130.988c9796.js"><link rel="prefetch" href="/assets/js/131.a843d739.js"><link rel="prefetch" href="/assets/js/132.628877b5.js"><link rel="prefetch" href="/assets/js/133.573adea9.js"><link rel="prefetch" href="/assets/js/134.66e89387.js"><link rel="prefetch" href="/assets/js/135.e6cef2cb.js"><link rel="prefetch" href="/assets/js/136.e5e5efbe.js"><link rel="prefetch" href="/assets/js/137.a14b0855.js"><link rel="prefetch" href="/assets/js/138.5e728b85.js"><link rel="prefetch" href="/assets/js/139.c9b1d1b4.js"><link rel="prefetch" href="/assets/js/14.a87cadd4.js"><link rel="prefetch" href="/assets/js/140.f7aaf293.js"><link rel="prefetch" href="/assets/js/141.96738168.js"><link rel="prefetch" href="/assets/js/142.952e9d63.js"><link rel="prefetch" href="/assets/js/143.6317df9d.js"><link rel="prefetch" href="/assets/js/144.4818c9d9.js"><link rel="prefetch" href="/assets/js/145.eafe018d.js"><link rel="prefetch" href="/assets/js/146.bf88a1f1.js"><link rel="prefetch" href="/assets/js/147.b0ef29a6.js"><link rel="prefetch" href="/assets/js/148.7e1bb92d.js"><link rel="prefetch" href="/assets/js/149.c1b76a69.js"><link rel="prefetch" href="/assets/js/15.d60df077.js"><link rel="prefetch" href="/assets/js/150.1dbe87cb.js"><link rel="prefetch" href="/assets/js/151.58e172dd.js"><link rel="prefetch" href="/assets/js/152.5e45a717.js"><link rel="prefetch" href="/assets/js/153.dd50b2aa.js"><link rel="prefetch" href="/assets/js/154.1f10cdd3.js"><link rel="prefetch" href="/assets/js/155.97fd8c23.js"><link rel="prefetch" href="/assets/js/156.19009773.js"><link rel="prefetch" href="/assets/js/157.60c6b1cf.js"><link rel="prefetch" href="/assets/js/158.602e7f89.js"><link rel="prefetch" href="/assets/js/159.c28a473f.js"><link rel="prefetch" href="/assets/js/16.b3578a43.js"><link rel="prefetch" href="/assets/js/17.53f42748.js"><link rel="prefetch" href="/assets/js/18.83948d00.js"><link rel="prefetch" href="/assets/js/19.f44dde2a.js"><link rel="prefetch" href="/assets/js/20.89a422c0.js"><link rel="prefetch" href="/assets/js/21.6a0ec22b.js"><link rel="prefetch" href="/assets/js/22.8541a381.js"><link rel="prefetch" href="/assets/js/23.3933c13b.js"><link rel="prefetch" href="/assets/js/24.712ae246.js"><link rel="prefetch" href="/assets/js/25.cffdf98e.js"><link rel="prefetch" href="/assets/js/26.2f5c6080.js"><link rel="prefetch" href="/assets/js/27.5f6bfa07.js"><link rel="prefetch" href="/assets/js/28.664913a5.js"><link rel="prefetch" href="/assets/js/29.ac47bba8.js"><link rel="prefetch" href="/assets/js/30.1cadedaf.js"><link rel="prefetch" href="/assets/js/31.4f8b7ea2.js"><link rel="prefetch" href="/assets/js/32.f7202c8c.js"><link rel="prefetch" href="/assets/js/33.1680bf0c.js"><link rel="prefetch" href="/assets/js/34.198aa9b0.js"><link rel="prefetch" href="/assets/js/35.1a72632a.js"><link rel="prefetch" href="/assets/js/36.837cb2f7.js"><link rel="prefetch" href="/assets/js/37.e471763d.js"><link rel="prefetch" href="/assets/js/38.d0881148.js"><link rel="prefetch" href="/assets/js/39.309026eb.js"><link rel="prefetch" href="/assets/js/4.d0490c7c.js"><link rel="prefetch" href="/assets/js/40.e24f783b.js"><link rel="prefetch" href="/assets/js/41.32829608.js"><link rel="prefetch" href="/assets/js/42.4510f96e.js"><link rel="prefetch" href="/assets/js/43.eb4bd008.js"><link rel="prefetch" href="/assets/js/44.1a1dc587.js"><link rel="prefetch" href="/assets/js/45.f7d10c65.js"><link rel="prefetch" href="/assets/js/46.35943b44.js"><link rel="prefetch" href="/assets/js/47.c6417c68.js"><link rel="prefetch" href="/assets/js/48.d49dead4.js"><link rel="prefetch" href="/assets/js/49.132da5d3.js"><link rel="prefetch" href="/assets/js/5.7950ab83.js"><link rel="prefetch" href="/assets/js/50.c75f213d.js"><link rel="prefetch" href="/assets/js/51.debfae61.js"><link rel="prefetch" href="/assets/js/52.fa9d27ed.js"><link rel="prefetch" href="/assets/js/53.d4a4a066.js"><link rel="prefetch" href="/assets/js/54.ce0b57e9.js"><link rel="prefetch" href="/assets/js/55.cb30724c.js"><link rel="prefetch" href="/assets/js/56.aecc7992.js"><link rel="prefetch" href="/assets/js/57.fe599b61.js"><link rel="prefetch" href="/assets/js/58.edb098e1.js"><link rel="prefetch" href="/assets/js/59.1bd6ce1e.js"><link rel="prefetch" href="/assets/js/6.607a91ef.js"><link rel="prefetch" href="/assets/js/60.85b29cc0.js"><link rel="prefetch" href="/assets/js/61.471d6bc0.js"><link rel="prefetch" href="/assets/js/62.6fc7e56e.js"><link rel="prefetch" href="/assets/js/63.0e9015b4.js"><link rel="prefetch" href="/assets/js/64.0e414f75.js"><link rel="prefetch" href="/assets/js/65.f2501d0c.js"><link rel="prefetch" href="/assets/js/66.60b00821.js"><link rel="prefetch" href="/assets/js/67.cd173b0e.js"><link rel="prefetch" href="/assets/js/68.7c3c6dc5.js"><link rel="prefetch" href="/assets/js/69.fe6f9a3f.js"><link rel="prefetch" href="/assets/js/7.42b15925.js"><link rel="prefetch" href="/assets/js/70.60803f91.js"><link rel="prefetch" href="/assets/js/71.7cfae612.js"><link rel="prefetch" href="/assets/js/72.eb9e1c69.js"><link rel="prefetch" href="/assets/js/73.cd435e08.js"><link rel="prefetch" href="/assets/js/74.74deecbb.js"><link rel="prefetch" href="/assets/js/75.2fd64052.js"><link rel="prefetch" href="/assets/js/76.ada03ff4.js"><link rel="prefetch" href="/assets/js/77.905af665.js"><link rel="prefetch" href="/assets/js/78.7276e0d4.js"><link rel="prefetch" href="/assets/js/79.97d45520.js"><link rel="prefetch" href="/assets/js/8.aa03d242.js"><link rel="prefetch" href="/assets/js/80.128624f8.js"><link rel="prefetch" href="/assets/js/81.1b9a9fb8.js"><link rel="prefetch" href="/assets/js/82.b3f1cec2.js"><link rel="prefetch" href="/assets/js/83.f5b8d8b4.js"><link rel="prefetch" href="/assets/js/84.a6d7fa4c.js"><link rel="prefetch" href="/assets/js/85.e8da2271.js"><link rel="prefetch" href="/assets/js/86.ea5bbf66.js"><link rel="prefetch" href="/assets/js/87.3727b949.js"><link rel="prefetch" href="/assets/js/88.e2c7d687.js"><link rel="prefetch" href="/assets/js/89.6c1aa203.js"><link rel="prefetch" href="/assets/js/9.259fe5ea.js"><link rel="prefetch" href="/assets/js/90.270b8355.js"><link rel="prefetch" href="/assets/js/91.56eec24d.js"><link rel="prefetch" href="/assets/js/92.56f04099.js"><link rel="prefetch" href="/assets/js/93.f4f8c9f0.js"><link rel="prefetch" href="/assets/js/94.0d070675.js"><link rel="prefetch" href="/assets/js/95.8122b7ce.js"><link rel="prefetch" href="/assets/js/96.1666e281.js"><link rel="prefetch" href="/assets/js/97.e4f6c281.js"><link rel="prefetch" href="/assets/js/98.70b7aa4c.js"><link rel="prefetch" href="/assets/js/99.9222f0c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e82247ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LeoLiuGe Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link router-link-active">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link router-link-active">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/JAVA/" class="sidebar-link">第一阶段</a></li><li><a href="/JAVA/Sub2/day1-day5/" class="sidebar-link">Day1-Day5</a></li><li><a href="/JAVA/Sub2/day6-day10/" class="sidebar-link">Day6-Day10</a></li><li><a href="/JAVA/Sub2/day11-day15/" class="active sidebar-link">Day11-Day15</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp概述" class="sidebar-link">JSP概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是jsp" class="sidebar-link">什么是JSP</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp执行过程" class="sidebar-link">JSP执行过程</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#修改jsp模版" class="sidebar-link">修改JSP模版</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp语法" class="sidebar-link">JSP语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#模版元素" class="sidebar-link">模版元素</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp表达式" class="sidebar-link">JSP表达式</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp脚本片段" class="sidebar-link">JSP脚本片段</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp注释" class="sidebar-link">JSP注释</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp指令" class="sidebar-link">JSP指令</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp标签技术" class="sidebar-link">JSP标签技术</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#el表达式" class="sidebar-link">EL表达式</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jstl标签库" class="sidebar-link">JSTL标签库</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jsp作业" class="sidebar-link">JSP作业</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven介绍" class="sidebar-link">Maven介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven是什么" class="sidebar-link">Maven是什么?</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#为什么要使用maven" class="sidebar-link">为什么要使用Maven?</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven安装" class="sidebar-link">Maven安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#下载、安装maven" class="sidebar-link">下载、安装Maven</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven的相关配置" class="sidebar-link">Maven的相关配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#配置本地仓库位置" class="sidebar-link">配置本地仓库位置</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#配置镜像仓库-私服" class="sidebar-link">配置镜像仓库(私服)</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#配置jdk版本" class="sidebar-link">配置JDK版本</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#将maven配置到eclipse中" class="sidebar-link">将Maven配置到Eclipse中</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven的项目构建" class="sidebar-link">Maven的项目构建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建简单工程-java工程" class="sidebar-link">创建简单工程—Java工程</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建简单工程-web工程" class="sidebar-link">创建简单工程—Web工程</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven的目录结构" class="sidebar-link">Maven的目录结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#导入已有的maven项目" class="sidebar-link">导入已有的Maven项目</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven的依赖管理" class="sidebar-link">Maven的依赖管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#依赖-jar包-管理" class="sidebar-link">依赖(jar包)管理</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven三种仓库" class="sidebar-link">Maven三种仓库</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#添加依赖-方式一" class="sidebar-link">添加依赖:方式一</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#添加依赖-方式二" class="sidebar-link">添加依赖:方式二</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#faq-maven常见问题" class="sidebar-link">FAQ:Maven常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#常见maven环境问题" class="sidebar-link">常见Maven环境问题</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#找不到jar包问题" class="sidebar-link">找不到jar包问题</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#拷贝maven仓库" class="sidebar-link">拷贝Maven仓库</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#扩展-maven项目结构" class="sidebar-link">扩展:Maven项目结构</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#maven作业" class="sidebar-link">maven作业</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是会话" class="sidebar-link">什么是会话</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#cookie原理及应用" class="sidebar-link">cookie原理及应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#cookie的工作原理" class="sidebar-link">cookie的工作原理</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#cookie的api及应用" class="sidebar-link">cookie的API及应用</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#案例-使用cookie模拟购物车" class="sidebar-link">案例:使用cookie模拟购物车</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#session原理及应用" class="sidebar-link">session原理及应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#session的工作原理" class="sidebar-link">session的工作原理</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#session是一个域对象" class="sidebar-link">session是一个域对象</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#案例-使用session模拟购物车" class="sidebar-link">案例:使用session模拟购物车</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#总结-两者的区别" class="sidebar-link">总结:两者的区别</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#扩展内容" class="sidebar-link">扩展内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#cookie中保存中文数据的问题" class="sidebar-link">cookie中保存中文数据的问题</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#获取不到之前的session的问题" class="sidebar-link">获取不到之前的session的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#事务及四大特性" class="sidebar-link">事务及四大特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是事务" class="sidebar-link">什么是事务</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#事务的四大特性" class="sidebar-link">事务的四大特性</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mysql中的事务" class="sidebar-link">MySQL中的事务</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#事务并发读问题" class="sidebar-link">事务并发读问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#事务并发读问题-2" class="sidebar-link">事务并发读问题</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#事务隔离级别" class="sidebar-link">事务隔离级别</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#设置隔离级别-了解" class="sidebar-link">设置隔离级别(了解)</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis简介-了解" class="sidebar-link">MyBatis简介(了解)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是mybatis" class="sidebar-link">什么是MyBatis</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#为什么要使用mybatis" class="sidebar-link">为什么要使用MyBatis</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis快速入门" class="sidebar-link">MyBatis快速入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#准备数据，创建库和表" class="sidebar-link">准备数据，创建库和表</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建工程，导入所需jar包、创建测试类" class="sidebar-link">创建工程，导入所需jar包、创建测试类</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#添加mybatis-config-xml文件" class="sidebar-link">添加mybatis-config.xml文件</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#添加empmapper-xml文件" class="sidebar-link">添加EmpMapper.xml文件</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#添加并编写emp实体类" class="sidebar-link">添加并编写Emp实体类</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#实现测试类-并测试" class="sidebar-link">实现测试类,并测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis入门细节" class="sidebar-link">MyBatis入门细节</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis-config-xml配置文件" class="sidebar-link">mybatis-config.xml配置文件</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#empmapper-xml配置文件" class="sidebar-link">EmpMapper.xml配置文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis增删改查" class="sidebar-link">MyBatis增删改查</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#新增员工" class="sidebar-link">新增员工</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#修改员工" class="sidebar-link">修改员工</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#删除员工" class="sidebar-link">删除员工</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis中的占位符" class="sidebar-link">mybatis中的占位符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#占位符" class="sidebar-link">#{}占位符</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#占位符-2" class="sidebar-link">${}占位符</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#动态sql标签" class="sidebar-link">动态SQL标签</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#if、where标签" class="sidebar-link">if、where标签</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#foreach元素" class="sidebar-link">foreach元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mapper接口开发" class="sidebar-link">Mapper接口开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mapper接口开发介绍" class="sidebar-link">Mapper接口开发介绍</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mapper接口开发实现" class="sidebar-link">Mapper接口开发实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#几个可以优化的地方" class="sidebar-link">几个可以优化的地方</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#加入log4j日志框架" class="sidebar-link">加入log4j日志框架</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#sql语句中的特殊符号" class="sidebar-link">SQL语句中的特殊符号</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jdbc-properties文件" class="sidebar-link">jdbc.properties文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#扩展内容-2" class="sidebar-link">扩展内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#jdbc回顾" class="sidebar-link">Jdbc回顾</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis-config文件没有提示的解决办法" class="sidebar-link">mybatis-config文件没有提示的解决办法</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mapper文件没有提示的解决办法" class="sidebar-link">Mapper文件没有提示的解决办法</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#配置达内xml-schema代理服务器" class="sidebar-link">配置达内XML Schema代理服务器</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mybatis作业" class="sidebar-link">mybatis作业</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring简介" class="sidebar-link">spring简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是spring？" class="sidebar-link">什么是Spring？</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring的发展历程" class="sidebar-link">Spring的发展历程</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring的优势" class="sidebar-link">Spring的优势</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring的架构" class="sidebar-link">spring的架构</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#程序中的耦合和解耦" class="sidebar-link">程序中的耦合和解耦</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是程序的耦合" class="sidebar-link">什么是程序的耦合</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#工厂模式解耦介绍" class="sidebar-link">工厂模式解耦介绍</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#工厂模式解耦示例" class="sidebar-link">工厂模式解耦示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring-ioc控制反转" class="sidebar-link">Spring IOC控制反转</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是控制反转" class="sidebar-link">什么是控制反转</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#ioc入门案例" class="sidebar-link">IOC入门案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建工程，引入jar包" class="sidebar-link">创建工程，引入jar包</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建spring配置文件" class="sidebar-link">创建spring配置文件</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建测试类进行解耦" class="sidebar-link">创建测试类进行解耦</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#bean对象的单例和多例" class="sidebar-link">Bean对象的单例和多例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#bean对象的单例和多例概述" class="sidebar-link">Bean对象的单例和多例概述</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#为什么用单实例或多实例？" class="sidebar-link">为什么用单实例或多实例？</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#测试spring的单实例和多实例" class="sidebar-link">测试spring的单实例和多实例</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring-di依赖注入" class="sidebar-link">Spring DI依赖注入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#两种注入方式介绍" class="sidebar-link">两种注入方式介绍</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#set方式注入" class="sidebar-link">set方式注入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#普通属性注入" class="sidebar-link">普通属性注入</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#对象属性注入" class="sidebar-link">对象属性注入</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#构造方法注入" class="sidebar-link">构造方法注入</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#扩展内容-3" class="sidebar-link">扩展内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#applicationcontext-xml没有提示的解决办法" class="sidebar-link">applicationContext.xml没有提示的解决办法</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mvc设计模式" class="sidebar-link">MVC设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#什么是设计模式" class="sidebar-link">什么是设计模式</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#mvc设计模式-2" class="sidebar-link">MVC设计模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#初识springmvc" class="sidebar-link">初识SpringMVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#servlet的缺点" class="sidebar-link">Servlet的缺点</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#springmvc简介" class="sidebar-link">SpringMVC简介</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#spring执行原理" class="sidebar-link">spring执行原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#springmvc入门案例" class="sidebar-link">springmvc入门案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建maven-web工程" class="sidebar-link">创建Maven—web工程</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#在web-xml中配置前端控制器" class="sidebar-link">在web.xml中配置前端控制器</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建并配置springmvc-config-xml" class="sidebar-link">创建并配置springmvc-config.xml</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建并实现hellocontroller类" class="sidebar-link">创建并实现HelloController类</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#创建并实现home-jsp" class="sidebar-link">创建并实现home.jsp</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#访问测试" class="sidebar-link">访问测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#springmvc参数绑定" class="sidebar-link">springmvc参数绑定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#基本类型参数绑定" class="sidebar-link">基本类型参数绑定</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#包装类型参数绑定" class="sidebar-link">包装类型参数绑定</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#日期类型参数绑定" class="sidebar-link">日期类型参数绑定</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#跳转和乱码处理" class="sidebar-link">跳转和乱码处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#实现转发-forward" class="sidebar-link">实现转发(forward)</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#实现重定向-redirect" class="sidebar-link">实现重定向(redirect)</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#乱码处理" class="sidebar-link">乱码处理</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#springmvc响应数据" class="sidebar-link">springmvc响应数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#model的使用" class="sidebar-link">Model的使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#扩展内容-4" class="sidebar-link">扩展内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#springmvc前端控制器放行静态资源的解决办法" class="sidebar-link">springmvc前端控制器放行静态资源的解决办法</a></li><li class="sidebar-sub-header"><a href="/JAVA/Sub2/day11-day15/#applicationcontext-xml没有提示的解决方法" class="sidebar-link">applicationContext.xml没有提示的解决方法</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="day11-day15"><a href="#day11-day15" class="header-anchor">#</a> Day11-Day15</h1> <h1 id="unit08-jsp、el、jstl"><a href="#unit08-jsp、el、jstl" class="header-anchor">#</a> unit08-JSP、EL、JSTL</h1> <h2 id="jsp概述"><a href="#jsp概述" class="header-anchor">#</a> JSP概述</h2> <h3 id="什么是jsp"><a href="#什么是jsp" class="header-anchor">#</a> 什么是JSP</h3> <p>JSP和Servlet都是由SUN公司提供的动态Web资源开发技术。</p> <p>JSP看起来像一个HTML，但和HTML不同的是，JSP中可以书写Java代码，可以通过Java代码展示动态的数据。</p> <div class="language- extra-class"><pre class="language-text"><code>静态Web资源：任何人在任何条件下访问时，看到的都是相同的效果，这样的资源叫做静态Web资源。（html、css、js等）
动态Web资源：不同的人，在不同的条件下访问时，看到的都是不同的效果，这样的资源叫做动态Web资源。（Servlet、jsp、php、.NET等）
</code></pre></div><p>JSP本质上是一个Servlet程序</p> <p><strong>思考1：为什么要学习JSP?</strong></p> <ul><li>Servlet是一段Java程序，适合处理业务逻辑，但是Servlet不适合向浏览器输出一个html网页。</li> <li>html可以作为页面返回，但是html是一个静态Web资源，无法展示动态数据。</li> <li>而JSP也是页面的开发技术，也可以作为页面返回，并且JSP中可以书写Java代码，可以通过Java代码展示动态的数据。</li> <li>因此，JSP的出现即解决了Servlet不适合输出页面的问题，也解决了HTML无法展示动态数据的问题！</li></ul> <p><strong>思考2：为什么说JSP本质是一个Servlet?</strong></p> <p>在JSP第一次被访问时，会翻译成一个Servlet程序。访问JSP后看到的html网页，其实是翻译后的Servlet执行的结果。（也就是说，访问JSP后看到的网页，是JSP翻译后的Servlet输出到浏览器的。）</p> <h3 id="jsp执行过程"><a href="#jsp执行过程" class="header-anchor">#</a> JSP执行过程</h3> <p><strong>访问服务器中的JSP文件，其执行过程为</strong>:</p> <ol><li>当浏览器请求服务器中的某一个JSP文件（例如：localhost/09-jsp/test.jsp），服务器会根据请求资源的路径去寻找该文件：</li> <li>如果找到了，JSP翻译引擎会将JSP翻译成一个Servlet程序（JSP----&gt; xxx.java----&gt; xxx.class）,然后Servlet程序再执行，执行的结果是向浏览器输出一个HTML网页！</li> <li>如果没有找到，服务器将会响应一个404页面，通知浏览器请求的资源不存在。</li></ol> <p><strong>访问服务器中的HTML文件，其执行过程为</strong>:</p> <ol><li>当浏览器请求服务器中的某一个HTML文件时（例如：localhost/09-jsp/test.html），服务器会根据请求资源的路径去寻找该文件：</li> <li>如果找到了，服务器会将html文件的内容作为响应实体发送给浏览器，浏览器再解析html并显示在网页上。</li> <li>如果没有找到，服务器将会响应一个404页面，通知浏览器请求的资源不存在。</li></ol> <h3 id="修改jsp模版"><a href="#修改jsp模版" class="header-anchor">#</a> 修改JSP模版</h3> <p>修改JSP模版步骤: 点击菜单栏中的 window --&gt; Preferences，出现如下窗口:</p> <p><img src="JAVAWEB-NOTE03.assets/4ff5d1a10bfe557a7ab921485a8ec375.png" alt=""></p> <p>点击edit编辑JSP模版，修改为如下:</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
${cursor}
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h2 id="jsp语法"><a href="#jsp语法" class="header-anchor">#</a> JSP语法</h2> <h3 id="模版元素"><a href="#模版元素" class="header-anchor">#</a> 模版元素</h3> <p>模板元素是指写在JSP中的html内容</p> <p>或者除了JSP特有内容以外的其他内容称之为模板元素</p> <p>模板元素在翻译后的Servlet中，被out.write原封不动的发送给浏览器，由浏览器负责解析并显示。</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200331114124004.png" alt="image-20200331114124004"></p> <h3 id="jsp表达式"><a href="#jsp表达式" class="header-anchor">#</a> JSP表达式</h3> <p>格式：<code>&lt;%= 常量、变量、表达式 %&gt;</code></p> <p>作用：计算表达式的结果，将结果输出到浏览器中，由浏览器负责解析并显示。</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%= &quot;Hello JSP...&quot; %&gt;
&lt;% String name = &quot;林青霞&quot;; %&gt;
&lt;%= name %&gt;
&lt;%= 100+123 %&gt;
&lt;%= Math.random() %&gt;
</code></pre></div><h3 id="jsp脚本片段"><a href="#jsp脚本片段" class="header-anchor">#</a> JSP脚本片段</h3> <p>格式：<code>&lt;% 若干Java语句 %&gt;</code></p> <p>作用：在翻译后的Servlet中，将脚本片段中的Java语句复制粘贴到Servlet的对应的位置执行。例如：</p> <p>在JSP中代码如下：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;!-- 在页面上输出5行&quot;hello JSP&quot; --&gt;
&lt;%
	for(int i=0; i&lt;5; i++){
		out.write(&quot;Hello JSP...&lt;br/&gt;&quot;);
	}
%&gt;
</code></pre></div><p>在翻译后的Servlet中代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Hello JSP...&lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>另外，在某一个脚本片段中的Java代码可以是不完整的，但是在JSP中所有的脚本片段加在一起，必须是完整符合Java语法。例如，在JSP中代码如下：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;% for(int i=0;i&lt;5;i++){ %&gt;
		Hello JSP~~~&lt;br/&gt;
&lt;% } %&gt;
</code></pre></div><p>在翻译后的Servlet中：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
  out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t\tHello JSP~~~&lt;br/&gt;\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre></div><h3 id="jsp注释"><a href="#jsp注释" class="header-anchor">#</a> JSP注释</h3> <p>格式：&lt;%-- JSP注释内容 --%&gt;</p> <p>作用：（1）为代码添加解释说明  （2）将一些暂时不需要执行的代码注释掉。</p> <p>在JSP翻译时，注释内容不会参与翻译，而是直接被丢弃</p> <p>面试题：考察JSP中的JSP注释、Java注释、html注释</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%-- 
&lt;% out.write( &quot;aaaaa&lt;br/&gt;&quot; ); %&gt;
 --%&gt;
&lt;% //out.write( &quot;bbbbb&lt;br/&gt;&quot; ); %&gt;
&lt;!-- 
&lt;% out.write( &quot;ccccc&lt;br/&gt;&quot; ); %&gt;
 --&gt;
</code></pre></div><p>问题：（1）上面输出的三行内容，在访问时，会显示哪一行内容？</p> <p>第一行被JSP注释给注释了，JSP注释的内容不会参与翻译，也不会执行，更不会发送给浏览器，也不会在浏览器上显示。</p> <p>第二行被Java注释给注释了，放在脚本片段中的内容会参与翻译，会将其中的Java代码复制到翻译后的Servlet中，但由于代码被注释了，所以不会执行，也不会发送给浏览器，更不会在浏览器上显示。</p> <p>第三行被html注释给注释了，html注释在JSP中是模板元素，注释本身会发送给浏览器，注释中的脚本片段会参与翻译，其中的java代码也会执行，也会将内容（ccccc）发送给浏览器，但由于发送到浏览器后的ccccc被html注释包裹，因此也不会显示在浏览器上。</p> <p>（2）上面输出的三行内容，哪一行会发送到浏览器中？（不管是否显示）</p> <p>其中第三行内容会发送到浏览器中，但不会显示，因为前后有html注释。</p> <h3 id="jsp指令"><a href="#jsp指令" class="header-anchor">#</a> JSP指令</h3> <p>指令的格式：<code>&lt;%@ 指令名称 若干属性声明... %&gt;</code></p> <p>指令的作用：用于指挥JSP解析引擎如何将一个JSP翻译成一个Servlet程序。</p> <p><strong>1、page指令</strong>：用于声明JSP的基本属性信息（比如JSP使用的编码，JSP使用的开发语言等）</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%@ page language=&quot;java&quot;%&gt;
-- language属性用于指定当前JSP使用的开发语言，目前只有java语言支持

&lt;%@ page import=&quot;java.util.Date&quot;%&gt;
-- import属性用于导入包，如果不导入包，在使用其他包下的类时，就需要在类名前面加上包路径，例如： java.util.Date date = new java.util.Date();

&lt;%@ page pageEncoding=&quot;UTF-8&quot;%&gt;
-- pageEncoding属性是用于指定当前JSP使用的编码，Eclipse工具会根据这个编码保存JSP文件。
保证pageEncoding属性指定的编码和JSP文件保存时使用的编码相同,可以避免JSP文件出现乱码!
</code></pre></div><p><strong>2、taglib指令</strong>：用于引入JSTL标签库或者其他的自定义标签库</p> <p>后面讲解JSTL标签库时会讲解！</p> <h2 id="jsp标签技术"><a href="#jsp标签技术" class="header-anchor">#</a> JSP标签技术</h2> <p>在JSP页面中写入大量的java代码会导致JSP页面中html代码和java代码混杂在一起，会造成jsp页面结构的混乱，导致后期难于维护，并且代码难以复用。</p> <p>于是在JSP的2.0版本中，sun提出了JSP标签技术，推荐使用标签来代替JSP页面中java代码，并且推荐，JSP2.0以后不要在JSP页面中出现任何一行java代码。</p> <h3 id="el表达式"><a href="#el表达式" class="header-anchor">#</a> EL表达式</h3> <p>格式：<code>${ 常量/表达式/变量 }</code>	（放在EL中的变量得先存入域中，才可以获取变量的值）</p> <p>作用：（1）计算放在其中的表达式的结果，将结果输出在当前位置。</p> <p>（2）主要作用：用于从域对象中获取数据，将获取到的数据输出在当前位置。</p> <p>域对象：pageContext、request、session、application</p> <p><strong>1、获取常量、表达式、变量的值（变量得先存入域中）</strong></p> <div class="language-jsp extra-class"><pre class="language-text"><code>${ &quot;hello el&quot; } 
hello el	&lt;br/&gt;
${ 100+123 }
${ 12*12 &gt; 143 ? &quot;yes&quot; : &quot;no&quot; } &lt;br/&gt;

&lt;% 
	String name = &quot;马云&quot;;
	request.setAttribute( &quot;name123&quot; , name );
%&gt;
${ name123 }
&lt;%= request.getAttribute(&quot;name123&quot;) %&gt;
&lt;%-- 在EL表达式中书写变量,底层会根据变量名到四个作用域中寻找该名称的属性值
	如果找到对应的属性值, 就直接返回, 输出到当前位置; 如果找不到就接着寻找
	直到找完四个作用域, 最后还找不到就什么都不输出!
	到四个作用域中寻找的顺序为: pageContext-&gt;request-&gt;session-&gt;application
 --%&gt;
</code></pre></div><p><strong>2、获取作用域中数组或集合中的元素</strong></p> <p>Servlet中的代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//声明一个数组, 为数组添加元素, 并将数组存入到域中</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;刘德华&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;郭富城&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;张学友&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;黎明&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> <span class="token string">&quot;names&quot;</span><span class="token punctuation">,</span> names <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将请求转发到jsp, 在JSP中获取域中的数组中的元素</span>
request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span> <span class="token string">&quot;/02-el.jsp&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>JSP中的代码：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%-- 获取从Servlet转发带过来的域中的数组中的元素 --%&gt;
${ names[0] } &lt;%-- 刘德华 --%&gt;
${ names[1] } &lt;%-- 郭富城  --%&gt;
${ names[2] } &lt;%-- 张学友 --%&gt;
${ names[3] } &lt;%-- 黎明 --%&gt;
</code></pre></div><p><strong>3、获取作用域中map集合中的元素</strong></p> <p>Servlet中的代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//声明一个map集合,为集合添加元素, 并将map集合存入到域中</span>
<span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> <span class="token string">&quot;name&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;尼古拉斯赵四&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> <span class="token string">&quot;age&quot;</span> <span class="token punctuation">,</span>  <span class="token number">28</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> <span class="token string">&quot;addr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;中国&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> <span class="token string">&quot;map1&quot;</span><span class="token punctuation">,</span> map <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将请求转发到jsp, 在JSP中获取域中的数组中的元素</span>
request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span> <span class="token string">&quot;/02-el.jsp&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>JSP中的代码：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>${ map1.name } &lt;%-- 尼古拉斯赵四 --%&gt;
${ map1.age } &lt;%-- 28 --%&gt;
${ map1.addr } &lt;%-- 中国 --%&gt;
</code></pre></div><p><strong>4、获取作用域中JavaBean对象的属性值</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Bean：指可重用的组件
JavaBean：指Java中可重用的组件
业务Bean：专门用于处理业务逻辑（例如：处理注册请求时，在将用户的注册信息保存到数据库之前，需要对注册薪资进行校验）
实体Bean：是专门用于封装数据的（例如：User user = new User() ...）
</code></pre></div><p>Servlet中的代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//声明一个User对象, 为对象的属性赋值, 并将User对象存入到域中</span>
<span class="token class-name">User</span> u1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
u1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span> <span class="token string">&quot;刘德华&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
u1<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span> <span class="token number">18</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
u1<span class="token punctuation">.</span><span class="token function">setAddr</span><span class="token punctuation">(</span> <span class="token string">&quot;中国香港&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> <span class="token string">&quot;user&quot;</span> <span class="token punctuation">,</span> u1 <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//将请求转发到jsp, 在JSP中获取域中的数组中的元素</span>
request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span> <span class="token string">&quot;/02-el.jsp&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>JSP中的代码：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%-- 
${ user.getName() }
${ user.getAge() }
${ user.getAddr() } --%&gt;
&lt;hr/&gt;
&lt;%-- user.name 底层调用的仍然是 getName()方法--%&gt;
${ user.name }
&lt;%-- user.age 底层调用的仍然是 getAge()方法--%&gt;
${ user.age }
&lt;%-- user.addr 底层调用的仍然是 getAddr()方法--%&gt;
${ user.addr }
</code></pre></div><h3 id="jstl标签库"><a href="#jstl标签库" class="header-anchor">#</a> JSTL标签库</h3> <p>JSTL标签库是为JavaWeb开发人员提供的一套标准通用的标签库；</p> <p>JSTL标签库和EL配合使用可以取代JSP中大部分的Java代码；</p> <p>在使用JSTL标签库之前需要完成：</p> <ul><li>导入JSTL的开发包</li></ul> <p><img src="JAVAWEB-NOTE03.assets/image-20200401090204772.png" alt="image-20200401090204772"></p> <ul><li>在使用JSTL标签库的JSP中引入JSTL（taglib指令）</li></ul> <p><img src="JAVAWEB-NOTE03.assets/image-20200401090301088.png" alt="image-20200401090301088"></p> <hr> <p><strong>其中常用的标签如下:</strong></p> <p><code>1、&lt;c:set&gt;&lt;/c:set&gt;</code> -- 用于往域中添加属性，或者修改域中已有的属性值</p> <p><strong>c:set 标签属性总结:</strong></p> <div class="language- extra-class"><pre class="language-text"><code>(1)var -- 指定存入作用域中的属性名称
(2)value -- 指定存入作用域中属性的值
(3)scope -- 指定将属性存入哪一个作用域中,默认值是page,表示pageContext域
可取值: a)page表示pageContext域 b)request表示request域
	c)session表示session域 d)application表示ServletContext域
</code></pre></div><p>代码示例：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%-- request.setAttribute(&quot;name&quot;, &quot;张三&quot;); --%&gt;
&lt;c:set var=&quot;name&quot; value=&quot;张三&quot; scope=&quot;request&quot;/&gt;
${ name }

&lt;% String job = &quot;java开发工程师&quot;; %&gt;
&lt;c:set var=&quot;job&quot; value=&quot;&lt;%= job %&gt;&quot; scope=&quot;request&quot;/&gt;
${ job }

&lt;c:set var=&quot;name&quot; value=&quot;张三丰&quot; scope=&quot;request&quot;/&gt;
${ name }
</code></pre></div><p><code>2、&lt;c:if&gt;&lt;/c:if&gt;</code> -- 构造简单的 if…else…结构语句</p> <p><strong>c:if 标签属性总结:</strong></p> <div class="language- extra-class"><pre class="language-text"><code>test属性 -- 指定一个布尔表达式，当表达式的结果为true时，将会执行（输出）c:if标签中的内容，如果表达式结果为false,将不会输出c:if标签中的内容
</code></pre></div><p>代码示例：往域中存入一个成绩, 根据成绩判断成绩所属的等级</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;c:if test=&quot;${ 3&gt;5 }&quot;&gt;yes&lt;/c:if&gt;
&lt;c:if test=&quot;${ 3&lt;=5 }&quot;&gt;no&lt;/c:if&gt;
&lt;hr&gt;
&lt;!-- 根据成绩判断成绩所属的等级 --&gt;
&lt;c:set var=&quot;score&quot; value=&quot;-35&quot;/&gt;
&lt;c:if test=&quot;${ score&gt;=80 and score&lt;=100 }&quot;&gt;您的成绩属于: 优秀!&lt;/c:if&gt;
&lt;c:if test=&quot;${ score&gt;=60 and score&lt;80 }&quot;&gt;您的成绩属于: 中等!&lt;/c:if&gt;
&lt;c:if test=&quot;${ score&gt;=0 and score&lt;60 }&quot;&gt;您的成绩属于: 不及格!&lt;/c:if&gt;
&lt;c:if test=&quot;${ score&lt;0 or score&gt;100 }&quot;&gt;您的成绩有误!&lt;/c:if&gt;
</code></pre></div><p><code>3、&lt;c:forEach&gt;&lt;/c:forEach&gt;</code> -- 对集合或数组等中元素进行循环遍历或者是执行指定次数的循环.</p> <p>(1) 遍历域中数组或集合中的元素</p> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><p>(2) 遍历域中map集合中的元素</p> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><p>(3) 遍历0~100之间的整数，将是3的倍数的数值输出到浏览器中</p> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><p><strong>c:forEach 标签属性总结:</strong></p> <div class="language- extra-class"><pre class="language-text"><code>(1)items: 指定需要遍历的集合或数组
(2)var: 指定用于接收遍历过程中的每一个元素
(3)begin: 指定循环从哪儿开始
(4)end: 指定循环到哪儿结束
(5)step: 指定循环时的步长, 默认值是1
(6)varStatus: 用于表示循环遍历状态信息的对象, 这个对象上有如下属性:
	first属性: 表示当前遍历是否是第一次, 若是, 则返回true;
	last属性: 表示当前遍历是否是最后一次, 若是, 则返回true;
	count属性: 记录当前遍历是第几次
</code></pre></div><p>代码示例：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>
</code></pre></div><h2 id="jsp作业"><a href="#jsp作业" class="header-anchor">#</a> JSP作业</h2> <p><code>03-31作业：</code></p> <p>(1) 完成&lt;&lt;Servlet、request、response练习题&gt;&gt;</p> <p>(2) 完成&lt;&lt;day11-jsp作业&gt;&gt;中的练习题</p> <p>(3)练习课上讲的c:set标签和c:if标签</p> <h1 id="unit09-maven"><a href="#unit09-maven" class="header-anchor">#</a> unit09-Maven</h1> <p><strong>今日学习目标：</strong></p> <ol><li><p>了解什么是Maven及Maven的作用</p></li> <li><p>掌握Maven安装及整合到Eclipse中</p></li> <li><p>掌握如何使用Maven构建Java项目和Web项目</p></li> <li><p>掌握使用Eclipse导入现有的Maven项目</p></li> <li><p>了解Maven的三种仓库(本地仓库、镜像仓库（私服）、中央仓库（公服）)</p></li> <li><p>了解Maven如何管理依赖（即管理jar包）</p></li></ol> <h2 id="maven介绍"><a href="#maven介绍" class="header-anchor">#</a> Maven介绍</h2> <h3 id="maven是什么"><a href="#maven是什么" class="header-anchor">#</a> Maven是什么?</h3> <p><img src="JAVAWEB-NOTE03.assets/29cb6062127316fbe9e659ec05108844.png" alt=""></p> <p><strong>Maven</strong>: 翻译为&quot;专家&quot;、&quot;内行&quot;，是<strong>Apache</strong>下的一个纯Java开发的一个开源项目。</p> <p><strong>Maven</strong>是一个项目管理工具，使用Maven可以来管理企业级的Java项目开发及依赖的管理。</p> <p>使用<strong>Maven</strong>开发，可以简化项目配置，统一项目结构。总之，Maven可以让开发者的工作变得更简单。</p> <hr> <p>什么是依赖管理？要明白依赖管理，首先要知道什么是依赖？</p> <p>一个Java项目中往往会依赖一些第三方的jar包。比如JDBC程序中要依赖数据库驱动包，或者在使用c3p0连接池时，要依赖c3p0的jar包等。这时我们称这些Java项目依赖第三方jar包。</p> <p>而所谓的依赖管理，其实就是对项目中所有依赖的jar包进行规范化管理。</p> <h3 id="为什么要使用maven"><a href="#为什么要使用maven" class="header-anchor">#</a> 为什么要使用Maven?</h3> <p>传统的项目（工程）中管理项目所依赖的jar包完全靠人工进行管理，而人工管理jar包可能会产生诸多问题。</p> <p><strong>1、不使用Maven，采用传统方式管理jar包的弊端：</strong></p> <p>(1)在一些大型项目中会使用一些框架，比如SSM或者SSH框架，而框架中所包含的jar包非常多（甚至还依赖其他第三方的jar包），如果这些jar包我们手动去网上寻找，有些jar包不容易找到，比较麻烦。</p> <p>(2)传统方式会将jar包添加到工程中，比如Java工程中将jar包放在工程根目录或者放在自建的lib目录下；JavaWeb工程会将jar包放在:/WEB-INF/lib目录下，这样会导致项目文件的体积暴增（例如，有些项目代码本身体积可能仅仅几兆，而加入jar包后，工程的体积可能会达到几十兆甚至百兆）。</p> <p>(3)在传统的Java项目中是将所有的jar包统一拷贝的同一目录中，可能会存在jar包文件名称冲突的问题！</p> <p>(4)在进行项目整合时，可能会出现jar包版本冲突的问题。</p> <p>(5)在传统java项目中通过编译（手动编译或者在eclipse保存自动编译）、测试（手动在main函数中测试、junit单元测试）、打包部署(手动打war包/手动发布)、运行(手动启动tomcat运行)，最终访问程序。</p> <p><strong>2、使用Maven来管理jar包的优势：</strong></p> <p>(1)Maven团队维护了一个非常全的Maven仓库(中央仓库)，其中几乎包含了所有的jar包，使用Maven创建的工程可以自动到Maven仓库中下载jar包，方便且不易出错。</p> <p>另外，在Maven构建的项目中，如果要使用到一些框架，我们只需要引入框架的核心jar包，框架所依赖的其他第三方jar包，Maven也会一并去下载。</p> <p>(2)在Maven构建的项目中，不会将项目所依赖的jar包拷贝到每一个项目中，而是将jar包统一放在仓库中管理，在项目中只需要引入jar包的位置(坐标)即可。这样实现了jar包的复用。</p> <p>(3)Maven采用坐标来管理仓库中的jar包，其中的目录结构为【公司名称+项目/产品名称+版本号】，可以根据坐标定位到具体的jar包。即使使用不同公司中同名的jar包，坐标不同（目录结构不同），文件名也不会冲突。</p> <p>(4)Maven构建的项目中，通过pom文件对项目中所依赖的jar包及版本进行统一管理，可避免版本冲突。</p> <p>(5)在Maven项目中，通过一个命令或者一键就可以实现项目的编译（mvn complie）、测试（mvn test）、打包部署（mvn deploy）、运行（mvn install）等。</p> <p>还有发布到tomcat服务器中运行: mvn tomcat7:run。如果想实现上面的所有过程，只需要记住一个命令：mvn install</p> <p>总之，使用Maven遵循规范开发有利于提高大型团队的开发效率，降低项目的维护成本，大公司都会优先使用Maven来构建项目.</p> <h2 id="maven安装"><a href="#maven安装" class="header-anchor">#</a> Maven安装</h2> <h3 id="下载、安装maven"><a href="#下载、安装maven" class="header-anchor">#</a> 下载、安装Maven</h3> <p>1、官方下载地址：http://maven.apache.org/download.cgi</p> <p><img src="JAVAWEB-NOTE03.assets/53a1d2f3f17b247cd6d1690974484a38.png" alt=""></p> <p>2、下载绿色版，解压之后就可以使用。</p> <p><img src="JAVAWEB-NOTE03.assets/f053c9311f77b5a8d9f905fa3859e2c7.png" alt=""></p> <p><img src="JAVAWEB-NOTE03.assets/9ab44a6351a1fd7320ae28eea7a0fa6b.png" alt=""></p> <p>原则: 安装的路径中不要有中文和空格!!</p> <p>3、若要下载旧版本Maven，可以访问：</p> <div class="language- extra-class"><pre class="language-text"><code>https://archive.apache.org/dist/maven/maven-3/
</code></pre></div><p><img src="JAVAWEB-NOTE03.assets/2125c89c33f029357b460c5f98edaed5.png" alt=""></p> <p><img src="JAVAWEB-NOTE03.assets/4465c83cfebe53f76a6e25e5e919402d.png" alt=""></p> <h2 id="maven的相关配置"><a href="#maven的相关配置" class="header-anchor">#</a> Maven的相关配置</h2> <p>在开发中更多是通过Eclipse+Maven来构建Maven项目，所以这里我们需要将Maven配置到Eclipse开发工具中。</p> <p>在将安装好的Maven工具配置的Eclipse开发工具中之前，需要做一些相关的配置。</p> <h3 id="配置本地仓库位置"><a href="#配置本地仓库位置" class="header-anchor">#</a> 配置本地仓库位置</h3> <p>本地仓库：其实就是本地硬盘上的某一目录，该目录中会包含maven项目中所需要的所有jar包及插件。当所需jar包在本地仓库没有时，从网络上下载下来的jar包也会存放在本地仓库中。</p> <p>因此本地仓库其实就是一个存放jar包的目录，我们可以指定Maven仓库的位置。</p> <p>如果不指定，maven本地仓库的默认位置是在c盘，在：</p> <p><code>C:/Users/{当前用户}/.m2/repository</code>，例如:</p> <p><img src="JAVAWEB-NOTE03.assets/d9d738475e447449e535cf7e6a735be8.png" alt=""></p> <p>可以保持默认，当然也可以修改本地仓库的位置到别的盘符路径。</p> <p>修改方法：找到[MAVEN_HOME]/conf/目录中的配置文件settings.xml，修改maven仓库的路径。</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200401104914602.png" alt="image-20200401104914602"></p> <p>配置该目录后，以后通过maven下载的jar包将会保存在配置的目录下。</p> <p><strong>以上内容可以总结为：</strong></p> <ol><li>什么是本地仓库？</li> <li>本地仓库的默认位置在哪儿？</li> <li>配置和不配置本地仓库有什么区别？</li></ol> <h3 id="配置镜像仓库-私服"><a href="#配置镜像仓库-私服" class="header-anchor">#</a> 配置镜像仓库(私服)</h3> <p>当maven项目中需要依赖jar包时，如果本地仓库中没有，就会到远程仓库去下载jar包。</p> <p>如果不配置镜像仓库，默认连接的是中央仓库，由于中央仓库面向的是全球用户，所以在下载jar包时，速度可能会比较慢，效率会比较低。</p> <p>可以在settings.xml文件中配置连接达内镜像仓库（前提是在达内教室，连接的是达内内网）或者连接阿里云镜像仓库（需要有外网）。</p> <p>1、如果连接的是达内内网，可以连接达内镜像仓库（如果不配置，默认连接中央仓库，没有外网，连接不了中央仓库，会导致jar包无法下载）。</p> <p>需要做的是，在settings.xml文件中的<code>&lt;settings&gt;</code>标签下的<code>&lt;mirrors&gt;</code>标签内部添加如下配置，配置达内镜像仓库：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-tedu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Nexus tedu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.tedu.cn/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2、如果在家里、在公司连接的是外网，是无法连接达内的镜像仓库，可以选择什么都不配置，默认连接中央仓库，或者可以配置连接阿里云镜像仓库（不要使用手机热点网络连接），配置如下：</p> <p>配置阿里云镜像仓库：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Nexus aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>镜像仓库配置总结：</strong></p> <ol><li><p>当所需jar包在本地仓库没有时，会从网络上下载。配置镜像仓库其实就是配置，去网络中哪个位置下载jar包到本地。</p></li> <li><p>如果在公司，并且公司有搭建镜像服务器，推荐使用公司的镜像服务器下载jar包，速度会更快。（如果在达内，使用的是内网，只能配置达内的镜像仓库。否则，没有外网也连接不了中央仓库，下载jar包会失败！）</p></li> <li><p>如果在家里，使用的是外网，可以不配置镜像仓库，默认连接中央仓库下载jar包，或者配置阿里云的镜像仓库。连接阿里云服务器下载jar包。（注意，如果配置阿里云镜像服务器，<strong>不可使用手机热点网络！</strong>）</p></li></ol> <h3 id="配置jdk版本"><a href="#配置jdk版本" class="header-anchor">#</a> 配置JDK版本</h3> <p>通过 Maven创建的工程，JDK版本默认是JDK1.5，每次都需要手动改为更高的版本。</p> <p>这里可以通过修改maven的settings.xml文件, 达到一劳永逸的效果。</p> <p>配置方式为：打开 <code>{maven根目录}/conf/settings.xml</code> 文件并编辑，在 settings.xml文件内部的 <code>&lt;profiles&gt;</code> 标签内部添加如下配置：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>development<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdk</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jdk</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.compilerVersion</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.compilerVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="将maven配置到eclipse中"><a href="#将maven配置到eclipse中" class="header-anchor">#</a> 将Maven配置到Eclipse中</h3> <p>将Maven工具配置到Eclipse中，就可以通过Eclipse和自己安装的Maven创建Maven项目了。</p> <p><strong>1、window右键--&gt; Preferences：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/95e8c0d77e32611aa01c83fdfe9115bc.png" alt=""></p> <p><strong>2、点击Maven选项，在右侧选项中勾选 &quot;Download Artifact Sources&quot;：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/b8de69f1e0238506740120c3ac2761b2.png" alt=""></p> <p><strong>3、点击add将自己安装的Maven添加进来：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/c75f99240250846b1009f595627fd48b.png" alt=""></p> <p><strong>4、添加自己安装的Maven：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/1e470e51fcaec075f1d1e3475978325f.png" alt=""></p> <p><img src="JAVAWEB-NOTE03.assets/90ca91b942da7c2a58b6e38d234200c3.png" alt=""></p> <p>**一定要注意:**自己安装的Maven不要放在桌面上(容易丢失，并且路径中往往有空格)，maven的安装路径中也不要包含中文和空格!!</p> <p><img src="JAVAWEB-NOTE03.assets/88bd59974c2d8f430ffab34336bb9f33.png" alt=""></p> <p><strong>5、将默认的maven切换为自己配置的maven：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/3c3426a658642a9ca1c41e67e790f006.png" alt=""></p> <p><strong>6、设置maven的settings文件的位置：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/3290041ab768b3e7a6ee02ffd40f8c9e.png" alt=""></p> <p>**7、测试是否配置成功：**window---&gt; show view ---&gt; other中搜索&quot;maven&quot;，点击下面的选框中的选项</p> <p><img src="JAVAWEB-NOTE03.assets/facabede667d2edbead383cd5d725a75.png" alt=""></p> <p>在弹出的窗口中，查看自己配置的本地仓库和远程仓库镜像:</p> <p><img src="JAVAWEB-NOTE03.assets/e5fbbd21f05c86804f0656638784cba8.png" alt=""></p> <h2 id="maven的项目构建"><a href="#maven的项目构建" class="header-anchor">#</a> Maven的项目构建</h2> <p>通过Maven构建Java项目分为两种方式：</p> <p>（1）创建Maven的简单Java工程以及创建Maven的简单Web工程</p> <p>（2）创建使用模板的Java工程以及创建使用模板的Web工程</p> <p>在利用Maven构建项目时分两种，第一种是：创建简单工程**（Create a simple
project）**，即在创建时勾选前面的框。</p> <p><img src="JAVAWEB-NOTE03.assets/8888dd2dcf76aff253b16f4559f6df39.png" alt=""></p> <p><em>(不勾选前面的框，即创建使用骨架（其实就是模版）创建Maven工程)</em></p> <p>另，在创建简单工程时，还分为创建<strong>Java工程</strong>和<strong>JavaWeb工程</strong>。下面分别进行演示。</p> <h3 id="创建简单工程-java工程"><a href="#创建简单工程-java工程" class="header-anchor">#</a> 创建简单工程—Java工程</h3> <p><strong>1、空白处右键New ---&gt; Maven Project：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/a21856795d5e9f4c4f63603c68711cbb.png" alt=""></p> <p><strong>2、在弹出的窗口中，勾选前面的框，创建一个简单工程（即不使用骨架），进入下一步。</strong></p> <p><img src="JAVAWEB-NOTE03.assets/d8b1436aea89ddf1c2ee001333a9f56c.png" alt=""></p> <p><strong>3、在弹出的窗口中，填写内容(Package选择jar，即创建java工程)，点击完成即可。</strong></p> <p><img src="JAVAWEB-NOTE03.assets/eb0b7c41231cc90448d85150fd76ce95.png" alt=""></p> <p><strong>在上述内容中，必填的内容有四项：</strong></p> <p>(1)<strong>Group Id</strong> -- 组的名称，通常填写公司名称（比如com.tedu）或者组织名称(org.apache..)</p> <p>(2)<strong>Artifact Id</strong> -- 项目名称或者模块名称</p> <p>(3)<strong>Version</strong> -- 项目的版本，创建的项目默认是0.0.1-SNAPSHOT快照，也叫非正式版，正式版是RELEASE)</p> <p>(4)<strong>Package</strong> -- 项目的类型：jar表示创建的是Java工程，war表示创建的是web工程，pom表示创建的是父工程（当然相对的还有子工程）或者聚合工程，pom目前我们不讨论。</p> <p>填写完毕后，点击完成即可完成创建简单Java工程</p> <p><strong>4、切换工程视图为包视图：window --&gt; show view，在弹出的窗口中搜索：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/0578e41f1fad77ea0ed8509afd2d11d9.png" alt=""></p> <h3 id="创建简单工程-web工程"><a href="#创建简单工程-web工程" class="header-anchor">#</a> 创建简单工程—Web工程</h3> <p><strong>1、空白处右键New ---&gt; Maven Project：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/a21856795d5e9f4c4f63603c68711cbb.png" alt=""></p> <p><strong>2、在弹出的窗口中，勾选前面的框，创建一个简单工程（即不使用骨架），进入下一步。</strong></p> <p><img src="JAVAWEB-NOTE03.assets/d8b1436aea89ddf1c2ee001333a9f56c.png" alt=""></p> <p><strong>3、在弹出的窗口中，填写内容(Package选择war，即创建web工程)，点击完成即可。</strong></p> <p><img src="JAVAWEB-NOTE03.assets/e6f4239c8e4caba3a12fd2852be782bc.png" alt=""></p> <p><strong>4、创建完成后pom.xml文件会报错，说找不到web.xml文件，例如：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/ce00e7568eb6f3632ae14f0053e87451.png" alt=""></p> <p><strong>手动添加(拷贝)即可，例如:</strong></p> <p><img src="JAVAWEB-NOTE03.assets/9714b18c4003841a3bbf23062539f491.png" alt=""></p> <p><strong>5、创建Servlet程序，测试运行环境。</strong></p> <p><img src="JAVAWEB-NOTE03.assets/0185f08055d050b93aa6ed68f920bff8.png" alt=""></p> <p>上面的错误是因为运行环境中缺少Servlet的jar包，将tomcat运行环境添加过来即可！</p> <p><strong>!!缺少Servlet运行环境解决方案：</strong></p> <p>在项目上点击鼠标右键，选择 &quot;Properties&quot; ---&gt; &quot;Targeted Runtimes&quot;:</p> <p><img src="JAVAWEB-NOTE03.assets/e321e3569a1e0dc2d6a7ddc2d953204f.png" alt=""></p> <p>或者，在项目中的pom.xml文件中的根标签下添加Servlet的jar包的坐标，引入Servlet的jar包，如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>添加后保存pom文件。若还报错，在项目上右键选择 <strong>&quot;Maven&quot;</strong> ---&gt; <strong>&quot;UpdateProject…&quot;</strong> 更新工程即可！</p> <p><strong>6、实现Servlet程序</strong></p> <p><img src="JAVAWEB-NOTE03.assets/1bcc65d4c935093c915409cb865902bf.png" alt=""></p> <p>**7、测试访问：**打开浏览器访问地址：<a href="http://localhost:8080/MavenSimpleProJavaweb/HelloServlet" target="_blank" rel="noopener noreferrer">http://localhost/MavenSimpleProJavaweb/HelloServlet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="JAVAWEB-NOTE03.assets/7c9682115d7e105ccc587d511be921e1.png" alt=""></p> <h3 id="maven的目录结构"><a href="#maven的目录结构" class="header-anchor">#</a> Maven的目录结构</h3> <p>使用Maven创建的工程我们称它为Maven工程，Maven工程具有一定的目录规范，对目录结构有严格的要求，一个Maven工程要具有如下目录结构：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200225092639227.png" alt="image-20200225092639227"></p> <p>下面以Maven的Web项目为例，介绍Maven项目中的目录结构：</p> <div class="language- extra-class"><pre class="language-text"><code>Maven项目名称(Web项目)
  |-- src/main/java(源码目录)：用于存放程序/项目所需要的java源码文件
  |-- src/main/resources(源码目录)：用于存放程序/项目所需要的配置文件
  |-- src/test/java(源码目录)：用于存放测试程序的java源文件
  |-- src/test/resources(源码目录)：用于存放测试程序所需要配置文件
  |-- src/main/webapp：(Web应用的根目录，作用类似于WebContent)
  				 				|-- WEB-INF：(受保护的目录)
  				 							|-- web.xml：(Web应用的核心配置文件)
  |-- target/classes(类目录)：源码目录中的资源经过编译后，会输出到类目录下。
  |-- pom.xml：Maven项目中非常重要的文件，将来项目需要任何jar包或插件，都可以通过pom文件来导入这些jar包或插件。
</code></pre></div><h2 id="导入已有的maven项目"><a href="#导入已有的maven项目" class="header-anchor">#</a> 导入已有的Maven项目</h2> <p>现将后面通过SSM框架实现的&lt;&lt;永和大王门店管理系统&gt;&gt;（Maven）项目导入到我们的Eclipse开发环境中。</p> <p>在导入项目时我们通常会通过 &quot;File&quot; --&gt; &quot;Import...&quot; 来导入项目，但是这样能会产生环境问题=，例如：如果项目本身自带的环境和我们当前使用的开发环境不一致，就会产生问题。可以按照下面的方式来进行导入。</p> <p>下面是导入的步骤：</p> <p><strong>1、创建一个新的Maven工程（JavaWeb工程）</strong></p> <p>确保已经配置好Maven的环境后，在Eclipse中创建一个新的Maven工程（Javaweb工程），新工程的名字和所导入的工程的名字可以相同也可以不同，例如：</p> <p><img src="JAVAWEB-NOTE03.assets/ed42db71791984bdce6bbe04c3147120.png" alt=""></p> <p><strong>2、解压yonghe-ssm.zip压缩包</strong></p> <p>将下发的 yonghe-ssm 项目解压出来，解压后的结构如下：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200326195041536.png" alt="image-20200326195041536"></p> <p>打开 yonghe-ssm 目录：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200326195147418.png" alt="image-20200326195147418"></p> <p><strong>3、将解压后的目录中的src目录选中并复制。</strong></p> <p><img src="JAVAWEB-NOTE03.assets/b9bf1d703dc2546c114b1a7832113233.png" alt=""></p> <p><strong>4、点击新创建的Maven工程右键粘贴，将复制的src目录粘贴到新建的工程中</strong></p> <p><img src="JAVAWEB-NOTE03.assets/fdc57a6cab8a89d634112760063efe18.png" alt=""></p> <p><strong>5、打开解压后的目录中的pom.xml文件, 复制其中的内容：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/32b2d2e712857eb26fae448eecf7ce26.png" alt=""></p> <p>如果复制后项目或pom文件仍然报错, 可以更新Maven工程</p> <p>**更新Maven工程：**在项目上右键选择 <strong>&quot;Maven&quot;</strong> ---&gt; <strong>&quot;Update
Project…&quot;</strong>，在弹出的窗口中直接点击OK即可！</p> <p><strong>6、执行SQL脚本文件，导入数据</strong></p> <p>打开cmd，连接mysql数据库，执行<strong>yonghedb.sql</strong>中的SQL语句，创建数据库、表及插入记录。</p> <p><strong>7、部署项目到服务器并启动服务器，访问测试</strong></p> <p>在正确完成上面的操作后，打开浏览器访问如下地址：<a href="http://localhost/yonghe-ssm/index" target="_blank" rel="noopener noreferrer">http://localhost/yonghe-ssm/index<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
，可以看到如下界面：</p> <p><img src="JAVAWEB-NOTE03.assets/770fe679ff527efa1f80fc4e57a96f79.png" alt=""></p> <h2 id="maven的依赖管理"><a href="#maven的依赖管理" class="header-anchor">#</a> Maven的依赖管理</h2> <h3 id="依赖-jar包-管理"><a href="#依赖-jar包-管理" class="header-anchor">#</a> 依赖(jar包)管理</h3> <p>依赖管理即jar包的管理，那么通过Maven创建的工程是如何管理jar包的？</p> <p><strong>1、在Maven项目中如何引入jar包？</strong></p> <p>在Maven创建的项目中，如果需要引用jar包，只需要在项目的pom.xml文件中添加jar包的坐标(GroupID + ArtifactID + Version)即可将jar包引进项目中，之后就可以在项目中使用所引入的jar包了。</p> <p>例如，现在我们在pom.xml文件中，添加servlet的jar包的坐标如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在pom.xml文件中，添加mysql驱动包的坐标如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.32<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、项目中引入的jar包存放在哪里？</strong></p> <p>那么问题来了，在pom文件中添加的servlet的jar包坐标，添加的仅仅是一个jar包对应的坐标，而这个jar包到底存放在哪里呢?</p> <p>了解Maven管理jar包的规则之后，我们可以找到jar包的存放位置是在<strong>本地仓库</strong>（仓库默认是在：C:\Users\{当前用户}\.m2\repository）的 /javax/servlet/servlet-api/2.5/目录下，例如：</p> <p><img src="JAVAWEB-NOTE03.assets/a9335bd016fc4426edf4e06a0a53ef73.png" alt=""></p> <p><strong>总结：</strong></p> <ul><li>在Maven中，所有的jar包全都存放在本地仓库的目录中，如果项目中需要使用某一个jar包，直接在项目的pom.xml文件中通过坐标(GroupID + ArtifactID + Version)引入指定位置的jar包即可。</li> <li>这样可以将项目中所有使用的jar包集中在一个目录（本地仓库）中统一进行管理，需要时通过坐标直接引入即可，而不是在每个项目中都拷贝一份，减少了项目体积，也节省了磁盘空间。</li> <li>将来如果别人需要导入你的项目，只需要将项目（当然包括pom.xml文件）代码整体传给对方，无需将jar包发送给对方，对方在配置Maven的环境后，Maven会自动根据项目中pom.xml文件里配置的坐标，引入（或下载后再引入）对应的jar包。</li></ul> <p><strong>3、如果引入的jar包在本地仓库中没有呢？</strong></p> <ul><li><p>如果是刚配置的Maven环境，本地仓库中还没有太多jar包，此时在pom文件中通过坐标引入jar包，而本地仓库中没有这个jar包，这时会怎么样呢？</p></li> <li><p>若本地仓库没有所需要的jar包，则会到镜像仓库（也叫私服）或者到中央仓库（也叫公服）中下载。下面我们就来介绍Maven的这三种仓库。</p></li></ul> <h3 id="maven三种仓库"><a href="#maven三种仓库" class="header-anchor">#</a> Maven三种仓库</h3> <p>在上面所提到的本地仓库、镜像仓库、中央仓库是用来Maven用来更好的管理jar包的所采用的一种方式。下面来了解Maven的<strong>三种仓库</strong>，以及三种仓库之间的潜在联系。</p> <p>通过maven构建的项目，会通过项目中的pom.xml文件从远程仓库下载，并保存到本地仓库</p> <p><img src="JAVAWEB-NOTE03.assets/6d744a6b627f8edded770b46bb5e316e.png" alt=""></p> <p><strong>本地仓库</strong>：默认的本地仓库位置在：c:/${user.dir}/.m2/repository，其中${user.dir}表示windows下的用户目录。本地仓库的作用是，用于保存（存储）从私服或者从中央仓库下载下来的jar包（或插件）。当项目中需要使用jar包和插件时，优先从本地仓库查找。</p> <p>如果本地仓库中没有所需的jar包，可以到私服或者到中央仓库中下载后再保存到本地仓库。</p> <p><strong>镜像仓库</strong>：镜像仓库也叫做私服（Nexus），私服一般由公司搭建并维护（也可以自己搭建）。比如达内有搭建自己的私服服务器（http://maven.tedu.cn/nexus/content/groups/public/），以及阿里云私服服务器（http://maven.aliyun.com/nexus/content/groups/public/）。</p> <p>如果项目中使用到的jar包或者插件本地仓库中没有，则可以到私服中下载，如果私服中有就直接将jar包保存到本地仓库中；而如果私服中也没有所需的jar包，就到中央仓库（公服）上下载所需要的jar包，下载之后先在私服上保存一份，最后再保存到本地仓库。</p> <p><strong>中央仓库</strong>：中央仓库也叫做公服，在maven软件中内置了一个仓库地址（http://repo1.maven.org/maven2）它就是中央仓库，服务于整个互联网，由Maven团队自己搭建并维护，里面存储了非常全的jar包，它包含了世界上大部分流行的开源项目的jar包。</p> <p>那么我们在使用Maven构建的Java项目，项目中所使用的jar包会来自哪里呢？例如，通过Maven先后构建项目A和项目B，在项目中都需要依赖第三方jar包：</p> <ul><li><p>如果项目A中需要依赖第三方jar包，只需要在项目下的pom文件中引入jar包在<strong>本地仓库</strong>中的坐标即可使用。如果本地仓库没有所需要的jar包，则会连接私服（需要提前配置）下载所需jar包到本地仓库供项目使用。</p></li> <li><p>如果私服上也没有所需的jar包，则会连接中央仓库下载所需要的jar包保存到私服，再将jar包从私服下载至本地仓库，供项目使用。</p></li> <li><p>如果没有配置私服，则默认连接中央仓库下载所需要的jar包到本地仓库中供项目使用</p></li> <li><p>当项目B也需要依赖第三方jar包时，先到本地仓库中查找所需jar包，如果有则直接引用而无需再次下载，如果仍有部分jar包本地仓库中没有，则同上，即连接私服下载所需jar包到本地仓库。若私服中也没有所需jar包，则连接中央仓库下载jar包到私服，再从私服下载jar包到本地仓库中，供项目使用。</p></li></ul> <h3 id="添加依赖-方式一"><a href="#添加依赖-方式一" class="header-anchor">#</a> 添加依赖:方式一</h3> <p>使用maven插件的索引功能快速添加jar包</p> <p>这种方式需要<strong>本地仓库中已经包含了该jar包，否则搜索不到</strong>!!!</p> <p>1、如果本地仓库中有我们需要的jar包，可以在项目中的pom.xml文件中空白处右键--&gt;  Maven --&gt; Add Dependency在弹出的窗口中添加所需要的依赖(jar包)，如图：</p> <p><img src="JAVAWEB-NOTE03.assets/33fe1d9ff8f2d46631335a13ee2d6b51.png" alt=""></p> <p>**2、**添加依赖示例：添加spring的jar包的坐标到项目中</p> <p>(1) 在项目中的pom.xml文件中右键 -&gt; Maven -&gt; Add Dependency，在弹出的窗口中输入
&quot;spring&quot;:</p> <p><img src="JAVAWEB-NOTE03.assets/5b98e92822f738cda80091a2d4709bb8.png" alt=""></p> <p>选中要添加的jar包（坐标会自动填写），点击OK即可完成添加</p> <p><img src="JAVAWEB-NOTE03.assets/172e2faf10ff88ed41dfd5fff6e05939.png" alt=""></p> <p>(2)如果搜索不到jar包（保证本地仓库中已经下载了该jar包），可以尝试重建索引。</p> <p>在</p> <p><img src="JAVAWEB-NOTE03.assets/facabede667d2edbead383cd5d725a75.png" alt=""></p> <p>&quot;Maven Repositories&quot; 视图窗口中可以看到如下内容：</p> <p><img src="JAVAWEB-NOTE03.assets/fe8dfdbc79b3219c161e97c1f650b2a5.png" alt=""></p> <p>在&quot;Local Repositories&quot;上右键选择 &quot;Rebuild Index&quot; 即可重建索引。</p> <p>完成后，再尝试搜索jar包进行添加。</p> <h3 id="添加依赖-方式二"><a href="#添加依赖-方式二" class="header-anchor">#</a> 添加依赖:方式二</h3> <p><strong>1、直接在pom.xml文件中的<dependencies>标签内部添加。例如：在pom.xml文件中添加如下配置，就可以将junit单元测试的jar包引入到项目中来了。</dependencies></strong></p> <p>添加依赖：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、手动添加依赖需要指定所依赖jar包的坐标，但是在大部分情况下，我们是不知道jar包的坐标的。可以通过访问如下网址，在互联网上搜索查询：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>http://mvnrepository.com
</code></pre></div><p>或者在公司镜像仓库中搜索查询:</p> <div class="language- extra-class"><pre class="language-text"><code>http://maven.tedu.cn/nexus
</code></pre></div><p><strong>3、示例：添加c3p0的jar包的坐标到项目中</strong></p> <ul><li><p>访问上面其中的一个网址，在搜索框中搜索 &quot;c3p0&quot;</p></li> <li><p>在搜索出来的内容中，选择所需要的版本并点击版本，查看该版本的c3p0
jar包所对应的坐标：</p></li> <li><p>将坐标直接拷贝到项目的pom.xml文件中即可：</p></li></ul> <img src="JAVAWEB-NOTE03.assets/image-20200225120117127.png" alt="image-20200225120117127" style="zoom:67%;"> <p><img src="JAVAWEB-NOTE03.assets/image-20200225120916520.png" alt="image-20200225120916520"></p> <p><img src="JAVAWEB-NOTE03.assets/image-20200225120728549.png" alt="image-20200225120728549"></p> <p><strong>4、将上图中右侧选中的坐标拷贝到pom.xml文件中:</strong></p> <img src="JAVAWEB-NOTE03.assets/image-20200225121143892.png" alt="image-20200225121143892" style="zoom:67%;"> <h2 id="faq-maven常见问题"><a href="#faq-maven常见问题" class="header-anchor">#</a> FAQ:Maven常见问题</h2> <h3 id="常见maven环境问题"><a href="#常见maven环境问题" class="header-anchor">#</a> 常见Maven环境问题</h3> <p>问题描述：</p> <ul><li>创建Maven项目时报如下错误：</li></ul> <p><img src="JAVAWEB-NOTE03.assets/image-20200315204732042.png" alt="image-20200315204732042"></p> <p><img src="JAVAWEB-NOTE03.assets/image-20200315204802766.png" alt="image-20200315204802766"></p> <ul><li><p>或者创建Maven项目目录结构不全（比如只有src目录），如下图：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200315205928911.png" alt="image-20200315205928911"></p></li> <li><p>导入已有的Maven项目，项目运行不了（jar没有下载完全）</p></li></ul> <p>此时是因为maven的环境被破坏了，导致Maven基础运行环境不全，无法创建Maven项目，或者无法下载所需要的jar包。解决方法：</p> <div class="language- extra-class"><pre class="language-text"><code>(1)在项目的pom文件中敲一个空白行,再保存文件，目的是让maven检测到pom文件发生变化，再根据pom文件中的配置到本地仓库中寻找对应的jar包，如果没有相应的jar包，maven会重新下载。
(2)如果上面的方式不行,可以尝试在项目上,右键---&gt; Maven ---&gt; Update Project...,强制更新项目,此时maven也会检查pom文件，在本地仓库中有没有相应的jar包。
(3)如果上面的方式仍然没有解决问题，检查当前网络环境是否能连接上所配置的镜像仓库。（比如在家里使用外网，无法连接达内的镜像仓库，或者使用手机热点网络无法连接阿里云的镜像仓库等）
(4)如果网络能够连接上所配置的镜像仓库，到本地仓库的目录下，将本地仓库中所有的目录都删除，删除时，eclipse正在使用本地仓库中的资源文件，所以会阻止删除，此时将eclipse关闭，再将本地仓库中的所有目录删除，重启eclipse。
(5)启动eclipse后,再将上面的第(1)步和第(2)步再做一遍!
</code></pre></div><p>问题描述2：每天第一次打开Eclipse发现之前创建的Maven工程报错（比如项目上有叉号或者叹号，但项目之前是OK的），解决方法：在菜单栏中找到 Project ---&gt; Clean....</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200315210421557.png" alt="image-20200315210421557"></p> <h3 id="找不到jar包问题"><a href="#找不到jar包问题" class="header-anchor">#</a> 找不到jar包问题</h3> <p>在项目中通过坐标引入了jar包（或者插件），并且本地仓库中也存在对应的jar包，但是项目还是报错，提示内容说找不到。</p> <p>解决方法：如果引入的jar包，在本地仓库中存在，但是还是提示找不到，可以将本地仓库中jar包或插件的所在目录整个删除(如果删除时提示文件正在被占用，关闭eclipse再删除即可)，重新保存pom.xml文件，并更新工程，让maven再次下载上面的jar包即可！</p> <p>未下载完全示例：</p> <p><img src="JAVAWEB-NOTE03.assets/71d763b5d1bea2be9037ab549f3a6033.png" alt=""></p> <p>正常下载完全示例：</p> <p><img src="JAVAWEB-NOTE03.assets/c4988ae458e47fe30d6fb6ab1ebf9522.png" alt=""></p> <h3 id="拷贝maven仓库"><a href="#拷贝maven仓库" class="header-anchor">#</a> 拷贝Maven仓库</h3> <p>如果因为网络环境的问题，导致jar包无法下载，也可以将别人下载好的（完整的）Maven的本地仓库拷贝过来，放在自己配置的本地仓库中。因为Maven可以支持拷贝别人的仓库。</p> <h2 id="扩展-maven项目结构"><a href="#扩展-maven项目结构" class="header-anchor">#</a> 扩展:Maven项目结构</h2> <p>使用Maven创建的工程我们称它为Maven工程，Maven工程具有一定的目录规范，对目录结构有严格的要求，一个Maven工程要具有如下目录结构：</p> <p><img src="JAVAWEB-NOTE03.assets/9de5e6454964c4be0b3284fd4845ce85.png" alt=""></p> <p>Maven项目目录介绍：</p> <p>1）/src/main/java -- 主目录下的Java目录，用于存放项目中的.java文件</p> <p>2）/src/main/resources –- 主目下的资源目录，存放项目中的资源文件(如框架的配置文件)</p> <p>3）/src/test/java -- 测试目录下的Java目录，用于存放所有单元测试类的.java文件，如Junit测试类</p> <p>4）/src/test/resources -- 测试目录下的资源目录，用于存放测试类所需资源文件(如框架的配置文件)</p> <p>5）/target -- 项目输出目录，编译后的class文件、及项目打成的war包等会输出到此目录中</p> <p>6）/pom.xml -- maven项目的核心配置文件，文件中通过坐标来管理项目中的所有jar包和插件。</p> <h2 id="maven作业"><a href="#maven作业" class="header-anchor">#</a> maven作业</h2> <p>1、练习将Maven整合到Eclipse中（可以切换一个新的工作空间进行练习）</p> <p>2、练习使用Maven创建简单的Java工程</p> <p>3、练习使用Maven创建简单的JavaWeb工程</p> <p>4、练习导入已有的Maven工程</p> <p>5、Maven的三种仓库每种仓库的作用，以及三种仓库之间的联系</p> <p>6、Maven项目中是如何管理jar包的？</p> <div class="language- extra-class"><pre class="language-text"><code>(1)Maven项目是如何引入jar包
(2)Maven项目中引入的jar包存放在哪里
(3)Maven项目引入的jar包在本地仓库中没有会怎样
</code></pre></div><h1 id="unit10-cookie、session"><a href="#unit10-cookie、session" class="header-anchor">#</a> unit10-Cookie、Session</h1> <h2 id="什么是会话"><a href="#什么是会话" class="header-anchor">#</a> 什么是会话</h2> <p>什么是会话：当浏览器发请求访问服务器开始，一直到访问服务器结束，浏览器关闭为止，这期间浏览器和服务器之间产生的所有请求和响应加在一起，就称之为浏览器和服务器之间的一次会话。</p> <p>在一次会话中往往会产生一些数据，而这些数据往往是需要我们保存起来的，如何保存会话中产生的这些数据呢？</p> <ul><li>比如在购物过程中，将商品加入购物车，其实就是将商品信息保存到数据库中。（不讨论）</li> <li>如果在没有登录时，将商品加入购物车，其实就是将商品信息保存到了cookie或session中。</li></ul> <p>可以使用cookie或者session保存会话中产生的数据。</p> <p>如何将会话中产生的数据保存到cookie或者是session中？</p> <h2 id="cookie原理及应用"><a href="#cookie原理及应用" class="header-anchor">#</a> cookie原理及应用</h2> <h3 id="cookie的工作原理"><a href="#cookie的工作原理" class="header-anchor">#</a> cookie的工作原理</h3> <p><img src="JAVAWEB-NOTE03.assets/35f0bd1bfc616e3bfcc9e96c189444ee.png" alt=""></p> <ol><li>Cookie是将会话中产生的数据保存在客户端，是客户端技术。</li> <li>Cookie是基于两个头进行工作的：分别是Set-Cookie响应头和Cookie请求头</li> <li>通过Set-Cookie响应头将cookie从服务器端发送给浏览器，让浏览器保存到内部；而浏览器一旦保存了cookie，以后浏览器每次访问服务器时，都会通过cookie请求头，将cookie信息再带回服务器中。在需要时，在服务器端可以获取请求中的cookie中的数据，从而实现某些功能。</li></ol> <h3 id="cookie的api及应用"><a href="#cookie的api及应用" class="header-anchor">#</a> cookie的API及应用</h3> <p><strong>1、创建Cookie对象</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Cookie</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建cookie的同时需要指定cookie的名字和cookie要保存的值</span>
</code></pre></div><p><strong>2、将Cookie添加到response响应中</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span> <span class="token class-name">Cookie</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将cookie添加到响应中，由服务器负责将cookie信息发送给浏览器，再由浏览器保存到内部（可以多次调用该方法，添加一个以上的cookie）</span>
</code></pre></div><p><strong>3、获取请求中的所有cookie对象组成的数组</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cs <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取请求中携带的所有cookie组成的cookie对象数组，如果请求中没有携带任何cookie，调用该方法会返回null。</span>
</code></pre></div><p><strong>4、删除浏览器中的Cookie</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// cookie的API中没有提供直接删除cookie的方法，可以通过别的方式间接删除cookie</span>
<span class="token comment">// 删除名称为cart的cookie：可以向浏览器再发送一个同名的cookie（即名称也叫做cart），并设置cookie的最大生存时间为零，由于浏览器是根据cookie的名字来区分cookie，如果前后两次向浏览器发送同名的cookie，后发送的cookie会覆盖之前发送的cookie。而后发送的cookie设置了生存时间为零，因此浏览器收到后也会立即删除！</span>
</code></pre></div><p>代码示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//创建一个名称为cart的cookie</span>
<span class="token class-name">Cookie</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置cookie的最大生存时间为零</span>
c<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将cookie添加到响应中,发送给浏览器</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span> <span class="token string">&quot;成功删除了名称为cart的cookie...&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>5、Cookie的常用方法</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取cookie的名字</span>
cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取cookie中保存的值</span>
cookie<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置/修改cookie中保存的值(没有setName方法,因为cookie的名字无法修改)</span>
cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置cookie的最大生存时间</span>
</code></pre></div><p><strong>6、setMaxAge方法</strong>：设置cookie的最大生存时间</p> <div class="language- extra-class"><pre class="language-text"><code>如果不设置该方法，cookie默认是会话级别的cookie，即生存时间是一次会话。当浏览器关闭，会话结束时，cookie也会被销毁（cookie默认存在浏览器的内存中，当浏览器关闭，内存释放，cookie也会随着内存的释放而销毁。）
如果设置了该方法，cookie将不会保存到浏览器的内存中，而是以文件形式保存到浏览器的临时文件夹中（也就是硬盘上），这样再关闭浏览器，内存释放，保存到硬盘上的cookie文件不会销毁，再次打开浏览器，还可以获取硬盘上的cookie信息。
</code></pre></div><p>代码示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//创建一个Cookie对象，将商品信息保存到cookie中</span>
<span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> prod  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置cookie的最大生存时间, 单位:秒</span>
cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将cookie对象添加到response响应中</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span> cookie <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="案例-使用cookie模拟购物车"><a href="#案例-使用cookie模拟购物车" class="header-anchor">#</a> 案例:使用cookie模拟购物车</h3> <p><strong>1.index.html</strong></p> <div class="language-html extra-class"><pre class="language-html"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>点击下面的商品链接, 可以将商品加入购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 
	http://localhost/day13-cookie/CartServlet
	http://localhost/day13-cookie/index.html
	 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=iphone11<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>iphone11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=vivonex3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>vivonex3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=xiaomishouji<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>xiaomishouji<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=huaweip30<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>huaweip30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=海尔洗衣机<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>海尔洗衣机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>点击下面的支付链接, 可以对购物车中的商品进行结算<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PayServlet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>支付<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
...
</code></pre></div><p><strong>2.CartServlet</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//-------------------------------------------------------</span>
	<span class="token comment">//获取请求中携带的商品信息(将要加入购物车的商品信息)</span>
	<span class="token class-name">String</span> prod <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span> <span class="token string">&quot;prod&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//创建一个Cookie对象，将商品信息保存到cookie中</span>
	<span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> prod  <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//设置cookie的最大生存时间, 单位:秒</span>
	cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//将cookie对象添加到response响应中</span>
	response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span> cookie <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//做出回应</span>
	out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span> <span class="token string">&quot;成功将&quot;</span><span class="token operator">+</span>prod<span class="token operator">+</span><span class="token string">&quot;加入了购物车.....&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>3.PayServlet</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//------------------------------------------------------</span>
	<span class="token comment">//获取请求中的所有cookie信息(null/cookie数组)</span>
	<span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cs <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//遍历所有cookie数组, 找出名称为cart的cookie</span>
	<span class="token class-name">String</span> prod <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span> cs <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> c <span class="token operator">:</span> cs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span> c<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//获取cookie中保存的商品信息</span>
				prod <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//为商品进行结算</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span> prod <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span> <span class="token string">&quot;您还没有将商品加入购物车....&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span> <span class="token string">&quot;成功为&quot;</span><span class="token operator">+</span>prod<span class="token operator">+</span><span class="token string">&quot;支付了1000.00元....&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="session原理及应用"><a href="#session原理及应用" class="header-anchor">#</a> session原理及应用</h2> <h3 id="session的工作原理"><a href="#session的工作原理" class="header-anchor">#</a> session的工作原理</h3> <img src="JAVAWEB-NOTE03.assets/9f99b30f96234a6bba48e37d6852a080.png" style="zoom:67%;"> <ol><li>Session是将会话中产生的数据保存在服务器端，是服务器端技术</li> <li>Session是一个域对象，session中也保存了一个map集合，往session中存数据，其实就是将数据保存到session的map集合中。</li> <li>通过session.setAttribute()方法可以将数据保存到session中，通过session.getAttribute()方法可以将数据从session中取出来。</li></ol> <h3 id="session是一个域对象"><a href="#session是一个域对象" class="header-anchor">#</a> session是一个域对象</h3> <p>获取session对象：</p> <div class="language- extra-class"><pre class="language-text"><code>request.getSession() 
// 获取一个session对象；如果在服务器内部有当前浏览器对应的session，则直接返回该session对象；如果没有对应session，则会创建一个新的session对象再返回；
</code></pre></div><p>Session是一个域对象，因此session中也提供了存取数据的方法。</p> <div class="language-java extra-class"><pre class="language-java"><code>session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> attrName<span class="token punctuation">,</span> <span class="token class-name">Object</span> attrValue<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 往session域中添加一个域属性，属性名只能是字符串类型，属性值可以是任意类型。</span>
session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> attrName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据属性名获取域中的属性值，返回值是一个Object类型</span>
</code></pre></div><p>Session域对象的三大特征：</p> <p><strong>(1)生命周期：</strong></p> <p>**创建session：**第一次调用request.getSession()方法时，会创建一个session对象。（当浏览器在服务器端没有对应的session时，调用request.getSession()方法服务器会创建一个session对象。）</p> <p><strong>销毁session：</strong></p> <ol><li><p>超时销毁：默认情况下，当超过30分钟没有访问session，session就会超时销毁。（30分钟是默认时间，可以修改，但不推荐修改）</p></li> <li><p>自杀：调用session的invalidate方法时，会立即销毁session。</p></li> <li><p>意外身亡：当服务器非正常关闭时（硬件损坏，断电，内存溢出等导致服务器非正常关闭），session会随着服务器的关闭而销毁；</p> <p>当服务器正常关闭，在关闭之前，服务器会将内部的session对象序列化保存到服务器的work目录下，变为一个文件。这个过程叫做session的钝化（序列化）；再次将服务器启动起来，钝化着的session会再次回到服务器，变为服务器中的对象，这个过程叫做session的活化（反序列化）。</p></li></ol> <p>**(2)作用范围：**在一次会话范围内（获取到的都是同一个session对象）</p> <p>**(3)主要功能：**在整个会话范围内实现数据的共享</p> <h3 id="案例-使用session模拟购物车"><a href="#案例-使用session模拟购物车" class="header-anchor">#</a> 案例:使用session模拟购物车</h3> <p><strong>1、index.html</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>点击下面的商品链接, 可以将商品加入购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 
	http://localhost/day13-cookie/CartServlet
	http://localhost/day13-cookie/index.html
	 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=iphone11<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>iphone11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=vivonex3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>vivonex3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=xiaomishouji<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>xiaomishouji<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=huaweip30<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>huaweip30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CartServlet?prod=海尔洗衣机<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>海尔洗衣机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>点击下面的支付链接, 可以对购物车中的商品进行结算<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PayServlet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>支付<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、CartServlet</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//------------------------------------------------------</span>
	<span class="token comment">//获取将要添加到购物车的商品信息</span>
	<span class="token class-name">String</span> prod <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span> <span class="token string">&quot;prod&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//获取一个session对象，将商品信息保存到session中</span>
	<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//设置session的超时时间为30秒</span>
	<span class="token comment">//session.setMaxInactiveInterval( 30 );</span>
	session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> <span class="token string">&quot;cart&quot;</span> <span class="token punctuation">,</span> prod <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//做出响应</span>
	out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span> <span class="token string">&quot;成功将 [ &quot;</span><span class="token operator">+</span>prod<span class="token operator">+</span><span class="token string">&quot; ] 加入了购物车~~~&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>3、PayServlet</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//获取一个session对象(之前的session)</span>
	<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//从session中获取到要结算的商品信息</span>
	<span class="token class-name">String</span> prod <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> <span class="token string">&quot;cart&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//对商品进行结算,做出回应</span>
	out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span> <span class="token string">&quot;成功为 [ &quot;</span><span class="token operator">+</span>prod<span class="token operator">+</span><span class="token string">&quot; ] 支付了2000.00元~~~~&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="总结-两者的区别"><a href="#总结-两者的区别" class="header-anchor">#</a> 总结:两者的区别</h2> <p>Cookie和session都属于会话技术，都可以保存会话中产生的数据，但由于cookie和session的工作原理和特点不同，因此两者的应用场景也不一样。</p> <p><strong>Cookie的特点：</strong></p> <ol><li><p>cookie是将会话中产生的数据保存在<strong>浏览器客户端</strong>, 是客户端技术（JS可以访问cookie）</p></li> <li><p>cookie是将数据保存在客户端浏览器，容易随着用户的操作导致cookie丢失或者被窃取，因此cookie中保存的数据不太稳定，也不太安全。</p></li> <li><p>但cookie将数据保存在客户端，对服务器端没有太多影响，可以将数据保存很长时间。</p></li> <li><p>总结：因此cookie中适合存储需要长时间保存、但对安全性要求不高的数据。</p></li> <li><p>浏览器对cookie的大小和个数都有限制，一般推荐每一个站点给浏览器发送的cookie数量不超过20个，每一个cookie的大小不超过1kb。</p></li> <li><p>Cookie的应用：实现购物车、记住用户名、30天内自动登录等。</p></li></ol> <p><strong>Session的特点</strong></p> <ol><li>session是将会话中产生的数据保存在<strong>服务器端</strong>，是服务器端技术</li> <li>session将数据存在服务器端的session对象中，相对更加的安全，而且更加稳定。不容易随着用户的操作而导致session中的数据丢失或者是被窃取。</li> <li>但session是服务器端的对象，在并发量较高时每一个浏览器客户端在服务器端都要对应一个session对象，占用服务器的内存空间，影响效率。</li> <li>总结：因此session中适合存储对安全性要求较高，但不需要长时间保存的数据。</li> <li>Session的应用：保存登录状态、保存验证码</li></ol> <h2 id="扩展内容"><a href="#扩展内容" class="header-anchor">#</a> 扩展内容</h2> <h3 id="cookie中保存中文数据的问题"><a href="#cookie中保存中文数据的问题" class="header-anchor">#</a> cookie中保存中文数据的问题</h3> <p>以下问题是针对Tomcat8.0及8.0以下的版本，在Tomcat8.5及8.5以后的版本中已经解决了该问题！</p> <p>HTTP协议中规定了请求信息和响应信息中不能包含中文数据！</p> <p>因此通过浏览器向服务器发送中文数据时，浏览器会将中文数据进行URL编码，编码为下面这种格式：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200225174146534.png" alt="image-20200225174146534"></p> <p>http://localhost/day13-cookie/index.html?user=%E5%BC%A0%E9%A3%9E%E9%A3%9E</p> <p>将中文数据转成下面这种格式，叫做URL编码：</p> <p><code>张飞飞 ---&gt; URL编码 ---&gt; %E5%BC%A0%E9%A3%9E%E9%A3%9E</code></p> <p>将下面这种格式再次转回中文数据，叫做URL解码：</p> <p><code>%E5%BC%A0%E9%A3%9E%E9%A3%9E ---&gt; URL解码---&gt; 张飞飞</code></p> <p><strong>问题：当cookie中保存中文数据，将cookie添加到响应中时，会报一个500异常，如下：</strong></p> <p><img src="JAVAWEB-NOTE03.assets/image-20200226095315873.png" alt="image-20200226095315873"></p> <p><strong>解决方法是：</strong></p> <p>将存入cookie中的先进行URL编码，再存入Cookie中，例如：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200225174242538.png" alt="image-20200225174242538"></p> <p>从cookie取出来的数据是进行URL编码后的数据，在使用之前需要进行URL解码，例如：</p> <p><img src="JAVAWEB-NOTE03.assets/image-20200225174252978.png" alt="image-20200225174252978"></p> <h3 id="获取不到之前的session的问题"><a href="#获取不到之前的session的问题" class="header-anchor">#</a> 获取不到之前的session的问题</h3> <p>将商品保存到session中后，关闭浏览器再打开浏览器，访问服务器，此时获取不到之前的session。因为session是基于Cookie工作的。</p> <p>在服务器创建一个session后，会为session分配一个独一无二的编号，称之为session的id，在此次响应时，服务器会将session的id以一个名称为JSESSIONID的cookie发送给浏览器保存到浏览器内部。</p> <p>由于保存sessionid的cookie默认是会话级别的cookie，在浏览器关闭后，cookie会跟着销毁，sessionid也丢失了。因此下次访问服务器，没有session的id就获取不到之前的session。也获取不到session中的商品信息</p> <p>解决方法：我们可以创建一个名称为JSESSIONID的cookie，其中保存session的ID，并设置cookie的最大存活时间，让cookie保存到硬盘上（即使浏览器关闭，cookie也不会销毁），这样下次访问服务器时，还可以将sessionid带给服务器，服务器可以通过sessionid获取到之前的session。 从session中获取到商品信息</p> <img src="JAVAWEB-NOTE03.assets/9e195f495be5cc6e805c1185fcc753ad.png" style="zoom:67%;"> <p><code>04-02作业：</code></p> <p>1、描述Cookie保存数据的原理</p> <p>2、描述session保存数据的原理</p> <p>3、练习课上案例:使用cookie技术实现购物功能</p> <p>4、练习课上案例:使用session技术实现购物功能</p> <h1 id="unit11-mysql数据库事务"><a href="#unit11-mysql数据库事务" class="header-anchor">#</a> unit11-MySQL数据库事务</h1> <p><strong>今日目标:</strong></p> <ul><li><p>了解事务的作用</p></li> <li><p>掌握事务的四大特性(面试)</p></li> <li><p>了解事务的三个并发读问题</p></li> <li><p>掌握mysql开启和结束事务</p></li> <li><p>了解事物的四个隔离级别</p></li></ul> <h2 id="事务及四大特性"><a href="#事务及四大特性" class="header-anchor">#</a> 事务及四大特性</h2> <h3 id="什么是事务"><a href="#什么是事务" class="header-anchor">#</a> 什么是事务</h3> <p>数据库事务(Database Transaction)，是指作为单个逻辑工作单元执行的一系列操作，要么完全地执行，要么完全地不执行。</p> <p>简单的说：事务就是将一堆的SQL语句(通常是增删改操作)绑定在一起执行，要么都执行成功，要么都执行失败，即都执行成功才算成功，否则就会恢复到这堆SQL执行之前的状态。</p> <p>下面以银行转账为例，张三转100块到李四的账户，这至少需要两条SQL语句：</p> <ul><li>给张三的账户减去100元；</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 账户表 <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>给李四的账户加上100元。</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 账户表 <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span>
</code></pre></div><p>如果在第一条SQL语句执行成功后，在执行第二条SQL语句之前，程序被中断了（可能是抛出了某个异常，也可能是其他什么原因），那么李四的账户没有加上100元，而张三却减去了100元，在现实生活中这肯定是不允许的。</p> <p>如果在转账过程中加入事务，则整个转账过程中执行的所有SQL语句会在一个事务中，而事务中的所有操作，要么全都成功，要么全都失败，不可能存在成功一半的情况。</p> <p>也就是说给张三的账户减去100元如果成功了，那么给李四的账户加上100元的操作也必须是成功的；否则，给张三减去100元以及给李四加上100元都是失败的。</p> <h3 id="事务的四大特性"><a href="#事务的四大特性" class="header-anchor">#</a> 事务的四大特性</h3> <p>事务的四大特性(ACID)是：</p> <p>(1)<strong>原子性</strong>（Atomicity）：事务中所有操作是不可再分割的原子单位。事务中所有操作要么全部执行成功，要么全部执行失败。</p> <p>(2)<strong>一致性</strong>（Consistency）：事务执行后，数据库状态与其它业务规则保持一致。如转账业务，无论事务执行成功与否，参与转账的两个账户金额之和在事务前后应该是保持不变的。</p> <div class="language- extra-class"><pre class="language-text"><code>张三：1000	1000-500=500		1000
李四：1000	1000+500=1500 		1000
</code></pre></div><p>(3)<strong>隔离性</strong>（Isolation）：隔离性是指在并发操作中，不同事务之间应该隔离开来，使每个并发中的事务不会相互干扰。也就是说，在事中务查看数据更新时，数据所处的状态要么是另一事务修改它之前的状态，要么是另一事务修改它之后的状态，事务不会查看到中间状态的数据。例如：在A事务中，查看另一B事务(正在修改张三的账户金额)中张三的账户金额，要查看到B事务之前的张三的账户金额，要么查看到B事务之后张三的账户金额。</p> <div class="language- extra-class"><pre class="language-text"><code>事务1: 查询A、B账户金额之和（1000+1000）
事务2: A转账给B 500元
		A - 500 = 500
		B + 500 = 1500
		
</code></pre></div><p>(4)<strong>持久性</strong>（Durability）：一旦事务提交成功，事务中所有的数据操作都必须被持久化到数据库中，即使提交事务后，数据库马上崩溃，在数据库重启时，也必须能保证通过某种机制恢复数据。</p> <div class="language- extra-class"><pre class="language-text"><code>开启事务---A给B转账500元
A: 1000 - 500 = 500	(成功了)	在日志中记录,事务成功,A账户金额更新为500
B: 1000 + 500 = 1500 (成功了)	在日志中记录,事务成功,B账户金额更新为1500
结束事务---回滚/提交
</code></pre></div><h2 id="mysql中的事务"><a href="#mysql中的事务" class="header-anchor">#</a> MySQL中的事务</h2> <p>在默认情况下，MySQL每执行一条SQL语句，都是一个单独的事务。因为底层在执行SQL语句之前会自动开启事务，在SQL语句执行完后，会立即结束事务！</p> <p>如果需要在一个事务中包含多条SQL语句，那么需要手动开启事务和结束事务。</p> <ul><li><p>开启事务：start transaction；</p></li> <li><p>结束事务：commit（提交事务）或 rollback（回滚事务）。</p></li></ul> <p>在执行SQL语句之前，先执行 strat transaction，这就开启了一个事务（事务的起点），然后可以去执行多条SQL语句，最后要结束事务，<strong>commit</strong>表示提交，即事务中的多条SQL语句所做出的影响会持久化到数据库中。或者<strong>rollback</strong>，表示回滚，即回滚到事务的起点，之前做的所有操作都被撤消了！</p> <p>下面演示A账户给B账户转账的例子：</p> <p><strong>准备数据：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 1、创建数据库jt_db数据库(如果不存在才创建)</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> jt_db <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db数据库</span>
<span class="token comment">-- 2、在 jt_db 库中创建 acc 表(银行账户表),要求有id(主键),name(姓名),money(账户金额)</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> acc<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> acc<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    money <span class="token keyword">double</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 3、往 acc 表中, 插入2条记录</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> acc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> acc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 查询acc表中的所有记录</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc<span class="token punctuation">;</span>
</code></pre></div><p>下面分别演示事务开启及执行一系列SQL之后，回滚事务、提交事务及中断操作的效果。</p> <p>-- <strong>rollback（回滚事务）</strong>：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>-- 查询acc账户表中A和B的金额
select * from acc;
-- 开启事务
start transaction;
-- 开始转账，A账户减去100元
update acc set money=money-100 where name='A';
-- 查询acc账户表中A和B的金额
select * from acc;
-- B账户增加100元
update acc set money=money+100 where name='B';
-- 查询acc账户表中A和B的金额
select * from acc;
-- 回滚事务
rollback;
-- 再次查询acc账户表中A和B的金额
select * from acc;
</code></pre></div><p>-- <strong>commit（提交事务）</strong>：将上面的操作再做一次，最后将rollback替换为commit，即提交事务</p> <div class="language-mysql extra-class"><pre class="language-text"><code>commit;
</code></pre></div><p>-- <strong>中断操作</strong>：将上面的操作再做一次，最后将rollback替换为quit，即中断操作</p> <div class="language-mysql extra-class"><pre class="language-text"><code>quit;
</code></pre></div><h2 id="事务并发读问题"><a href="#事务并发读问题" class="header-anchor">#</a> 事务并发读问题</h2> <h3 id="事务并发读问题-2"><a href="#事务并发读问题-2" class="header-anchor">#</a> 事务并发读问题</h3> <p>多个事务对相同的数据同时进行操作，这叫做事务并发。</p> <p>在事务并发时，如果没有采取必要的隔离措施，可能会导致各种并发问题，破坏数据的完整性等。这些问题中，其中有三类是读问题，分别是：脏读、不可重复读、幻读。</p> <p>(1)<strong>脏读</strong>（dirty read）：在一个事务中，读取到另一个事务未提交更新的数据，即读取到了脏数据；</p> <p>例如：A给B转账100元但未提交事务，在B查询后，A做了回滚操作，那么B查询到了A未提交的数据，就称之为脏读。</p> <div class="language- extra-class"><pre class="language-text"><code>提示：需要将数据库的事务隔离级别设置为最低，才能够看到脏读现象
事务1：开启事务; A - 100 = 900; B + 100 = 1100; (没有提交事务)
事务2：开启事务; 查询B账户的金额 1100, 这个过程叫做脏读, 1100就是一个脏数据
</code></pre></div><p>(2)<strong>不可重复读</strong>（unrepeatable read）：对同一记录的两次读取结果不一致，因为在两次查询期间，有另一事务对该记录做了修改（是针对修改操作）</p> <p>例如：在事务1中，前后两次查询A账户的金额，在两次查询之间，另一事物2对A账户的金额做了修改（并且也提交了事务），此种情况可能会导致事务1中，前后两次查询的结果不一致。这就是不可重复读。</p> <div class="language- extra-class"><pre class="language-text"><code>事务1：开启事务---
	第一次读取A账户的金额：1000
	第二次读取A账户的金额：900
事务2：开启事务---
	A账户 - 100 = 900;
	提交事务---
</code></pre></div><p>(3)<strong>幻读（虚读）</strong>（phantom read）：对同一张表的两次查询结果不一致，因为在两次查询期间，有另一事务进行了插入或者是删除操作(是针对插入或删除操作)；</p> <div class="language-sql extra-class"><pre class="language-sql"><code>事务<span class="token number">1</span>：开启事务<span class="token comment">---</span>
	<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">//不存在id为3的记录</span>
	<span class="token keyword">insert</span> <span class="token keyword">into</span> acc <span class="token keyword">value</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">//存在id为3的记录</span>
事务<span class="token number">2</span>：开启事务<span class="token comment">---</span>
	<span class="token keyword">insert</span> <span class="token keyword">into</span> acc <span class="token keyword">value</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	提交事务<span class="token comment">---</span>
</code></pre></div><p>注意:mysql默认的是不允许出现脏读和不可重复读，所以在下面演示之前需要设置mysql允许出现脏读、不可重复读等。</p> <div class="language-mysql extra-class"><pre class="language-text"><code>set tx_isolation='read-uncommitted'; -- 设置mysql的事务隔离级别
</code></pre></div><p><strong>1、脏读示例：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 在窗口1中，开启事务，执行A给B转账100元</span>
<span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span> <span class="token comment">-- 允许脏读、不可重复读、幻读</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db库</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">-- 开启事务</span>
<span class="token keyword">update</span> acc <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> acc <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'B'</span><span class="token punctuation">;</span>
<span class="token comment">-- 在窗口2中，开启事务，查询B的账户金额</span>
<span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span> <span class="token comment">-- 允许脏读、不可重复读、幻读</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db库</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">-- 开启事务</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'B'</span><span class="token punctuation">;</span> <span class="token comment">-- 出现脏数据</span>
<span class="token comment">-- 切换到窗口1，回滚事务，撤销转账操作。</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span> <span class="token comment">-- 回滚事务</span>
<span class="token comment">-- 切换到窗口2，查询B的账户金额</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'B'</span><span class="token punctuation">;</span>
</code></pre></div><p>在窗口2中，B看到自己的账户增加了100元（此时的数据A操作事务并未提交），此种情况称之为&quot;脏读&quot;。</p> <p><strong>2、不可重复读示例：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 在窗口1中，开启事务，查询A账户的金额</span>
<span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span> <span class="token comment">-- 允许脏读、不可重复读、幻读</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db库</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">-- 开启事务</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">;</span>
<span class="token comment">-- 在窗口2中，开启事务，查询A的账户金额减100</span>
<span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span> <span class="token comment">-- 允许脏读、不可重复读、幻读</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db库</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">-- 开启事务</span>
<span class="token keyword">update</span> acc <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">;</span> <span class="token comment">-- A账户减去100</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span> <span class="token comment">-- 提交事务</span>
<span class="token comment">-- 切换到窗口1，再次查询A账户的金额。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">;</span> <span class="token comment">-- 前后查询结果不一致</span>
</code></pre></div><p>在窗口1中，前后两次对同一数据(账户A的金额)查询结果不一致，是因为在两次查询之间，另一事务对A账户的金额做了修改。此种情况就是&quot;不可以重复读&quot;</p> <p><strong>3、幻读示例：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 在窗口1中，开启事务，查询账户表中是否存在id=3的账户</span>
<span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span> <span class="token comment">-- 允许脏读、不可重复读、幻读</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db库</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">-- 开启事务</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> acc <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 在窗口2中，开启事务，往账户表中插入了一条id为3记录，并提交事务。</span>
<span class="token comment">-- 设置mysql允许出现脏读、不可重复度、幻读</span>
<span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> jt_db<span class="token punctuation">;</span> <span class="token comment">-- 选择jt_db库</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">-- 开启事务</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> acc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span> <span class="token comment">-- 提交事务</span>
<span class="token comment">-- 切换到窗口1，由于上面窗口1中查询到没有id为3的记录，所以可以插入id为3的记录。</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> acc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 插入会失败!</span>
</code></pre></div><p>在窗口1中，查询了不存在id为3的记录，所以接下来要执行插入id为3的记录，但是还未执行插入时，另一事务中插入了id为3的记录并提交了事务，所以接下来窗口1中执行插入操作会失败。</p> <p>探究原因，发现账户表中又有了id为3的记录（感觉像是出现了幻觉）。这种情况称之为&quot;幻读&quot;</p> <p>以上就是在事务并发时常见的三种并发读问题，那么如何防止这些问题的产生？</p> <p>可以通过设置事务隔离级别进行预防。</p> <h3 id="事务隔离级别"><a href="#事务隔离级别" class="header-anchor">#</a> 事务隔离级别</h3> <p>事务隔离级别分四个等级，在相同数据环境下，对数据执行相同的操作，设置不同的隔离级别，可能导致不同的结果。不同事务隔离级别能够解决的数据并发问题的能力也是不同的。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">set</span> tx_isolation<span class="token operator">=</span><span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>1、READ UNCOMMITTED（读未提交数据）</strong></p> <p>安全性最差，可能出现任何事务并发问题(比如脏读、不可以重复读、幻读等)</p> <p>但性能最好（不使用!!）</p> <p><strong>2、READ COMMITTED（读已提交数据）</strong>（Oracle默认）</p> <p>安全性较差</p> <p>性能较好</p> <p>可以防止<strong>脏读</strong>，但不能防止不可重复读，也不能防止幻读；</p> <p><strong>3、REPEATABLE READ（可重复读）</strong>（MySQL默认）</p> <p>安全性较高</p> <p>性能较差</p> <p>可以防止<strong>脏读</strong>和<strong>不可重复读</strong>，但不能防止幻读问题；</p> <p><strong>4、SERIALIZABLE（串行化）</strong></p> <p>安全性最高，不会出现任何并发问题，因为它对同一数据的访问是串行的，非并发访问；</p> <p>性能最差；(不使用!!)</p> <p>MySQL的默认隔离级别为REPEATABLE READ，即可以防止脏读和不可重复读</p> <h3 id="设置隔离级别-了解"><a href="#设置隔离级别-了解" class="header-anchor">#</a> 设置隔离级别(了解)</h3> <p>0、MySQL查询当前的事务隔离级别</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>1、MySQL设置事务隔离级别（了解）</strong></p> <p>(1) set tx_isolation='read-uncommitted';</p> <p>安全性最差，容易出现<strong>脏读</strong>、<strong>不可重复读</strong>、<strong>幻读</strong>，但性能最高</p> <p>(2) set tx_isolation='read-committed';</p> <p>安全性一般，可防止<strong>脏读</strong>，不能防止<strong>不可重复读</strong>、<strong>幻读</strong></p> <p>(3) set tx_isolation='repeatable-read';</p> <p>安全性较好，可防止<strong>脏读</strong>、<strong>不可重复读</strong>，但不能防止<strong>幻读</strong></p> <p>(4) set tx_isolation='serialiable';</p> <p>安全性最好，可以防止一切事务并发问题，但是性能最差。</p> <p><strong>2、JDBC设置事务隔离界别</strong></p> <p>JDBC中通过Connection提供的方法设置事务隔离级别：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>Connection<span class="token punctuation">.</span>setTransactionIsolation<span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token keyword">level</span><span class="token punctuation">)</span>
</code></pre></div><p>参数可选值如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>Connection<span class="token punctuation">.</span>TRANSACTION_READ_UNCOMMITTED <span class="token number">1</span>（读未提交数据）
Connection<span class="token punctuation">.</span>TRANSACTION_READ_COMMITTED <span class="token number">2</span>（读已提交数据）
Connection<span class="token punctuation">.</span>TRANSACTION_REPEATABLE_READ <span class="token number">4</span>（可重复读）
Connection<span class="token punctuation">.</span>TRANSACTION_SERIALIZABLE <span class="token number">8</span>（串行化）
Connection<span class="token punctuation">.</span>TRANSACTION_NONE <span class="token number">0</span>（不使用事务）
</code></pre></div><p>提示：在开发中，一般情况下不需要修改事务隔离级别</p> <p><strong>3、JDBC中实现转账例子</strong></p> <p>提示：JDBC中默认是自动提交事务，所以需要关闭自动提交，改为手动提交事务</p> <p>也就是说, 关闭了自动提交后, 事务就自动开启, 但是执行完后需要手动提交或者回滚!!</p> <p>(1)执行下面的程序，程序执行没有异常，转账成功！A账户减去100元，B账户增加100元。</p> <p>(2)将第4步、5步中间的代码放开，再次执行程序，在转账过程中抛异常，转账失败！由于事务回滚，所以A和B账户金额不变。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">public</span> static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws SQLException {
    Connection conn <span class="token operator">=</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
    Statement stat <span class="token operator">=</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
    ResultSet rs <span class="token operator">=</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
    try {
        <span class="token comment">//1.获取连接</span>
        conn <span class="token operator">=</span> JdbcUtil<span class="token punctuation">.</span>getConn<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.关闭JDBC自动提交事务（默认开启事务）</span>
        conn<span class="token punctuation">.</span>setAutoCommit<span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.获取传输器</span>
        stat <span class="token operator">=</span> conn<span class="token punctuation">.</span>createStatement<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* ***** A给B转账100元 ***** */</span>
        <span class="token comment">//4.A账户减去100元</span>
        String <span class="token keyword">sql</span> <span class="token operator">=</span> <span class="token string">&quot;update acc set money=money-100 where name='A'&quot;</span><span class="token punctuation">;</span>
        stat<span class="token punctuation">.</span>executeUpdate<span class="token punctuation">(</span><span class="token keyword">sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//int i = 1/0; // 让程序抛出异常，中断转账操作</span>
        <span class="token comment">//5.B账户加上100元</span>
        <span class="token keyword">sql</span> <span class="token operator">=</span> <span class="token string">&quot;update acc set money=money+100 where name='B'&quot;</span><span class="token punctuation">;</span>
        stat<span class="token punctuation">.</span>executeUpdate<span class="token punctuation">(</span><span class="token keyword">sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//6.手动提交事务</span>
        conn<span class="token punctuation">.</span><span class="token keyword">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token string">&quot;转账成功！提交事务...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    } catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> {
    	e<span class="token punctuation">.</span>printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">//一旦其中一个操作出错都将回滚，使两个操作都不成功</span>
    	conn<span class="token punctuation">.</span><span class="token keyword">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   		System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token string">&quot;执行失败！回滚事务...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    } finally{
    	JdbcUtil<span class="token punctuation">.</span><span class="token keyword">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> stat<span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    }
}
</code></pre></div><p>[TOC]</p> <h1 id="unit12-mybatis框架"><a href="#unit12-mybatis框架" class="header-anchor">#</a> unit12-mybatis框架</h1> <p><img src="JAVAWEB-NOTE04.assets/a0a2eb9fa872009998f7cd818925095d.png" alt=""></p> <p><strong>课程计划：</strong></p> <p>1、MyBatis快速入门</p> <p>2、MyBatis对数据库中数据的增删改查操作</p> <p>3、#{}占位符的应用</p> <p>4、动态SQL的应用</p> <p>5、MyBatis的Mapper接口开发</p> <h2 id="mybatis简介-了解"><a href="#mybatis简介-了解" class="header-anchor">#</a> MyBatis简介(了解)</h2> <h3 id="什么是mybatis"><a href="#什么是mybatis" class="header-anchor">#</a> 什么是MyBatis</h3> <p>MyBatis 本是apache的一个开源项目iBatis, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis 。2013年11月迁移到Github。</p> <p>MyBatis是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需要关注SQL本身，而不需要花费精力去处理例如注册驱动、创建connection、创建statement、手动设置参数、结果集检索等jdbc繁杂的过程代码。</p> <p>Mybatis通过xml或注解的方式将要执行的各种statement（statement、preparedStatemnt）配置起来，并通过java对象和statement中的sql进行映射生成最终执行的sql语句，最后由mybatis框架执行sql并将结果映射成java对象并返回。</p> <p>总之，Mybatis对JDBC访问数据库的过程进行了封装，简化了JDBC代码，解决JDBC将结果集封装为Java对象的麻烦。</p> <p>下图是MyBatis架构图：</p> <p><img src="JAVAWEB-NOTE04.assets/f6d67734982f864da415a2a9cc4908a5.png" alt=""></p> <p>(1)mybatis-config.xml是Mybatis的核心配置文件，通过其中的配置可以生成SqlSessionFactory,也就是SqlSession工厂</p> <p>(2)基于SqlSessionFactory可以生成SqlSession对象</p> <p>(3)SqlSession是一个既可以发送SQL去执行，并返回结果，类似于JDBC中的Connection对象，也是Mybatis中至关重要的一个对象。</p> <p>(4)Executor是SqlSession底层的对象，用于执行SQL语句</p> <p>(5)MapperStatement对象也是SqlSession底层的对象，用于接收输入映射（SQL语句中的参数），以及做输出映射（即将SQL查询的结果映射成相应的结果）</p> <h3 id="为什么要使用mybatis"><a href="#为什么要使用mybatis" class="header-anchor">#</a> 为什么要使用MyBatis</h3> <p><em>思考：在开始之前，思考下如何通过JDBC查询Emp表中的所有记录，并封装到一个List<Emp>集合中返回。（演示：准备数据、导包、导入JDBC程序）</Emp></em></p> <p><code>1、使用传统方式JDBC访问数据库：</code></p> <p>(1)使用JDBC访问数据库有大量重复代码（比如注册驱动、获取连接、获取传输器、释放资源等）；</p> <p>(2)JDBC自身没有连接池，会频繁的创建连接和关闭连接，效率低；</p> <p>(3)SQL是写死在程序中，一旦修改SQL，需要对类重新编译；</p> <p>(4)对查询SQL执行后返回的ResultSet对象，需要手动处理，有时会特别麻烦；</p> <p>...</p> <p><code>2、使用mybatis框架访问数据库：</code></p> <p>(1)Mybatis对JDBC对了封装，可以简化JDBC代码；</p> <p>(2)Mybatis自身支持连接池（也可以配置其他的连接池），因此可以提高程序的效率；</p> <p>(3)Mybatis是将SQL配置在mapper文件中，修改SQL只是修改配置文件，类不需要重新编译。</p> <p>(4)对查询SQL执行后返回的ResultSet对象，Mybatis会帮我们处理，转换成Java对象。</p> <p>...</p> <p>总之，JDBC中所有的问题（代码繁琐、有太多重复代码、需要操作太多对象、释放资源、对结果的处理太麻烦等），在Mybatis框架中几乎都得到了解决！！</p> <h2 id="mybatis快速入门"><a href="#mybatis快速入门" class="header-anchor">#</a> MyBatis快速入门</h2> <h3 id="准备数据，创建库和表"><a href="#准备数据，创建库和表" class="header-anchor">#</a> 准备数据，创建库和表</h3> <p>创建yonghedb库、emp表，并插入若干条记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 1、创建数据库 yonghedb 数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> yonghedb <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span>
<span class="token keyword">use</span> yonghedb<span class="token punctuation">;</span> <span class="token comment">-- 选择yonghedb数据库</span>
<span class="token comment">-- 2、删除emp表（如果存在）</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 3、在 yonghedb 库中创建 emp 表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    salary <span class="token keyword">double</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 4、往 emp 表中, 插入若干条记录</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'王海涛'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">3300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'齐雷'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">2800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'刘沛霞'</span><span class="token punctuation">,</span> <span class="token string">'程序员鼓励师'</span><span class="token punctuation">,</span> <span class="token number">2700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'陈子枢'</span><span class="token punctuation">,</span> <span class="token string">'部门总监'</span><span class="token punctuation">,</span> <span class="token number">4200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'刘昱江'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'董长春'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">3500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'苍老师'</span><span class="token punctuation">,</span> <span class="token string">'程序员'</span><span class="token punctuation">,</span> <span class="token number">3700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'韩少云'</span><span class="token punctuation">,</span> <span class="token string">'CEO'</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="创建工程，导入所需jar包、创建测试类"><a href="#创建工程，导入所需jar包、创建测试类" class="header-anchor">#</a> 创建工程，导入所需jar包、创建测试类</h3> <p><code>1、创建Maven的java工程</code></p> <img src="JAVAWEB-NOTE04.assets/313e2677abaf6d235c0f8603165739fc.png" style="zoom:67%;"> <p><code>2、导入junit、mysql、mybaits等开发包</code></p> <p>在pom.xml文件中引入相关依赖包即可</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- junit单元测试 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mysql驱动 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.32<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mybatis --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 整合log4j --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.6.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3、创建com.tedu.mybatis.TestMybatis01测试类，并提供findAll方法（查询emp表中所有的员工信息），开发步骤如下：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200403151610907.png" alt="image-20200403151610907"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习1(快速入门): 查询emp表中的所有员工, 返回一个List&lt;Emp&gt;集合
* @throws IOException */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.读取mybatis的核心配置文件(mybatis-config.xml)</span>
    <span class="token comment">//2.通过配置信息获取一个SqlSessionFactory工厂对象</span>
    <span class="token comment">//3.通过工厂获取一个SqlSession对象</span>
    <span class="token comment">//4.通过namespace+id找到要执行的sql语句并执行sql语句</span>
    <span class="token comment">//5.输出结果</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="添加mybatis-config-xml文件"><a href="#添加mybatis-config-xml文件" class="header-anchor">#</a> 添加mybatis-config.xml文件</h3> <p><strong>1、在src/main/resources目录下，创建mybatis-config.xml文件</strong>（MyBatis的核心配置文件）</p> <p><img src="JAVAWEB-NOTE04.assets/3e84b2af713f0ddea7c6164f57806c60.png" alt=""></p> <p><strong>2、mybatis-config.xml文件配置如下:</strong></p> <p><code>mybatis-config文件头信息如下：</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE configuration
    PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span>
    
<span class="token comment">&lt;!-- MyBatis的全局配置文件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token punctuation">&gt;</span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>mybatis-config文件详细配置如下：</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE configuration
    PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span>
    
<span class="token comment">&lt;!-- MyBatis的全局配置文件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 1.配置环境，可配置多个环境（比如：develop开发、test测试） --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>develop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>develop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 1.1.配置事务管理方式：JDBC/MANAGED
			JDBC：将事务交给JDBC管理（推荐）
			MANAGED：自己管理事务
			  --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 1.2.配置数据源，即连接池 JNDI/POOLED/UNPOOLED
				JNDI：已过时
				POOLED：使用连接池（推荐）
				UNPOOLED：不使用连接池
			 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/yonghedb?characterEncoding=utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 2.导入Mapper配置文件，如果mapper文件有多个，可以通过多个mapper标签导入 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>EmpMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="添加empmapper-xml文件"><a href="#添加empmapper-xml文件" class="header-anchor">#</a> 添加EmpMapper.xml文件</h3> <p><strong>1、在src/main/resources目录下，创建EmpMapper.xml文件 （实体类的映射文件）</strong></p> <p><img src="JAVAWEB-NOTE04.assets/bf0e887dec06ea62dbad0673fe4b2730.png" alt=""></p> <p><strong>2、EmpMapper.xml文件配置如下:</strong></p> <p><code>EmpMapper文件头信息如下：</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE mapper
	PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="token comment">&lt;!-- 
	不同Mapper文件的namespace值应该保证唯一
	在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>EmpMapper文件详细配置如下：</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE mapper
	PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="token comment">&lt;!-- 
	不同Mapper文件的namespace值应该保证唯一
	在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>EmpMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 通过select、insert、update、delete标签声明要执行的SQL --&gt;</span>
	<span class="token comment">&lt;!-- 练习1: 查询emp表中的所有员工信息
		resultType指定查询的结果将会封装到什么类型中
		即使最终返回的结果是集合(List&lt;Emp&gt;),resultType也只需要指定集合中的泛型即可!
 	--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		select * from emp
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="添加并编写emp实体类"><a href="#添加并编写emp实体类" class="header-anchor">#</a> 添加并编写Emp实体类</h3> <p>注意：在当前实例中，Emp类中的属性和数据库表的字段名称必须一致，否则将会无法将结果集封装到Java对象中。</p> <p>在src/main/java目录下创建 com.tedu.pojo.Emp类，并编辑Emp类：提供私有属性以及对应的getter方法、setter方法，并重写toString方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 实体类,用于封装Emp表中的一条用户信息
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>
	<span class="token comment">//1.声明实体类中的属性</span>
	<span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> job<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
	
	<span class="token comment">//2.提供对应的getter和setter方法</span>
	<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> job<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJob</span><span class="token punctuation">(</span><span class="token class-name">String</span> job<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> salary<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token class-name">Double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//3.重写toString方法</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;Emp [id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;, name=&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;, job=&quot;</span> <span class="token operator">+</span> job <span class="token operator">+</span> <span class="token string">&quot;, salary=&quot;</span> <span class="token operator">+</span> salary <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="实现测试类-并测试"><a href="#实现测试类-并测试" class="header-anchor">#</a> 实现测试类,并测试</h3> <p><strong>1、实现findAll方法，代码如下：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习1(快速入门):  查询emp表中的所有员工, 返回一个List&lt;Emp&gt;集合
 * @throws IOException */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token comment">//1.读取mybatis的核心配置文件(mybatis-config.xml)</span>
	<span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token class-name">Resources</span>
			<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//2.通过配置信息获取一个SqlSessionFactory工厂对象</span>
	<span class="token class-name">SqlSessionFactory</span> fac <span class="token operator">=</span> 
			<span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span> in <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//3.通过工厂获取一个SqlSession对象</span>
	<span class="token class-name">SqlSession</span> session <span class="token operator">=</span> fac<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//4.通过namespace+id找到要执行的sql语句并执行sql语句</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> session
			<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.findAll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//5.输出结果</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> e <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>2、执行findAll方法，输出结果为：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Emp [id=1, name=王海涛, job=程序员, salary=3300.0]
Emp [id=2, name=齐雷, job=程序员, salary=2800.0]
Emp [id=3, name=刘沛霞, job=程序员鼓励师, salary=2700.0]
Emp [id=4, name=陈子枢, job=部门总监, salary=4200.0]
Emp [id=5, name=刘昱江, job=程序员, salary=3000.0]
Emp [id=6, name=董长春, job=程序员, salary=3500.0]
Emp [id=7, name=苍老师, job=程序员, salary=3700.0]
Emp [id=8, name=韩少云, job=CEO, salary=5000.0]
</code></pre></div><h2 id="mybatis入门细节"><a href="#mybatis入门细节" class="header-anchor">#</a> MyBatis入门细节</h2> <h3 id="mybatis-config-xml配置文件"><a href="#mybatis-config-xml配置文件" class="header-anchor">#</a> mybatis-config.xml配置文件</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE configuration
    PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span>
    
<span class="token comment">&lt;!-- MyBatis的全局配置文件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 1.配置环境，可配置多个环境（比如：develop开发、test测试） --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>develop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>develop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 1.1.配置事务管理方式：JDBC/MANAGED
			JDBC：将事务交给JDBC管理（推荐）
			MANAGED：自己管理事务
			  --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 1.2.配置数据源，即连接池 JNDI/POOLED/UNPOOLED
				JNDI：已过时
				POOLED：使用连接池（推荐）
				UNPOOLED：不使用连接池
			 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/yonghedb?characterEncoding=utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 2.导入Mapper配置文件，如果mapper文件有多个，可以通过多个mapper标签导入 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>EmpMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>environments</code>标签：该标签内部可以配置多个environment，即多种环境，每种环境可以做不同配置或连接不同数据库。例如，开发、测试、生产环境可能需要不同的配置，连接的数据库可能也不相同，因此我们可以配置三个environment，分别对应上面三种不同的环境。</p> <p>但是要记住，environment可以配置多个，但是最终要使用的只能是其中一个！</p> <p><code>environment</code>标签：内部可以配置多种配置信息，下面介绍事务管理配置和数据源配置。</p> <p><code>transactionManage</code>标签：事务管理配置，mybatis中有两种事务管理方式，也就是</p> <p>type=&quot;[JDBC|MANAGED]。</p> <div class="language- extra-class"><pre class="language-text"><code>JDBC：这个配置就是直接使用了 JDBC的提交和回滚设置，它依赖于从数据源得到的连接来管理事务范围。推荐使用。
MANAGED：这个配置几乎没做什么。它从来不提交或回滚一个连接。需要自己手动添加并管理。不推荐使用。
</code></pre></div><p><code>dataSource</code>标签：数据源，也就是连接池配置。这里type指定数据源类型，有三种内建的类型：JNDI、POOLED、UNPOOLED</p> <div class="language- extra-class"><pre class="language-text"><code>JNDI：已过时，不推荐使用！
POOLED：使用连接池，mybatis会创建连接池，并从连接池中获取连接访问数据库，在操作完成后，将会把连接返回连池。
UNPOOLED：不使用连接池，该方式适用于只有小规模数量并发用户的简单应用程序上。
</code></pre></div><p><code>mappers</code>标签：用于导入mapper文件的位置，其中可以配置多个mapper，即可以导入多个mapper文件。</p> <h3 id="empmapper-xml配置文件"><a href="#empmapper-xml配置文件" class="header-anchor">#</a> EmpMapper.xml配置文件</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE mapper
	PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="token comment">&lt;!-- 
	不同Mapper文件的namespace值应该保证唯一
	在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>EmpMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 通过select、insert、update、delete标签声明要执行的SQL --&gt;</span>
	<span class="token comment">&lt;!-- 练习1: 查询emp表中的所有员工信息
		resultType指定查询的结果将会封装到什么类型中
		即使最终返回的结果是集合(List&lt;Emp&gt;),resultType也只需要指定集合中的泛型即可!
 	--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		select * from emp
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>(1)第1行是xml的文档声明，用于声明xml的版本和编码</p> <p>(2)第2、3、4行，引入了xml约束文档，当前xml文档将会按照mybatis-3-mapper.dtd文件所要求的规则进行书写。</p> <p>(3)Mapper标签：根标签，其中namespace(名称空间，也叫命名空间)，要求不能重复。在程序中通过【namespace + id 】定位到要执行哪一条SQL语句</p> <p>(4)select标签：用于指定将来要执行的各种SQL语句。标签上可以声明属性，下面介绍常用的属性：id、resultType、resultMap</p> <ul><li><p>id属性：要求值不能重复。将来在执行SQL时，可以通过【namespace + id】找到指定SQL并执行。</p></li> <li><p>resultType属性：从这条SQL语句中返回所期望类型的类的完全限定名称（包名+类名）。注意如果是集合情形，那应该是集合可以包含的类型，而不能是集合本身。</p> <p>简而言之，resultType控制查询SQL执行后返回值的类型或集合中的泛型，例如查询emp表中的单条记录，返回值是一个Emp对象，因此，resultType=&quot;com.tedu.pojo.Emp&quot;；</p> <p>如果查询emp表中的多条记录，返回值是一个List<Emp>，此时resultType的值应该集合中的泛型，因此resultType=&quot;com.tedu.pojo.Emp&quot;；</Emp></p></li> <li><p>resultMap属性：复杂对象结构（例如多表关联查询等）。 使用 resultType 或 resultMap，但不能同时使用。</p></li></ul> <h2 id="mybatis增删改查"><a href="#mybatis增删改查" class="header-anchor">#</a> MyBatis增删改查</h2> <h3 id="新增员工"><a href="#新增员工" class="header-anchor">#</a> 新增员工</h3> <p><strong>1、编辑EmpMapper.xml文件, 添加新增员工对应的sql.</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习2: 新增员工信息: 赵云 保安 6000
增删改的标签上不用指定resultType, 因为返回值都是int类型
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>insert<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
	insert into emp value(null, '赵云', '保安', 6000)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、编写TestMybatis类，添加testInsert方法，实现新增员工操作。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习2: 新增员工信息: 赵云 保安 6000 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//执行sql语句, 返回执行结果</span>
  <span class="token keyword">int</span> rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.insert&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//提交事务</span>
  session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响的行数: &quot;</span><span class="token operator">+</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="修改员工"><a href="#修改员工" class="header-anchor">#</a> 修改员工</h3> <p><strong>1、编辑EmpMapper.xml文件, 添加新增员工对应的sql。</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习3：修改员工信息：赵云 保镖 20000 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	update emp set job='保镖', salary=20000 where name='赵云'
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、编写TestMybatis类，添加testUpdate方法，实现修改员工信息。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习3: 修改员工信息, 将赵云的job改为'保镖'，salary改为20000 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//执行sql语句, 返回执行结果</span>
  <span class="token keyword">int</span> rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.update&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//提交事务</span>
  session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响行数:&quot;</span><span class="token operator">+</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="删除员工"><a href="#删除员工" class="header-anchor">#</a> 删除员工</h3> <p><strong>1、编辑EmpMapper.xml文件, 添加新增员工对应的sql。</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习4: 删除name为'赵云'的记录 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	delete from emp where name='赵云'
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、编写TestMybatis类，添加</strong>testDelete<strong>方法，实现删除员工。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习4: 删除name为'赵云'的记录 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//执行sql语句, 返回执行结果</span>
  <span class="token keyword">int</span> rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.delete&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//提交事务</span>
  session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响行数:&quot;</span><span class="token operator">+</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="mybatis中的占位符"><a href="#mybatis中的占位符" class="header-anchor">#</a> mybatis中的占位符</h2> <h3 id="占位符"><a href="#占位符" class="header-anchor">#</a> #{}占位符</h3> <p>在上面的增删改查操作中，SQL语句中的值是写死在SQL语句中的，而在实际开发中，此处的值往往是用户提交过来的值，因此这里我们需要将SQL中写死的值替换为占位符。</p> <p>在mybatis中占位符有两个，分别是 <code>#{}</code> 占位符 和 <code>${}</code> 占位符：</p> <ul><li><p><code>#{}：</code>相当于JDBC中的问号（?）占位符,是为SQL语句中的参数值进行占位,大部分情况下都是使用#{}占位符; 并且当#{}占位符是为字符串或者日期类型的值进行占位时,在参数值传过来替换占位符的同时,会进行转义处理(在字符串或日期类型的值的两边加上单引号)</p></li> <li><p><code>${}</code>：是为SQL片段进行占位，将传过来的SQL片段直接拼接在${}占位符所在的位置,不会进行任何的转义处理。（由于是直接将参数拼接在SQL语句中，因此可能会引发SQL注入攻击问题）</p></li></ul> <p><strong>练习5：查询emp表中指定id的员工信息</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习5: 查询emp表中指定id的员工信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from emp where id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习5: 查询emp表中指定id的员工信息 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//执行sql语句, 返回执行结果</span>
  <span class="token class-name">Emp</span> emp <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span> <span class="token string">&quot;EmpMapper.findById&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> emp <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>练习6：新增员工信息: 张飞 Java开发工程师 15000</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习6: 新增员工信息: 张飞 Java开发工程师 15000
  如果通过map集合传输参数, 需要保证占位符中的变量名
  和map集合中的key保持一致
  如果通过pojo对象传输参数, 需要保证占位符中的变量名
  和对象中的属性名保持一致, 或者在pojo中有对应的
  getXxx方法
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>insert2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	insert into emp values (null, #{name}, #{job}, #{salary})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习6: 新增员工信息: 张飞 Java开发工程师 15000 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//将要传输的参数封装到map集合中</span>
  <span class="token comment">//Map map = new HashMap();</span>
  <span class="token comment">//map.put(&quot;name&quot;, &quot;张飞&quot;);</span>
  <span class="token comment">//map.put(&quot;job&quot;, &quot;Java开发工程师&quot;);</span>
  <span class="token comment">//map.put(&quot;salary&quot;, 15000);</span>
  <span class="token comment">//也可以将要传输的参数封装到Emp对象中</span>
  <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;关羽123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">&quot;保安&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token number">8000.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//执行sql语句</span>
  intsession rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.insert2&quot;</span><span class="token punctuation">,</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//提交事务</span>
  session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;影响的行数: &quot;</span><span class="token operator">+</span>rows <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>练习7：修改员工信息: 张飞 架构师 25000</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习7: 修改员工信息: 张飞 架构师 25000 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>update2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  update emp set job=#{job}, salary=#{salary}
  where name=#{name}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习7: 修改员工信息: 张飞 架构师 25000 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//将参数封装到Emp对象中</span>
  <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;张飞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">&quot;架构师&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token number">25000.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//执行sql语句</span>
  intsession rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.update2&quot;</span><span class="token punctuation">,</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//提交事务</span>
  session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响的行数: &quot;</span><span class="token operator">+</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>练习8：删除emp表中指定id的员工信息</strong></p> <p>mapper文件配置:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习8：删除emp表中指定id的员工信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>delete2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>String<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	delete from emp where id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>java代码示例:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*  练习8：删除emp表中指定id的员工信息 */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">//执行SQL语句</span>
  <span class="token keyword">int</span> rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.delete2&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//提交事务</span>
  session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响行数:&quot;</span><span class="token operator">+</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的增删改查练习中，当SQL语句中包含的参数值是传递过来的，在SQL语句中我们会通过<code>#{}</code>占位符进行占位，在SQL语句真正执行时，再将传递过来的值替换SQL语句中的占位符。</p> <p>其实，<code>#{}</code>就是JDBC中的问号（<strong>?</strong>）占位符，因此为了安全考虑，在执行时会对传递过来的字符串和日期类型高的值进行转译处理。</p> <p>例如：查询指定name的员工信息，SQL语句为：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token comment">#{name}</span>
</code></pre></div><p>其实就等价于JDBC中： <code>select * from emp where name=?</code>，</p> <p>如果传过来的参数值为：王海涛，那么最终执行的SQL语句为：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 在参数替换占位符的同时进行了转义处理(在值的两边加上了单引号)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'王海涛'</span> 
</code></pre></div><h3 id="占位符-2"><a href="#占位符-2" class="header-anchor">#</a> ${}占位符</h3> <p>那么如果我们在传递的时候不是一个参数值，而是一个SQL片段呢？</p> <p>例如：在查询时，我们想动态的传递查询的列：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token comment">#{columns} from emp</span>
</code></pre></div><p>此时传递过来的应该是一个SQL片段，不同于上面的参数值，如果此时还用<code>#{}</code>，也会像上面一样被转译处理：<code>select 'id,name,job' from emp</code>，这不是我们希望看到的！</p> <p>如果不想让传过来的SQL片段被转译处理，而是直接拼接在SQL语句中，那么这里可以使用<code>${}</code>，例如：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> ${<span class="token keyword">columns</span>} <span class="token keyword">from</span> emp
</code></pre></div><p>拼接之后：<code>select id,name,job from emp</code></p> <p><strong>练习9：动态指定要查询的列</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习9: 动态指定要查询的列 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAll2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select ${cols} from emp
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>java代码示例:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 练习9: 动态指定要查询的列 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//map.put(&quot;cols&quot;, &quot;id, name&quot;);</span>
  <span class="token comment">//map.put(&quot;cols&quot;, &quot;id, name, salary&quot;);</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;cols&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;id,name,job,salary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//执行sql语句, 返回结果</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.findAll2&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//输出结果</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token class-name">Emp</span> e <span class="token operator">:</span> list <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>示例2: 根据name模糊查询emp表</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习10: 根据name模糊查询emp表 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAll3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select * from emp
  where name like '%${name}%'
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习11: 根据name模糊查询emp表 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAll4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select * from emp
  where name like #{name}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 练习10: 根据name模糊查询emp表
 * '%王%' '%刘%'
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//将参数封装到map集合中</span>
  <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;涛&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//执行sql, 返回结果</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.findAll3&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//输出结果</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> emp <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 练习11: 根据name模糊查询emp表
 * '%王%' '%刘%'
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//将参数封装到map集合中</span>
  <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%刘%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//执行sql, 返回结果</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.findAll4&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//输出结果</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> emp <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>需要注意的是，在传递 <code>${}</code> 对应的值时，即使只有一个参数，也需要将值存入<strong>map</strong>集合中！！</p> <p>总结：在大多数情况下还是使用#{}占位符，而${}多用于为SQL片段进行占位！</p> <h2 id="动态sql标签"><a href="#动态sql标签" class="header-anchor">#</a> 动态SQL标签</h2> <h3 id="if、where标签"><a href="#if、where标签" class="header-anchor">#</a> if、where标签</h3> <ul><li><p><code>&lt;if&gt;</code>标签：是根据<code>test属性</code>中的布尔表达式的值，从而决定是否执行包含在其中的SQL片段。如果判断结果为true，则执行其中的SQL片段；如果结果为false，则不执行其中的SQL片段</p></li> <li><p><code>&lt;where&gt;</code>标签：用于对包含在其中的SQL片段进行检索，在需要时可以生成where关键字，并且在需要时会剔除多余的连接词（比如and或者or）</p></li></ul> <p><img src="JAVAWEB-NOTE04.assets/f06a2a2de234a540b189b15d65943989.png" alt=""></p> <p><strong>练习12：根据薪资查询员工信息（if标签）</strong></p> <ul><li><code>&lt;if&gt;</code>标签：是根据<code>test属性</code>中的布尔表达式的值，从而决定是否执行包含在其中的SQL片段。如果判断结果为true，则执行其中的SQL片段；如果结果为false，则不执行其中的SQL片段</li></ul> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习12: 根据薪资查询员工信息
* 如果没有参数, 则不执行where子句, 默认查询所有员工：
* 	select * from emp
* 如果参数中只有minSal(即minSal不为null), 则：
* 	... where salary &gt; minSal
* 如果参数中只有maxSal(即maxSal不为null), 则：
* 	... where salary &lt; maxSal
* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：
*		... where salary &gt; minSal and salary &lt; maxSal  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAllBySal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select * from emp
  where 1=1
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	and salary&gt;#{minSal}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>maxSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	and salary <span class="token cdata">&lt;![CDATA[ &lt; ]]&gt;</span> #{maxSal}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 练习12: 根据薪资查询员工信息
* 如果没有参数, 则不执行where子句, 默认查询所有员工：
* 	select * from emp
* 如果参数中只有minSal(即minSal不为null), 则：
* 	... where salary &gt; minSal
* 如果参数中只有maxSal(即maxSal不为null), 则：
* 	... where salary &lt; maxSal
* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：
*	... where salary &gt; minSal and salary &lt; maxSal  */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindBySal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//map.put( &quot;minSal&quot; , 3000 );</span>
	<span class="token comment">//map.put( &quot;maxSal&quot;, 4000 );</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span> <span class="token string">&quot;EmpMapper.findBySal&quot;</span><span class="token punctuation">,</span> map <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> emp <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>练习13：根据薪资查询员工信息(where标签)</strong></p> <ul><li><code>&lt;where&gt;</code>标签：用于对包含在其中的SQL片段进行检索，在需要时可以生成where关键字，并且在需要时会剔除多余的连接词（比如and或者or）</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习13: 根据薪资查询员工信息
* 如果没有参数, 则不执行where子句, 默认查询所有员工：
* 	select * from emp
* 如果参数中只有minSal(即minSal不为null), 则：
* 	... where salary &gt; minSal
* 如果参数中只有maxSal(即maxSal不为null), 则：
* 	... where salary &lt; maxSal
* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：
*		... where salary &gt; minSal and salary &lt; maxSal  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAllBySal2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select * from emp
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	and salary&gt;#{minSal}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>maxSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	and salary <span class="token cdata">&lt;![CDATA[ &lt; ]]&gt;</span> #{maxSal}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 练习13: 根据薪资查询员工信息
* 如果没有参数, 则不执行where子句, 默认查询所有员工：
* 	select * from emp
* 如果参数中只有minSal(即minSal不为null), 则：
* 	... where salary &gt; minSal
* 如果参数中只有maxSal(即maxSal不为null), 则：
* 	... where salary &lt; maxSal
* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：
*	... where salary &gt; minSal and salary &lt; maxSal  */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAllBySal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//封装参数到map集合中</span>
  <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;minSal&quot;</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;maxSal&quot;</span><span class="token punctuation">,</span> <span class="token number">4000.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;EmpMapper.findAllBySal2&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> emp <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="foreach元素"><a href="#foreach元素" class="header-anchor">#</a> foreach元素</h3> <p>foreach标签：可以对传过来的参数数组或集合进行遍历，以下是foreach标签上的各个属性介绍：</p> <table><thead><tr><th>属性</th> <th>属性描述</th></tr></thead> <tbody><tr><td>collection</td> <td>必需，值为遍历的集合类型，例如：如果参数只是一个数组或List集合，则collection的值为array或list；如果传的是多个参数，用map封装，collection则指定为map中的key。</td></tr> <tr><td>item</td> <td>必需，若collection为数组或List集合时，item表示其中的元素，若collection为map中的key，item表示map中value（集合或数组）中的元素</td></tr> <tr><td>open</td> <td>可选，表示遍历生成的SQL片段以什么开始，最常用的是左括号'('</td></tr> <tr><td>close</td> <td>可选，表示遍历生成的SQL片段以什么结束，最常用的是右括号')'</td></tr> <tr><td>separator</td> <td>可选，每次遍历后给生成的SQL片段后面指定间隔符</td></tr></tbody></table> <p><strong>练习14: 根据员工的id批量删除员工信息</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习14: 根据员工的id批量删除员工信息
	delete from emp where id in (1,3,5,7)
	collection: 如果传的参数仅仅是一个数组或者List集合, collection可以指定为
		array或list; 如果传的是多个参数，用map封装，collection则指定为map中的key
	open: 指定生成的SQL片段以什么符号开始
	close: 指定生成的SQL片段以什么符号结束
	item: 指定变量接收数组或集合中的元素
	separator: 指定一个间隔符, 在将数组或集合中的每个元素拼接到SQL片段之后, 
		在后面拼接一个间隔符
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>deleteByIds<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	delete from emp where id in
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		#{id}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 练习14: 根据员工的id批量删除员工信息 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//获取所要删除的员工的id数组</span>
	<span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span> <span class="token string">&quot;EmpMapper.deleteByIds&quot;</span><span class="token punctuation">,</span> ids <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;影响行数: &quot;</span><span class="token operator">+</span>rows <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>练习15：根据员工的id批量更新员工信息</strong></p> <p>在mapper文件中编写SQL语句：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习15: 根据员工的id批量更新员工信息
 	将id为 2、4、6、8的员工的薪资在原有基础上增加1000
 	update emp set salary=salary + 1000
	where id in(2,4,6,8);
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>updateByIds<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	update emp set salary=salary + #{sal}
	where id in
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		#{id}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java代码实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 练习15: 根据员工的id批量更新员工信息
 * 将id为 2、4、6、8的员工的薪资在原有基础上增加1000
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//获取所要更新的员工的id数组</span>
	<span class="token class-name">Double</span> sal <span class="token operator">=</span> <span class="token number">1000.0</span><span class="token punctuation">;</span> <span class="token comment">//要涨的薪资</span>
	<span class="token comment">//传递的参数超过1个, 将参数封装到map集合中再传递</span>
	<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> <span class="token string">&quot;arrIds&quot;</span> <span class="token punctuation">,</span> ids <span class="token punctuation">)</span><span class="token punctuation">;</span>
	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> <span class="token string">&quot;sal&quot;</span><span class="token punctuation">,</span> sal <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> rows <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span> <span class="token string">&quot;EmpMapper.updateByIds&quot;</span><span class="token punctuation">,</span> map <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;影响行数: &quot;</span><span class="token operator">+</span>rows <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面练习自己完成：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 练习16：根据员工的id批量查询指定id的员工信息
 * 查询id为 2、4、6、8的员工的信息
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="mapper接口开发"><a href="#mapper接口开发" class="header-anchor">#</a> Mapper接口开发</h2> <h3 id="mapper接口开发介绍"><a href="#mapper接口开发介绍" class="header-anchor">#</a> Mapper接口开发介绍</h3> <p>在上面的Mybatis案例中, 通过SqlSession对象调用方法进行增删改查操作时，方法中需要传入的第一个参数是一个字符串值，该值对应的内容为: (Mapper文件中的)namespace + id, 通过这种方式，找到Mapper文件中映射的SQL语句并执行!!</p> <p>这种方式由于传入的是字符串值, 很容易发生字符串拼写错误且编译时期不会提示。</p> <p>这里我们将会讲解比上面更加简单的方式，也是我们企业开发中最常用的方式，即使用mapper接口开发。使用mapper接口开发需要注意以下几点：</p> <div class="language- extra-class"><pre class="language-text"><code>1、创建一个接口，接口的全路径名和mapper文件的namespace值要相同
2、mapper文件中每条要执行的SQL语句，在接口中要添加一个对应的方法，并且接口中的方法名和SQL标签上的id值相同
3、Mapper接口中方法接收的参数类型，和mapper.xml中定义的sql的接收的参数类型要相同
4、接口中方法的返回值类型和SQL标签上的resultType即返回值类型相同(如果方法返回值是集合,resultType只需要指定集合中的泛型)
</code></pre></div><h3 id="mapper接口开发实现"><a href="#mapper接口开发实现" class="header-anchor">#</a> Mapper接口开发实现</h3> <p>下面将使用mapper接口开发的方式，实现根据id查询指定的员工信息</p> <p><strong>1、创建com.tedu.dao.EmpMapper接口</strong></p> <p>由于接口的全路径名(com.tedu.dao.EmpMapper)要和EmpMapper.xml的namespace值保持一致，因此, 这里将namespace的值改为com.tedu.dao.EmpMapper：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype">&lt;!DOCTYPE mapper
  PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
  &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.dao.EmpMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2、在接口中提供findById方法</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 根据id查询员工信息
* @param id
* @return Emp
*/</span>
<span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意:方法的名字要和映射的sql标签的id值保持一致</p> <p>方法的返回值类型和resultType的类型要一致</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 1.查询：查询Emp表中指定id的员工信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from emp where id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3、提供实现类，测试Emp接口中的根据id查询员工的方法</strong></p> <p>(1)创建com.tedu.test.TestMybatisInf类, 并提供testFindById方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMybatisInf</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>4、实现testFindById方法并测试</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">//3.获取Mapper接口对象</span>
  <span class="token class-name">EmpMapper</span> map <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmpMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//4.调用接口对象的方法进行查询</span>
  <span class="token class-name">Emp</span> e <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//5.输出结果</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>5、在接口中提供findAll方法</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 查询所有的员工信息
* @return List&lt;Emp&gt;
*/</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意:方法的名字要和映射的sql标签的id值保持一致</p> <p>方法的返回值类型和resultType的类型要一致, 例如:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 2.查询Emp表中所有员工的信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from emp
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>6、提供实现类，测试Emp接口中的查询所有员工的方法</strong></p> <p>(1)创建com.tedu.test.TestMybatisInf类, 并提供testFindAll方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMybatisInf</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> testFindAll <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>实现testFindAll方法并测试</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">//3.获取Mapper接口对象</span>
  <span class="token class-name">EmpMapper</span> map <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmpMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//4.调用接口对象的方法进行查询</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//5.输出结果</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> e <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="几个可以优化的地方"><a href="#几个可以优化的地方" class="header-anchor">#</a> 几个可以优化的地方</h2> <h3 id="加入log4j日志框架"><a href="#加入log4j日志框架" class="header-anchor">#</a> 加入log4j日志框架</h3> <p>在项目中加入log4j的配置文件，用于打印日志信息，便于开发调试。</p> <p>在src（或相似的目录）下创建log4j.properties如下：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># Global logging configuration</span>
<span class="token attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG, stdout</span>
<span class="token comment"># Console output...</span>
<span class="token attr-name">log4j.appender.stdout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token attr-name">log4j.appender.stdout.layout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.PatternLayout</span>
<span class="token attr-name">log4j.appender.stdout.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">%5p [%t] - %m%n</span>
</code></pre></div><p>mybatis默认使用log4j作为输出日志信息。</p> <p>只要将该文件放在指定的位置，log4j工具会自动到指定位置加载上述文件，读取文件中的配置信息并使用！</p> <h3 id="sql语句中的特殊符号"><a href="#sql语句中的特殊符号" class="header-anchor">#</a> SQL语句中的特殊符号</h3> <p><strong>示例：添加一个查询功能：查询薪资小于3500的所有员工。</strong></p> <p>1、编辑EmpMapper.xml文件, 添加查询对应的sql.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 练习12: 根据薪资查询员工信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findBySal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from emp
	where 2=2 
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		and salary &gt;= #{minSal}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>maxSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		and salary &lt;= #{maxSal}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2、但在书写完后，xml文件提示有错误：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200407172154514.png" alt="image-20200407172154514"></p> <p>原来，小于号（&lt;）在xml文件中是特殊字符，被xml文件当成了标签的开始符号。</p> <p>3、解决方法：可以使用 <code>&amp;lt;</code>代替 <code>&lt;</code>，例如：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findBySal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from emp
	where 2=2 
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		and salary &gt;= #{minSal}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>maxSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		and salary <span class="token entity" title="&lt;">&amp;lt;</span>= #{maxSal}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>或者是将特殊符号包含在CDATA区（  ）中，这是因为放在CDATA区中的内容，只会被xml解析器当作普通文本来处理。而不是被当成标签的一部分处理。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 查询薪资小于3500的所有员工 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>findBySal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.pojo.Emp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from emp
	where 2=2 
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>minSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		and salary &gt;= #{minSal}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>maxSal != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		and salary <span class="token cdata">&lt;![CDATA[ &lt;= ]]&gt;</span> #{maxSal}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="jdbc-properties文件"><a href="#jdbc-properties文件" class="header-anchor">#</a> jdbc.properties文件</h3> <p>在开发中，通常我们会将连接数据库的配置信息单独放在一个properties文件中（方便管理和维护），
然后在MyBatis的mapper文件中引入properties文件的配置信息即可！</p> <p><strong>1、在src目录下创建一个名称为jdbc.properties的文件</strong></p> <p><img src="JAVAWEB-NOTE04.assets/c689eb39f8139c834ce014974d446229.png" alt=""></p> <p><strong>2、jdbc.properties文件内容如下:</strong></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">jdbc.driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/yonghedb?characterEncoding=utf-8</span>
<span class="token attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
</code></pre></div><p><strong>3、在mybatis-config.xml文件中引入jdbc.properties文件</strong></p> <p><img src="JAVAWEB-NOTE04.assets/7f967dea070cc2df6038dc0a11fcfc7e.png" alt=""></p> <p>1、其中 <code>&lt;properties resource=&quot;jdbc.properties&quot;/&gt;</code>标签用于引入jdbc.properties文件，默认到classpath即类目录下寻找指定的文件；</p> <p>2、properties标签上value属性中配置的 ${jdbc.xxx}：</p> <p><code>${jdbc.driver}</code>：其实就是jdbc.properties文件中的 jdbc.driver的值，即：</p> <div class="language- extra-class"><pre class="language-text"><code>com.mysql.jdbc.Driver
</code></pre></div><p><code>${jdbc.url}</code>：其实就是jdbc.properties文件中的 jdbc.url的值，即：</p> <div class="language- extra-class"><pre class="language-text"><code>jdbc:mysql://localhost:3306/mybatisdb?characterEncoding=utf-8
</code></pre></div><p><code>${jdbc.username}</code>：其实就是jdbc.properties文件中的 jdbc.username的值，即：</p> <div class="language- extra-class"><pre class="language-text"><code>root
</code></pre></div><p><code>${jdbc.password}</code>：其实就是jdbc.properties文件中的 jdbc.password的值，即：</p> <div class="language- extra-class"><pre class="language-text"><code>root
</code></pre></div><h2 id="扩展内容-2"><a href="#扩展内容-2" class="header-anchor">#</a> 扩展内容</h2> <h3 id="jdbc回顾"><a href="#jdbc回顾" class="header-anchor">#</a> Jdbc回顾</h3> <p><em>通过JDBC查询Emp表中的所有记录，并封装到一个List<Emp>集合中返回</Emp></em></p> <p><strong>1、创建TestJdbc类，完成查询所有员工：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">DriverManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">Statement</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>pojo</span><span class="token punctuation">.</span><span class="token class-name">Emp</span><span class="token punctuation">;</span>
<span class="token comment">/** Jdbc回顾 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJdbc</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/* 查询emp表中的所有员工信息，将每个员工信息的封装到一个
		 * Emp对象中，再将封装了员工信息所有Emp对象存入List集合
		 * 中，并遍历输出所有的员工信息 
		 */</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> empList<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">/**
	 * 查询emp表中的所有员工信息,封装到List集合并返回
	 */</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token class-name">Statement</span> stat <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">//1.注册数据库驱动</span>
			<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//2.获取数据库连接(Connection)</span>
			conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>
					<span class="token string">&quot;jdbc:mysql:///yonghedb&quot;</span><span class="token punctuation">,</span> 
					<span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//3.获取传输器</span>
			stat <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//4.利用传输器发送sql到数据库执行,并返回执行结果</span>
			<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from emp&quot;</span><span class="token punctuation">;</span>
			rs <span class="token operator">=</span> stat<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//5.处理结果</span>
			<span class="token comment">//5.1.声明List集合,用于封装所有的员工信息</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//5.2.遍历ResultSet结果集</span>
			<span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//5.3.获取结果集中的每一条员工信息</span>
				<span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">String</span> job <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;job&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">double</span> salary <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//5.4.将每一条员工信息封装到一个Emp对象中</span>
				<span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
				emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
				emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">;</span>
				emp<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//5.5.将Emp对象存入List集合中</span>
				empList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> empList<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;查询失败!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">finally</span><span class="token punctuation">{</span>
			<span class="token comment">//6.释放资源</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>rs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
					rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>stat <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
					stat <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
					conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>2、声明Emp实体类，用于封装员工信息：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 实体类,用于封装Emp表中的一条用户信息
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>
	<span class="token comment">//1.声明实体类中的属性</span>
	<span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> job<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
	
	<span class="token comment">//2.提供对应的getter和setter方法</span>
	<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> job<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJob</span><span class="token punctuation">(</span><span class="token class-name">String</span> job<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> salary<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token class-name">Double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//3.重写toString方法</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;Emp [id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;, name=&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;, job=&quot;</span> <span class="token operator">+</span> job <span class="token operator">+</span> <span class="token string">&quot;, salary=&quot;</span> <span class="token operator">+</span> salary <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mybatis-config文件没有提示的解决办法"><a href="#mybatis-config文件没有提示的解决办法" class="header-anchor">#</a> mybatis-config文件没有提示的解决办法</h3> <p>如果在没有网络(外网)的情况下，编写mybatis-config.xml文件没有提示，可以按照下面的步骤进行配置：</p> <p>(1)找到mybatis-3-config.dtd的文件的位置，例如：</p> <p><img src="JAVAWEB-NOTE04.assets/065e6b731aa74d5650821fdc63cbd4b9.png" alt=""></p> <p>(2)复制下面的url地址：</p> <div class="language- extra-class"><pre class="language-text"><code>http://mybatis.org/dtd/mybatis-3-config.dtd
</code></pre></div><p>(3)在eclipse菜单栏中: window --&gt; Preferences --&gt; 在搜索框中搜索 [ xml ] XML --&gt; XML Catalog --&gt; User Specified Entries --&gt; Add…</p> <p><img src="JAVAWEB-NOTE04.assets/eef68594c0d7b072e09702b3d6289831.png" alt=""></p> <p>(4)在弹出的窗口中:</p> <p><img src="JAVAWEB-NOTE04.assets/364a97a96fcb74e6ca14d4a9c8b89e6b.png" alt=""></p> <h3 id="mapper文件没有提示的解决办法"><a href="#mapper文件没有提示的解决办法" class="header-anchor">#</a> Mapper文件没有提示的解决办法</h3> <p>如果在没有网络(外网)的情况下，编写XxxMapper.xml文件没有提示，可以按照下面的步骤进行配置：</p> <p>(1)找到mybatis-3-mapper.dtd的文件的位置，例如：</p> <p><img src="JAVAWEB-NOTE04.assets/50f2e9357bd4d42791f85098a75795c0.png" alt=""></p> <p>(2)复制上面的url地址，即：</p> <div class="language- extra-class"><pre class="language-text"><code>http://mybatis.org/dtd/mybatis-3-mapper.dtd
</code></pre></div><p>(3)在eclipse菜单栏中: window --&gt; Preferences --&gt; 在搜索框中搜索 [ xml ] XML --&gt; XML Catalog --&gt; User Specified Entries --&gt; Add…</p> <p><img src="JAVAWEB-NOTE04.assets/eef68594c0d7b072e09702b3d6289831.png" alt=""></p> <p>(4)在弹出的窗口中:</p> <p><img src="JAVAWEB-NOTE04.assets/e907b64d04d56389acba7c7e2f6bd74c.png" alt=""></p> <h3 id="配置达内xml-schema代理服务器"><a href="#配置达内xml-schema代理服务器" class="header-anchor">#</a> 配置达内XML Schema代理服务器</h3> <p>1、打开Eclipse的配置首选项</p> <p><img src="JAVAWEB-NOTE04.assets/eb81455caf93624c289a4e60105b6aca.png" alt="http://doc.tedu.cn/img/1.png"></p> <p>2、找到 XML -&gt; XML Catalog, 添加配置项目：</p> <p><img src="JAVAWEB-NOTE04.assets/bf2d8978925006db94220c283a695f57.png" alt="http://doc.tedu.cn/img/2.png"></p> <p>3、添加URI代理配置, 比如：配置Spring Schema</p> <p><img src="JAVAWEB-NOTE04.assets/7e5343736b72ca605ac7e577025ccd9e.png" alt="http://doc.tedu.cn/img/3.png"></p> <p><strong>4、可以配置的代理有</strong></p> <table><thead><tr><th></th> <th>http://ibatis.apache.org</th> <th>http://doc.tedu.cn</th></tr></thead> <tbody><tr><td></td> <td>http://www.springframework.org</td> <td>http://doc.tedu.cn</td></tr> <tr><td></td> <td>http://mybatis.org</td> <td>http://doc.tedu.cn</td></tr> <tr><td></td> <td>http://hibernate.sourceforge.net, http://www.hibernate.org</td> <td>http://doc.tedu.cn</td></tr> <tr><td></td> <td>http://struts.apache.org</td> <td>http://doc.tedu.cn</td></tr></tbody></table> <h2 id="mybatis作业"><a href="#mybatis作业" class="header-anchor">#</a> mybatis作业</h2> <p><code>04-03作业：</code></p> <p>理解什么是事务?</p> <p>掌握事务四大特性(原子性、一致性、隔离性、持久性)</p> <p>自己独立完成mybatis快速入门程序!!</p> <p><code>04-07作业：</code></p> <p>将课上讲过的mybatis练习自己再做一遍！</p> <h1 id="unit13-spring框架"><a href="#unit13-spring框架" class="header-anchor">#</a> unit13-spring框架</h1> <h2 id="spring简介"><a href="#spring简介" class="header-anchor">#</a> spring简介</h2> <h3 id="什么是spring？"><a href="#什么是spring？" class="header-anchor">#</a> 什么是Spring？</h3> <p>spring是分层的JavaSE及JavaEE应用于全栈的轻量级开源框架，以IoC（Inverse Of Control：控制反转/反转控制）和AOP（Aspact Oriented Programming：面向切面编程）为核心，提供了表现层SpringMVC和持久层Spring
JDBC以及业务层事务管理等众多模块的企业级应用技术，还能整合开源世界中众多著名的第三方框架和类库，逐渐成为使用最多的JavaEE企业应用开源框架。</p> <p>SSH(struts2 spring hibernate)</p> <p>SSM(springmvc spring mybatis)</p> <p>Spring的本质是管理软件中的对象，即<strong>创建对象</strong>和<strong>维护对象之间的关系</strong></p> <h3 id="spring的发展历程"><a href="#spring的发展历程" class="header-anchor">#</a> Spring的发展历程</h3> <p>1997 年 IBM提出了EJB 的思想</p> <p>1998 年，SUN制定开发标准规范 EJB1.0</p> <p>1999 年，EJB1.1 发布</p> <p>2001 年，EJB2.0 发布</p> <p>2003 年，EJB2.1 发布</p> <p>2006 年，EJB3.0 发布</p> <p><strong>Rod Johnson</strong> （罗德·约翰逊，spring 之父）</p> <blockquote><p>Expert One-to-One J2EE Development without EJB(2004)</p> <p>阐述了 J2EE 开发不使用 EJB的解决方式（Spring 雏形）</p></blockquote> <p>2017年9月份发布了spring的最新版本<strong>spring 5.0</strong>通用版</p> <h3 id="spring的优势"><a href="#spring的优势" class="header-anchor">#</a> Spring的优势</h3> <p><strong>1).方便解耦，简化开发</strong></p> <p>通过 Spring提供的 IoC容器，可以将对象间的依赖关系交由Spring进行控制，避免硬编码所造成的过度程序耦合。用户也不必再为较为底层的需求编写代码，可以更专注于上层的应用。</p> <p><strong>2).AOP 编程的支持</strong></p> <p>通过 Spring的 AOP 功能，方便进行面向切面的编程，许多不容易用传统OOP（Object Oriented Programming：面向对象编程） 实现的功能可以通过 AOP 轻松应付。</p> <p><strong>3).声明式事务的支持</strong></p> <p>可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明式方式灵活的进行事务的管理，提高开发效率和质量。</p> <p><strong>4).方便程序的测试</strong></p> <p>可以用非容器依赖的编程方式进行几乎所有的测试工作，测试不再是昂贵的操作，而是随手可做的事情。</p> <p><strong>5).方便集成各种优秀框架</strong></p> <p>Spring可以降低各种框架的使用难度，提供了对各种优秀框架（Struts、Hibernate、Hessian、Quartz等）的直接支持。</p> <p><strong>6).降低 JavaEE API 的使用难度。</strong></p> <p>Spring对 JavaEE API（如 JDBC、JavaMail、远程调用等）进行了薄薄的封装层，使这些API 的使用难度大为降低。</p> <p><strong>7).Spring框架源码是经典学习范例</strong></p> <p>Spring的源代码设计精妙、结构清晰、匠心独用，处处体现着大师对Java设计模式灵活运用以及对 Java技术的高深造诣。它的源代码无疑是Java技术的最佳实践的范例。</p> <h3 id="spring的架构"><a href="#spring的架构" class="header-anchor">#</a> spring的架构</h3> <p>Spring 最初的目标就是要整合一切优秀资源,然后对外提供一个统一的服务。Spring 模块构建在核心容器之上，核心容器定义了创建、配置和管理 bean 的方式，如下图所示：</p> <p><img src="JAVAWEB-NOTE04.assets/bf0676465991176183ba7d0765728e57.png" alt=""></p> <p>组成 Spring 框架的每个模块（或组件）都可以单独存在，或者与其他一个或多个模块联合实现。每个模块的功能如下：</p> <table><thead><tr><th></th> <th>模块</th> <th>说明</th></tr></thead> <tbody><tr><td></td> <td>核心容器Spring Core</td> <td>核心容器，提供Spring框架的基本功能。核心容器的主要组件是BeanFactory，它是工厂模式的实现。BeanFactory 使用控制反转（IOC）模式，将应用程序的配置和依赖性规范与实际的应用程序代码分开。</td></tr> <tr><td></td> <td>Spring Context</td> <td>Spring上下文，是一个配置文件，向 Spring 框架提供上下文信息。Spring 上下文包括企业服务，例如 JNDI、EJB、电子邮件、国际化、校验和调度功能。</td></tr> <tr><td></td> <td>Spring AOP</td> <td>通过配置管理特性，Spring AOP 模块直接将面向切面的编程功能集成到了 Spring 框架中。可以很容易地使 Spring框架管理的任何对象支持AOP。Spring AOP模块为基于 Spring 的应用程序中的对象提供了事务管理服务。通过使用 Spring AOP，就可以将声明性事务管理集成到应用程序中。</td></tr> <tr><td></td> <td>Spring DAO</td> <td>JDBC DAO 抽象层提供了有意义的异常层次结构，可用该结构来管理异常处理和不同数据库供应商抛出的错误消息。异常层次结构简化了错误处理，并且极大地降低了需要编写的异常代码数量（例如打开和关闭连接）。Spring DAO 的面向 JDBC 的异常遵从通用的 DAO 异常层次结构。</td></tr> <tr><td></td> <td>Spring ORM</td> <td>Spring 框架插入了若干个 ORM 框架，从而提供了 ORM 的对象关系工具，其中包括JDO、Hibernate和iBatis SQL Map。所有这些都遵从 Spring 的通用事务和 DAO 异常层次结构。</td></tr> <tr><td></td> <td>Spring Web</td> <td>Web上下文模块建立在应用程序上下文模块之上，为基于 Web 的应用程序提供了上下文。所以Spring 框架支持与 Jakarta Struts的集成。Web模块还简化了处理多部分请求以及将请求参数绑定到域对象的工作。</td></tr> <tr><td></td> <td>Spring MVC框架</td> <td>MVC 框架是一个全功能的构建 Web 应用程序的 MVC 实现。通过策略接口，MVC 框架变成为高度可配置的，MVC 容纳了大量视图技术，其中包括 JSP、Velocity、Tiles、iText 和 POI。</td></tr></tbody></table> <h2 id="程序中的耦合和解耦"><a href="#程序中的耦合和解耦" class="header-anchor">#</a> 程序中的耦合和解耦</h2> <h3 id="什么是程序的耦合"><a href="#什么是程序的耦合" class="header-anchor">#</a> 什么是程序的耦合</h3> <p>耦合性(Coupling)，也叫耦合度，是对模块间关联程度的度量。耦合的强弱取决于模块间接口的复杂性、调用模块的方式以及通过界面传送数据的多少。模块间的耦合度是指模块之间的依赖关系，包括控制关系、调用关系、数据传递关系。<strong>模块间联系越多，其耦合性越强</strong>，同时表明其独立性越差（降低耦合性，可以提高其独立性）。耦合性存在于各个领域，而非软件设计中独有的，但是我们只讨论软件工程中的耦合。</p> <p>总结：在软件工程中，<strong>耦合指的就是指对象之间的依赖关系。对象之间的依赖程度越高，耦合度就越高。对象之间的耦合越高，维护成本越高</strong>。因此对象的设计应使类和构件之间的耦合最小。</p> <p>降低程序之间的依赖程度，即降低程序之间的耦合度的过程就叫做解耦。</p> <p>例如：早期的Jdbc操作中，在注册数据库驱动时，为什么采用的是Class.forName的方式，而不是采用DriverManager.registerDriver的方式?</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJdbc</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.注册数据库驱动</span>
    <span class="token comment">// DriverManager.registerDriver( new Driver() );</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.获取数据库连接</span>
    <span class="token comment">//3.获取传输器</span>
    <span class="token comment">//4.发送sql到服务器执行并返回执行结果</span>
    <span class="token comment">//5.处理结果</span>
    <span class="token comment">//6.释放资源</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>除了<code>DriverManager.registerDriver</code>会导致驱动注册两次外，更重要的是，如果使用这种方式，JDBC程序就会依赖于数据库的驱动类（MySQL的Driver类），如果后期程序因数据量和性能原因升级到Oracle数据库，就需要修改程序源代码——重新导入新的驱动类，这会增加很多不必要的麻烦！</p> <p>而是用<code>Class.forName</code>方式注册驱动，这样的好处是Jdbc程序不再依赖具体的驱动类，即使删除（或不导入）mysql驱动包，程序依然可以编译（当然不可能运行，因为运行时肯定需要依赖驱动）。</p> <p>此时类中仅仅是将mysql驱动类的全限定类名写死在程序中（只是一个字符串），可以将这个字符串提取到配置文件中，后期可以通过修改配置文件（而不用修改程序代码）轻松的替换数据库产品。</p> <h3 id="工厂模式解耦介绍"><a href="#工厂模式解耦介绍" class="header-anchor">#</a> 工厂模式解耦介绍</h3> <p>在实际开发中可以将三层（表现层、业务层、持久层）的对象都使用配置文件配置起来，当启动服务器加载应用时，可以通过工厂读取配置文件，根据配置文件中的配置将这些对象创建出来，在接下来使用的时候，直接拿过来使用即可。</p> <p>那么，这个负责读取配置文件，根据配置文件创建并返回这些对象的类就是工厂。</p> <p>可以通过【工厂+接口+配置文件】的方式解除程序中的耦合。</p> <h3 id="工厂模式解耦示例"><a href="#工厂模式解耦示例" class="header-anchor">#</a> 工厂模式解耦示例</h3> <hr> <p>解耦程序编写步骤：</p> <hr> <p>1、创建一个Maven的Java工程（day16-spring）</p> <p>2、创建持久层接口和接口实现类</p> <blockquote><p>com.tedu.dao.EmpDao （接口）</p></blockquote> <blockquote><p>com.tedu.dao.EmpDaoImpl （实现类）</p></blockquote> <p>3、创建业务层接口和接口实现类</p> <blockquote><p>com.tedu.service.EmpService （接口）</p></blockquote> <blockquote><p>com.tedu.service.EmpServiceImpl （实现类）</p></blockquote> <p>4、创建表现层测试程序（com.tedu.controller.EmpController）并运行测试程序</p> <p>5、通过工程+配置文件+接口（已有）方式解耦</p> <blockquote><p>(1)创建工厂类（com.tedu.factory.BeanFactory）并实现</p></blockquote> <blockquote><p>(2)提供配置文件，将service接口和dao接口的实现类的全限定类名编写到配置文件中。</p></blockquote> <p>6、使用工厂获取service接口和dao接口的实例，替换使用new的方式获取接口的实例。</p> <hr> <p>详细代码如下：</p> <hr> <p><strong>1、创建持久层接口（com.tedu.dao.EmpDao）</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 员工模块的Dao(持久层)接口
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>
	<span class="token comment">/** 添加员工信息 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>2、创建持久层接口实现类（com.tedu.dao.EmpDaoImpl）</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 员工模块的Dao(持久层)接口实现类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
			<span class="token string">&quot;Dao层的addEmp()方法执行了..成功保存了一条员工信息..&quot;</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>3、创建业务层接口（com.tedu.service.EmpService）</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 员工模块的service(业务层)接口
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>
	<span class="token comment">/** 添加员工信息 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>4、创建业务层接口实现类（com.tedu.service.EmpServiceImpl）</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>dao</span><span class="token punctuation">.</span><span class="token class-name">EmpDao</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>dao</span><span class="token punctuation">.</span><span class="token class-name">EmpDaoImpl</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 员工模块的service(业务层)接口实现类
 * service层 ---&gt; dao层
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>
	<span class="token comment">/* 获取Dao接口的子类实例
	 * ——这里使用new对象的方式造成了程序之间的耦合性提升 */</span>
	<span class="token keyword">private</span> <span class="token class-name">EmpDao</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用dao层的方法添加员工信息...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dao<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>5、创建表现层测试类（com.tedu.controller.EmpController）</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>service</span><span class="token punctuation">.</span><span class="token class-name">EmpService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>service</span><span class="token punctuation">.</span><span class="token class-name">EmpServiceImpl</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 模拟表现层 
 * controller --&gt; service --&gt; dao
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>
	<span class="token comment">/* 获取Service接口的子类实例
	 * ——这里使用new对象的方式造成了程序之间的耦合性提升 */</span>
	<span class="token keyword">private</span> <span class="token class-name">EmpService</span> service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAddEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用service层的方法添加员工信息...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		service<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的程序中，EmpController中要调用Service层的方法，所以通过new对象的形式获取了EmpService接口子类的实例，代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">EmpService</span> service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在EmpService的实现类中要调用Dao层的方法，所以通过new对象的形式获取了EmpDao接口子类的实例，代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">EmpDao</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果在上面的程序中将EmpDaoImpl或者EmpServiceImpl移除，会导致其他类中的代码编译错误。此时表现层和业务层，及业务层和持久层之间的依赖程度过高，如果将来替换某一层，很可能会造成其他层无法运行，只能通过修改程序代码保证程序运行，这样依赖就会提高维护成本以及造成不必要的麻烦。</p> <p>而在程序中new对象的方式造成了这种程序之间的依赖程度提升，即提升了程序之间的耦合性。</p> <p>使用工厂+配置文件+接口解耦代码如下：</p> <hr> <p>6、创建com.tedu.factory.BeanFactory类，用于创建各个层所需要的对象。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Properties</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * ---------------------------------------------------------
 * Bean: 可重用组件(计算机英语)
 * JavaBean：使用Java语言编写的可重用组件，例如：service层、dao层等
 * JavaBean：通常分为业务Bean和实体Bean
 * 		业务Bean：处理业务逻辑，service层、dao层
 * 		实体Bean：封装数据，例如，为了封装员工信息而编写的Emp实体类.
 * ---------------------------------------------------------
 * 解除耦合:
 * (1)需要提供配置文件，在配置文件中配置service和dao的实现类
 * 		配置内容为：唯一标识=实现类的全限定类名（key=value结构）
 * (2)通过工厂读取配置文件中配置的全限定类名，利用反射创建对象。
 * 		xml配置文件、properties配置文件
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//声明一个Properties对象，在静态代码块中对其进行初始化</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Properties</span> prop<span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">//为prop进行实例化</span>
			prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//获取配置文件的流对象</span>
			<span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token class-name">BeanFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;config.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//将配置文件中的内容读取到Properties对象中</span>
			prop<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span> in <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;初始化Properties对象失败!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">/**
	 * 根据config.xml文件中的key获取对应class类的实例
	 * @param key 
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">String</span> className <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> bean<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>7、在源码目录下创建一个config.properties文件，文件内容配置如下：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">EmpService</span><span class="token punctuation">=</span><span class="token attr-value">com.tedu.service.EmpServiceImpl</span>
<span class="token attr-name">EmpDao</span><span class="token punctuation">=</span><span class="token attr-value">com.tedu.dao.EmpDaoImpl</span>
</code></pre></div><p><strong>8、将EmpController类中通过 &quot;new对象的形式获取了EmpService接口子类的实例&quot; 以及在EmpServiceImpl类中通过 &quot;new对象的形式获取了EmpDao接口子类的实例&quot; 改为使用BeanFactory工厂获取Service和Dao层的实例。如下：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 获取Service接口的子类实例
 * ——这里使用new对象的方式造成了程序之间的耦合性提升 */</span>
<span class="token comment">//private EmpService service = new EmpServiceImpl();</span>
<span class="token keyword">private</span> <span class="token class-name">EmpService</span> service <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EmpService</span><span class="token punctuation">)</span><span class="token class-name">BeanFactory</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;EmpService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 获取Dao接口的子类实例
 * ——这里使用new对象的方式造成了程序之间的耦合性提升 */</span>
<span class="token comment">//private EmpDao dao = new EmpDaoImpl();</span>
<span class="token keyword">private</span> <span class="token class-name">EmpDao</span> dao <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EmpDao</span><span class="token punctuation">)</span><span class="token class-name">BeanFactory</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span> <span class="token string">&quot;EmpDao&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="spring-ioc控制反转"><a href="#spring-ioc控制反转" class="header-anchor">#</a> Spring IOC控制反转</h2> <h3 id="什么是控制反转"><a href="#什么是控制反转" class="header-anchor">#</a> 什么是控制反转</h3> <p><strong>IOC</strong>（Inverse Of Control）<strong>控制反转</strong>，即，把创建对象的权利交给框架。</p> <p>也就是指将对象的创建、对象的存储、对象的管理交给了spring容器。</p> <p>（spring容器是spring中的一个核心模块，用于管理对象，底层可以理解为是一个map集合）</p> <hr> <p><img src="JAVAWEB-NOTE04.assets/0a11c44a30f5a7328589e4031d624ffd.png" alt=""></p> <hr> <p>在此之前，当需要对象时，通常是利用new关键字创建一个对象：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 获取Service接口的子类实例
 * ——这里使用new对象的方式造成了程序之间的耦合性提升 */</span>
<span class="token keyword">private</span> <span class="token class-name">EmpService</span> service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//private EmpService service = (EmpService)BeanFactory.getBean(&quot;EmpService&quot;);</span>
</code></pre></div><p>但由于new对象，会提高类和类之间的依赖关系，即代码之间的耦合性。</p> <p>而现在我们可以将对象的创建交给框架来做：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 获取Service接口的子类实例
 * ——这里使用new对象的方式造成了程序之间的耦合性提升 */</span>
<span class="token comment">//private EmpService service = new EmpServiceImpl();</span>
<span class="token keyword">private</span> <span class="token class-name">EmpService</span> service <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EmpService</span><span class="token punctuation">)</span><span class="token class-name">BeanFactory</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;EmpService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>只需要将类提前配置在配置文件中，就可以将对象的创建交给框架来做。当需要对象时，不需要自己创建，而是通过框架直接获取即可，省去了new对象的过程，自然就降低类和类之间的依赖关系，也就是耦合性。</p> <h2 id="ioc入门案例"><a href="#ioc入门案例" class="header-anchor">#</a> IOC入门案例</h2> <p>下面将使用spring的IOC解决程序间的耦合</p> <h3 id="创建工程，引入jar包"><a href="#创建工程，引入jar包" class="header-anchor">#</a> 创建工程，引入jar包</h3> <p>创建Maven工程，引入spring相关依赖包</p> <p>1、创建Maven—Java工程</p> <p><img src="JAVAWEB-NOTE04.assets/e38fbdb8819178517de105a52e112a84.png" alt=""></p> <p>2、引入junit、spring的jar包：在maven工程的pom.xml文件的根标签（project）内添加如下配置：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 添加junit的jar包 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 添加spring的jar包 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.1.3.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>导入后保存pom文件，项目如图所示：</p> <p><img src="JAVAWEB-NOTE04.assets/ffe9287f31af4c4bf68f5d098b1d2039.png" alt=""></p> <h3 id="创建spring配置文件"><a href="#创建spring配置文件" class="header-anchor">#</a> 创建spring配置文件</h3> <p>创建spring核心配置文件—applicationContext.xml</p> <p>1、在工程的src/main/resources源码目录下，创建applicationContext.xml文件:</p> <p><img src="JAVAWEB-NOTE04.assets/3b521e8ba5d563ec21a2e142fa6cf623.png" alt=""></p> <p>2、在applicationContext.xml中添加文件头信息：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3、将EmpService接口的实现类的实例
以及EmpDao接口的实现类的实例交给Spring容器创建，在核心配置文件中添加如下配置：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 将EmpService接口的实现类的实例交给spring创建 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>empService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.service.EmpServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 将EmpDao接口的实现类的实例交给spring创建 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>empDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.dao.EmpDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="创建测试类进行解耦"><a href="#创建测试类进行解耦" class="header-anchor">#</a> 创建测试类进行解耦</h3> <p>创建测试类—TestSpring，通过spring的IOC解决程序中的耦合问题</p> <p>1、创建测试类</p> <p><img src="JAVAWEB-NOTE04.assets/30070bf2108c5dcd69ad97c00021d08b.png" alt=""></p> <p>2、测试步骤及代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSpring</span> <span class="token punctuation">{</span>
	<span class="token comment">/**
	 * 使用spring的IOC解决程序中的耦合问题
	 */</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIOC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//获取spring的核心容器对象</span>
		<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> 
				<span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>
						<span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//通过spring的核心容器获取EmpService接口的子类实例</span>
		<span class="token class-name">EmpService</span> service <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EmpService</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;empService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">EmpDao</span> dao <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EmpDao</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;empDao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> service <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> dao <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>3、运行结果：</strong></p> <p><img src="JAVAWEB-NOTE04.assets/96cee091183ae525af0bf5314bf057c1.png" alt=""></p> <p><strong>4、入门案例总结：</strong></p> <p>这就是spring框架的IOC——控制反转。之前我们自己new对象，例如：</p> <blockquote><p>User u = new User();</p></blockquote> <p>而现在，变成由一个初始化的xml配置文件来创建，也就是由spring容器来创建。</p> <blockquote><p>User user = (User) ac.getBean(&quot;user&quot;);</p></blockquote> <p>当程序运行，spring开始工作后，会加载整个xml核心配置文件，读取到<bean>，获取到class属性中类的全路径，利用反射创建该类的对象。</bean></p> <h2 id="bean对象的单例和多例"><a href="#bean对象的单例和多例" class="header-anchor">#</a> Bean对象的单例和多例</h2> <h3 id="bean对象的单例和多例概述"><a href="#bean对象的单例和多例概述" class="header-anchor">#</a> Bean对象的单例和多例概述</h3> <p>在Spring容器中管理的Bean对象的作用域，可以通过<strong>scope属性</strong>或用相关注解指定其作用域。</p> <p>最常用是singleton（单例）或prototype（多例）。其含义如下：</p> <p><strong>1) singleton</strong>：单实例，是默认值。这个作用域标识的对象具备全局唯一性。</p> <div class="language- extra-class"><pre class="language-text"><code>当把一个 bean 定义设置scope为singleton作用域时，那么Spring IOC容器只会创建该bean定义的唯一实例。也就是说，整个Spring IOC容器中只会创建当前类的唯一一个对象。
这个单一实例会被存储到单例缓存（singleton cache）中，并且所有针对该bean的后续请求和引用都 将返回被缓存的、唯一的这个对象实例。
singleton负责对象的创建、初始化、销毁。
</code></pre></div><p><strong>2) prototype</strong>：多实例。这个作用域标识的对象每次获取都会创建新的对象。</p> <div class="language- extra-class"><pre class="language-text"><code>当把一个 bean 定义设置scope为singleton作用域时，Spring IOC容器会在每一次获取当前Bean时，都会产生一个新的Bean实例（相当于new的操作）
prototype只负责对象的创建和初始化，不负责销毁。
</code></pre></div><h3 id="为什么用单实例或多实例？"><a href="#为什么用单实例或多实例？" class="header-anchor">#</a> 为什么用单实例或多实例？</h3> <p>之所以用单实例，在没有线程安全问题的前提下，没必要每个请求都创建一个对象，这样子既浪费CPU又浪费内存；</p> <p>之所以用多例，是为了防止并发问题；即一个请求改变了对象的状态(例如，可改变的成员变量)，此时对象又处理另一个请求，而之前请求对对象状态的改变导致了对象对另一个请求做了错误的处理；</p> <p>用单例和多例的标准只有一个：当对象含有可改变的状态时（更精确的说就是在实际应用中该状态会改变），使用多实例，否则单实例；</p> <p>在Spring中配置Bean实例是单例还是多例方法是：</p> <p><strong>单例：</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>singleton<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>多例：</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prototype<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="测试spring的单实例和多实例"><a href="#测试spring的单实例和多实例" class="header-anchor">#</a> 测试spring的单实例和多实例</h3> <p>1、创建TestIOC2类，测试代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>spring</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support</span><span class="token punctuation">.</span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestIOC2</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/* 通过spring容器创建创建User对象,
		 * 并调用User中的sayHi方法  */</span>
		<span class="token comment">//1.加载spring的核心配置文件</span>
		<span class="token class-name">ClassPathXmlApplicationContext</span> ac <span class="token operator">=</span> 
				<span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>
					<span class="token string">&quot;applicationContext.xml&quot;</span>
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//2.从spring容器中获取bean对象(而不是自己new)</span>
		<span class="token class-name">User</span> user1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//3.测试</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>user1 <span class="token operator">==</span> user2<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;当前实例为单实例...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;当前实例为多实例...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3、将applicationContext.xml中，User类bean标签的scope值设置为singleton：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>singleton<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>运行TestIOC2，运行结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/4f79acd66228d70451ef21a27911d21b.png" alt=""></p> <p>4、将applicationContext.xml中，User类bean标签的scope值修改为prototype</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prototype<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>再次运行TestIOC2，运行结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/805f9db5f3eed078dc77876db32298ac.png" alt=""></p> <h2 id="spring-di依赖注入"><a href="#spring-di依赖注入" class="header-anchor">#</a> Spring DI依赖注入</h2> <h3 id="两种注入方式介绍"><a href="#两种注入方式介绍" class="header-anchor">#</a> 两种注入方式介绍</h3> <p>DI（Dependency Injection）依赖注入 。</p> <p>依赖注入，即组件之间的依赖关系由容器在应用系统运行期来决定，也就是由容器动态地将某种依赖关系的目标对象实例注入到应用系统中的各个关联的组件之中。</p> <hr> <p>简单来说，所谓的依赖注入其实就是，在创建对象的同时或之后，如何给对象的属性赋值。</p> <p>如果对象由我们自己创建，这一切都变得很简单，例如：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;韩少云&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>或者：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;韩少云&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果对象由spring创建，那么spring是怎么给属性赋值的？spring提供两种方式为属性赋值：</p> <p><strong>(1).Set方式注入</strong></p> <p><strong>(2).构造方法注入</strong></p> <h2 id="set方式注入"><a href="#set方式注入" class="header-anchor">#</a> set方式注入</h2> <h3 id="普通属性注入"><a href="#普通属性注入" class="header-anchor">#</a> 普通属性注入</h3> <p><strong>需求：通过Spring创建User实例，并为User实例的name和age属性（普通属性）赋值</strong></p> <p><strong>1、创建User类，声明name和age属性，并添加对应的setter和getter方法，以及toString方法</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>spring</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
	
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> age<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;User [name=&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;, age=&quot;</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>2、在applicationContext.xml中声明User类的bean实例</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 声明User类的bean实例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3、创建测试类—TestDI</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>spring</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support</span><span class="token punctuation">.</span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDI</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//1.加载applicationContext.xml核心配置文件</span>
		<span class="token class-name">ClassPathXmlApplicationContext</span> ac <span class="token operator">=</span> 
				<span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>
					<span class="token string">&quot;applicationContext.xml&quot;</span>
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//2.获取User类的实例</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//3.输出User实例</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> user <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由于这里没有为User对象的属性赋值，所以此时运行测试，结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/1175a00c572e203e5413862754583a75.png" alt=""></p> <p><strong>4、修改applicationContext.xml中User实例的声明，为User实例注入属性</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 声明User类的bean实例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 通过set方式为普通属性赋值 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>韩少云<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>其中name属性的值，必须要和User类中所注入属性对应的get方法的名字去掉get后首字母变为小写的名字相同。</p> <p>例如：为 User类中的age属性赋值，由于name属性对应的get方法名字为getAge，当去调用get和首字母变为小写后的名称为age，因此为age属性注入的配置内容为：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>普通属性直接通过value注入即可。</p> <p><strong>5、运行测试类TestDI，结果为：</strong></p> <p>上面通过spring提供的set方式对User对象的属性进行了赋值赋值，所以此时运行测试，结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/abda0664c744fdef3e8ece4ea2db2a45.png" alt=""></p> <h3 id="对象属性注入"><a href="#对象属性注入" class="header-anchor">#</a> 对象属性注入</h3> <p><strong>需求：通过Spring创建User实例，并为User对象的userInfo属性(对象属性)赋值</strong></p> <p>1、创建UserInfo类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>spring</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{</span>
	
<span class="token punctuation">}</span>
</code></pre></div><p>2、在applicationContext.xml中，声明UserInfo类的bean实例</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 声明UserInfo类的bean实例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.UserInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3、修改User类，声明userInfo属性，添加对应的setter和getter方法，并重新生成toString方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">private</span> <span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">;</span>
	
	<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> userInfo<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserInfo</span><span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;User [name=&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;, age=&quot;</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">&quot;, userInfo=&quot;</span> <span class="token operator">+</span> userInfo <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>4、在applicationContext.xml中，将UserInfo对象作为值，赋值给User对象的userInfo属性</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 声明User类的bean实例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 通过set方式为普通属性赋值 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>韩少云<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 通过set方式为对象属性赋值 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>由于此处是将UserInfo对象作为值赋值给另一个对象的属性，因此ref属性的值，为UserInfo对象bean标签的id值。</p> <p>对象属性通过ref属性注入。</p> <p>5、运行测试类TestDI，结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/62c1243d1a13010db1a3c3cd8b116759.png" alt=""></p> <h2 id="构造方法注入"><a href="#构造方法注入" class="header-anchor">#</a> 构造方法注入</h2> <p><strong>需求：通过Spring创建User对象，并为User对象的属性（name、age、UserInfo属性）赋值</strong></p> <p><strong>1、为User类声明构造函数</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//声明无参构造函数</span>
<span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token comment">//声明有参构造函数</span>
<span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>2、修改applicationContext.xml文件，将set方式修改为构造方法注入。</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 通过set方式为普通属性赋值
	&lt;property name=&quot;name&quot; value=&quot;韩少云&quot;&gt;&lt;/property&gt;
	&lt;property name=&quot;age&quot; value=&quot;20&quot;&gt;&lt;/property&gt;
	&lt;property name=&quot;userInfo&quot; ref=&quot;userInfo&quot;&gt;&lt;/property&gt;
	 --&gt;</span>
	<span class="token comment">&lt;!-- 通过构造器中参数为属性赋值 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>马云<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>35<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 声明UserInfo类的bean实例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.spring.UserInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>其中，constructor-arg标签name属性的值必须和构造函数中参数的名字相同!</p> <p>同样的，普通属性直接通过value注入即可；</p> <p>对象属性通过ref属性注入。</p> <p><strong>3、运行测试类TestDI，结果为：</strong></p> <p><img src="JAVAWEB-NOTE04.assets/4b1ba956af8e1244bd1a30553f4fe6bf.png" alt=""></p> <h2 id="扩展内容-3"><a href="#扩展内容-3" class="header-anchor">#</a> 扩展内容</h2> <h3 id="applicationcontext-xml没有提示的解决办法"><a href="#applicationcontext-xml没有提示的解决办法" class="header-anchor">#</a> applicationContext.xml没有提示的解决办法</h3> <p><strong>1、配置spring-beans-4.1.xsd文件</strong></p> <p>(1)找到spring-beans-4.1.xsd的文件的位置，例如：</p> <p><img src="JAVAWEB-NOTE04.assets/3526b8f7cb18db7def8c59c6b8f5a8c6.png" alt=""></p> <p>(2)复制下面的url地址：</p> <p>http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</p> <p>(3)在eclipse菜单栏中: window --&gt; Preferences --&gt; 在搜索框中搜索 [ xml ]</p> <p>XML --&gt; XML Catalog --&gt; User Specified Entries --&gt; Add…</p> <p><img src="JAVAWEB-NOTE04.assets/eef68594c0d7b072e09702b3d6289831.png" alt=""></p> <p>(4)在弹出的窗口中:</p> <p><img src="JAVAWEB-NOTE04.assets/10a6f5e3901af4d2fd9cba0d644e00bd.png" alt=""></p> <p><strong>2、配置spring-context-4.1.xsd文件</strong></p> <p>(1)找到spring-context-4.1.xsd的文件的位置，例如：</p> <p><img src="JAVAWEB-NOTE04.assets/f88878c81816bfccdaf534b48ecbf37d.png" alt=""></p> <p>(2)复制下面的url地址：</p> <div class="language- extra-class"><pre class="language-text"><code>http://www.springframework.org/schema/context/spring-context-4.0.xsd
</code></pre></div><p>(3)在eclipse菜单栏中: window --&gt; Preferences --&gt; 在搜索框中搜索 [ xml ] XML --&gt; XML Catalog --&gt; User Specified Entries --&gt; Add…</p> <p><img src="JAVAWEB-NOTE04.assets/eef68594c0d7b072e09702b3d6289831.png" alt=""></p> <p>(4)在弹出的窗口中:</p> <p><img src="JAVAWEB-NOTE04.assets/bab1eb1bf264e64de4a3672c96f23e8b.png" alt=""></p> <h1 id="unit14-springmvc框架"><a href="#unit14-springmvc框架" class="header-anchor">#</a> unit14-springmvc框架</h1> <h2 id="mvc设计模式"><a href="#mvc设计模式" class="header-anchor">#</a> MVC设计模式</h2> <h3 id="什么是设计模式"><a href="#什么是设计模式" class="header-anchor">#</a> 什么是设计模式</h3> <p>设计模式（Design Pattern）是一套被反复使用、多数人知晓的、经过分类的、代码设计经验的总结。</p> <p>使用设计模式的目的：为了代码可重用性、让代码更容易被他人理解、保证代码可靠性。</p> <p>设计模式使代码编写真正工程化；</p> <p>设计模式是软件工程的基石脉络，如同大厦的结构一样。</p> <p>设计模式就是一种模子，经过多年实践锤炼形成一套行之有效的完成某个特定任务的步骤和方式。</p> <p>例如：西凤酒的酿造过程，酿造工序，前后不能变，温差不能变，这样做就是好喝，稍微改动就变味道了。</p> <p>再如，北京烤鸭，就是那样做，就是那些调料腌制，变量配比，味道口感就是不如人家。</p> <h3 id="mvc设计模式-2"><a href="#mvc设计模式-2" class="header-anchor">#</a> MVC设计模式</h3> <p>MVC设计模式是一种通用的软件编程思想</p> <p>在MVC设计模式中认为, 任何软件都可以分为三部分组成：</p> <p>(1)控制程序流转的控制器（<strong>Controller</strong>）</p> <p>(2)封装数据处理数据的模型（<strong>Model</strong>）</p> <p>(3)负责展示数据的视图（<strong>view</strong>）</p> <p>并且在MVC设计思想中要求一个符合MVC设计思想的软件应该保证上面这三部分相互独立，互不干扰，每一个部分只负责自己擅长的部分。</p> <p>如果某一个模块发生变化，应该尽量做到不影响其他两个模块。这样做的好处是，软件的结构会变得更加的清晰，可读性强。有利于后期的扩展和维护，并且代码可以实现复用。</p> <p><img src="JAVAWEB-NOTE04.assets/20e60e831a34d3a4a68805e386aa1779.png" alt=""></p> <h2 id="初识springmvc"><a href="#初识springmvc" class="header-anchor">#</a> 初识SpringMVC</h2> <h3 id="servlet的缺点"><a href="#servlet的缺点" class="header-anchor">#</a> Servlet的缺点</h3> <p>1、通常情况下，一个Servlet类只负责处理一个请求，若项目中有成百上千个请求需要处理，就需要有成百上千个Servlet类，这样会使得项目中Servlet类的个数暴增；</p> <p>2、在Servlet3.0版本之前，每一个Servlet都需要在web.xml文件中至少做八行配置信息，配置内容多且繁琐。当Servlet特别多时，web.xml配置量太多，不利于团队开发；</p> <p>3、当通过客户端提交参数到服务器，通过Servlet进行接收时，无论数据本身是什么格式，在Servlet中一律按照字符串进行接收，后期需要进行类型转换，复杂类型还需要特殊处理，特别麻烦！</p> <p><code>String value = request.getParameter(String name);</code></p> <p>4、servlet具有容器依赖性，必须放在服务器中运行，不利于单元测试；</p> <p>...</p> <h3 id="springmvc简介"><a href="#springmvc简介" class="header-anchor">#</a> SpringMVC简介</h3> <p>Springmvc是spring框架的一个模块，spring和springmvc无需中间整合层整合</p> <p>Springmvc是一个基于mvc的web框架</p> <h3 id="spring执行原理"><a href="#spring执行原理" class="header-anchor">#</a> spring执行原理</h3> <p><img src="JAVAWEB-NOTE04.assets/14c0c2f53620fb0e29c11170729226f0.png" alt=""></p> <p><code>(1)</code>.用户发送请求 至 前端控制器(DispatcherServlet)；</p> <p>提示：DispatcherServlet的作用：接收请求，调用其它组件处理请求，响应结果，相当于转发器、中央处理器，是整个流程控制的中心</p> <p><code>(2)</code>.前端控制器(DispatcherServlet)收到请求后调用处理器映射器(HandlerMapping)</p> <p>处理器映射器(HandlerMapping)找到具体的Controller(可以根据xml配置、注解进行查找)，并将Controller返回给DispatcherServlet；</p> <p><code>(3)</code>.前端控制器(DispatcherServlet)调用处理器适配器(HandlerAdapter)。处理器适配器经过适配调用具体的Controller；(Controller--&gt; service --&gt; Dao --&gt; 数据库)</p> <p>Controller执行完成后返回ModelAndView，</p> <p>提示：Model(模型数据，即Controller处理的结果，Map)  View(逻辑视图名，即负责展示结果的JSP页面的名字)</p> <p>处理器适配器(HandlerAdapter)将controller执行的结果(ModelAndView)返回给前端控制器(DispatcherServlet)；</p> <p><code>(4)</code>.前端控制器(DispatcherServlet)将执行的结果(ModelAndView)传给视图解析器(ViewReslover)</p> <p>视图解析器(ViewReslover)根据View(逻辑视图名)解析后返回具体JSP页面</p> <p><code>(5)</code>.前端控制器(DispatcherServlet)根据Model对View进行渲染（即将模型数据填充至视图中）；</p> <p>前端控制器(DispatcherServlet)将填充了数据的网页响应给用户。</p> <p>其中整个过程中需要开发人员编写的部分有<strong>Controller</strong>、<strong>Service</strong>、<strong>Dao</strong>、<strong>View；</strong></p> <h2 id="springmvc入门案例"><a href="#springmvc入门案例" class="header-anchor">#</a> springmvc入门案例</h2> <p><strong>需求：</strong></p> <p>(1)通过浏览器访问 <code>http://localhost/项目名称/hello</code> 地址，在控制台输出 &quot;hello springmvc&quot;</p> <p>(2)将请求转向（跳转到） <code>/WEB-INF/pages/home.jsp</code> 页面</p> <h3 id="创建maven-web工程"><a href="#创建maven-web工程" class="header-anchor">#</a> 创建Maven—web工程</h3> <p><strong>1、通过Maven创建web工程</strong></p> <p><img src="JAVAWEB-NOTE04.assets/image-20200410140300719.png" alt="image-20200410140300719"></p> <p><strong>2、在pom.xml中引入springmvc所需jar包</strong>：将下面的配置直接拷贝到pom.xml中的根标签内</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 单元测试 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- SpringMVC的jar包 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.1.3.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- servlet 和 jsp的jar包 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- java对象转换json的工具类 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="在web-xml中配置前端控制器"><a href="#在web-xml中配置前端控制器" class="header-anchor">#</a> 在web.xml中配置前端控制器</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>WebApp_ID<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2.5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 配置springmvc前端控制器, 将所有请求交给springmvc来处理 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token comment">&lt;!-- 配置springmvc核心配置文件的位置，默认Springmvc的配置文件是在WEB-INF目录下，默认的名字为springmvc-servlet.xml，如果要放在其他目录，则需要指定如下配置：
		--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:springmvc-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>		
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 其中的斜杠（/）表示拦截所有请求（除JSP以外）, 所有请求都要经过springmvc前端控制器 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="创建并配置springmvc-config-xml"><a href="#创建并配置springmvc-config-xml" class="header-anchor">#</a> 创建并配置springmvc-config.xml</h3> <p>直接复制下面配置文件的内容即可！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc
						http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd
						http://www.springframework.org/schema/beans
						http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
						http://www.springframework.org/schema/context
          				http://www.springframework.org/schema/context/spring-context-4.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 1.配置前端控制器放行静态资源(html/css/js等，否则静态资源将无法访问) --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span><span class="token punctuation">/&gt;</span></span>
	
	<span class="token comment">&lt;!-- 2.配置注解驱动，用于识别注解（比如@Controller） --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 3.配置需要扫描的包：spring自动去扫描 base-package 下的类，
		如果扫描到的类上有 @Controller、@Service、@Component等注解，
		将会自动将类注册为bean 
	 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com.tedu.controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token comment">&lt;!-- 4.配置内部资源视图解析器
		prefix:配置路径前缀
		suffix:配置文件后缀
	 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/WEB-INF/pages/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
	
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="创建并实现hellocontroller类"><a href="#创建并实现hellocontroller类" class="header-anchor">#</a> 创建并实现HelloController类</h3> <p>1、创建com.tedu.controller.HelloController类</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411120818696.png" alt="image-20200411120818696"></p> <p>2、实现HelloController类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>

<span class="token comment">/* @Controller作用: 表示当前类属于controller层
 * 	同时标识将当前类的对象的创建交给spring容器负责
 * 	http://localhost/day16-springmvc/hello
 */</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
	<span class="token comment">/* @RequestMapping(&quot;/hello&quot;) 用于配置当前方法的访问路径，不能省略，且不能重复！
	 * @RequestMapping注解在当前方法上声明的访问路径, 在当前controller类中不能重复！
	 * 如果controller类上没有访问路径，当前方法上的访问路径在所有controller类中都不能重复！
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span> 
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;hello springmvc....&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//跳转到哪一个路径	/WEB-INF/pages/home.jsp</span>
		<span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="创建并实现home-jsp"><a href="#创建并实现home-jsp" class="header-anchor">#</a> 创建并实现home.jsp</h3> <p>在WEB-INF/pages/目录下，创建home.jsp页面。</p> <p><strong>WEB-INF/pages/home.jsp</strong></p> <div class="language-html extra-class"><pre class="language-html"><code>&lt;%@ page pageEncoding=&quot;UTF-8&quot;%&gt;
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>day16-springmvc...home.jsp....<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="访问测试"><a href="#访问测试" class="header-anchor">#</a> 访问测试</h3> <p>打开浏览器，输入url地址：http://localhost/day16-springmv/hello 地址，访问结果如下：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411120516046.png" alt="image-20200411120516046"></p> <h2 id="springmvc参数绑定"><a href="#springmvc参数绑定" class="header-anchor">#</a> springmvc参数绑定</h2> <p>当项目中引入springmvc框架后，所有的请求流转将由springmvc进行控制，当客户端发送的请求中包含数据（也就是请求参数）时，那么该如何在controller层获取这些参数呢？</p> <p>springmvc会自动的将请求中包含的参数和方法的参数进行匹配，也就是说只要保证，请求中的参数名称和方法中的参数名称相对应（另，参数的格式也要正确），在方法中就可以使用这些参数—即请求中的参数。</p> <h3 id="基本类型参数绑定"><a href="#基本类型参数绑定" class="header-anchor">#</a> 基本类型参数绑定</h3> <p>当需要获取客户端发送过来的少量数据时，可以在Controller中声明的方法上，通过声明方法参数对这些参数一个一个进行接收，具体示例如下：</p> <p><strong>需求：通过浏览器发请求访问Controller，并在请求中携带name、age数据访问服务器，在服务器端的
Controller中获取这些数据。</strong></p> <p>1、在HelloController类中添加testParam1方法，用于接收基本类型的参数，代码实现如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span> <span class="token comment">/* 这个注解表示当前类是属于控制层 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
	<span class="token comment">/* 1、测试springmvc的简单类型参数绑定
	 * ../testParam1?name=张飞&amp;age=20&amp;addr=河北
	 * 如何获取请求中name、age、addr的参数值？
	 * 	request.getParameter(&quot;name&quot;) -- 张飞
	 * 在方法上添加三个同类型、同名的形参分别为 name、age、addr
	 * 用于接收请求中name、age、addr参数的值  */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testParam1&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testParam1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> addr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;name=&quot;</span><span class="token operator">+</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;age=&quot;</span><span class="token operator">+</span>age <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;addr=&quot;</span><span class="token operator">+</span>addr <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、访问HelloController中的testParam1方法，在访问时，注意将name、age、addr参数一起发送给服务器:</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411121233000.png" alt="image-20200411121233000"></p> <p>控制台输出结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411121322974.png" alt="image-20200411121322974"></p> <h3 id="包装类型参数绑定"><a href="#包装类型参数绑定" class="header-anchor">#</a> 包装类型参数绑定</h3> <p>当需要获取客户端发送过来的多个数据时，可以在Controller中声明的方法上，通过声明方法参数对这些数据一个一个进行接收较麻烦，可以在方法上声明对象类型的参数，通过对这些数据统一进行接受，springmvc会自动将接收过来的参数封装在对象中，具体示例如下：</p> <p>1、在HelloController类中添加param2方法，用于接收对象类型的参数，代码实现如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype</span><span class="token punctuation">.</span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span> <span class="token comment">/* 这个注解表示当前类是属于控制层 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
	<span class="token comment">/* 2、测试springmvc的包装类型参数绑定
	 * ../testParam2?name=关羽&amp;age=30&amp;addr=北京
	 * 如何获取请求中name、age、addr的参数值？
	 * 提供一个User类,在类中添加和请求参数同名的属性
	 * 底层通过调用setName、setAge、setAddr方法将参数值封装到User对象中 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testParam2&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testParam2</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;user.name=&quot;</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;user.age=&quot;</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;user.addr=&quot;</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3、创建User类，声明name、age、addr属性，提供对应的set和get方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 封装用户信息
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> addr<span class="token punctuation">;</span>
	
	<span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//无参构造函数</span>
	<span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> addr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>addr <span class="token operator">=</span> addr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//get、set方法</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> age<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> addr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddr</span><span class="token punctuation">(</span><span class="token class-name">String</span> addr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>addr <span class="token operator">=</span> addr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>	
<span class="token punctuation">}</span>
</code></pre></div><p>4、访问HelloController中的param2方法，在访问时，注意将name和age参数一起发送给服务器:</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411125305873.png" alt="image-20200411125305873"></p> <p>控制台输出结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411125340557.png" alt="image-20200411125340557"></p> <h3 id="日期类型参数绑定"><a href="#日期类型参数绑定" class="header-anchor">#</a> 日期类型参数绑定</h3> <p>1、在HelloController类中添加testParam3方法，代码实现如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span> <span class="token comment">/* 这个注解表示当前类是属于控制层 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>	
	<span class="token comment">/* 3、测试springmvc的日期类型参数绑定
	 * ../testParam3?date=2020-4-10 16:40:39	报400错误,表示参数类型不匹配
	 * ../testParam3?date=2020/4/10 16:40:39
	 * 	如何获取请求中date参数的值？
	 * 	springmvc默认是以斜杠接收日期类型的参数, 如果提交的日期就是以斜杠
	 * 	分隔的, springmvc就可以接收这个日期类型的参数, 否则将无法接收
	 * 	如果提交的日期参数就是以横杠分隔, 也可以修改springmvc默认的接收格式
	 * 	改为以横杠分隔!!
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testParam3&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testParam3</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;date=&quot;</span><span class="token operator">+</span>date <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、访问HelloController中的testParam3方法，在访问时，注意将date参数一起发送给服务器:</p> <img src="JAVAWEB-NOTE04.assets/image-20200410165200699.png" alt="image-20200410165200699" style="zoom:80%;"> <p>控制台输出结果为：</p> <img src="JAVAWEB-NOTE04.assets/image-20200410165311287.png" alt="image-20200410165311287" style="zoom:80%;"> <p><strong>常见问题：</strong></p> <p>1、当访问HelloController中的testParam3方法，如果传递给服务器的日期数据是如下格式：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200410165410638.png" alt="image-20200410165410638"></p> <p>从图中可以看出，如果日期参数是 yyyy-MM-dd格式（以横杠分隔）就会出现400错误，其实是因为参数格式匹配错误，由于springmvc默认的日期格式是yyyy/MM/dd（以斜杠分隔），因此如果日期参数不是yyyy/MM/dd 格式，就会出现400错误！！</p> <p><strong>2、解决方案：</strong></p> <p>在springmvc中，提供了@InitBinder注解，用于指定自定义的日期转换格式，因此，我们只需要在Controller类中添加下面的代码即可，在接受日期类型的参数时，会自动按照自定义的日期格式进行转换。</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">/* 自定义日期格式转换器
	 * 将springmvc默认以斜杠(/)分隔日期改为以横杠分隔(-)
	 */</span>
	<span class="token annotation punctuation">@InitBinder</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">InitBinder</span> <span class="token punctuation">(</span><span class="token class-name">ServletRequestDataBinder</span> binder<span class="token punctuation">)</span><span class="token punctuation">{</span>
		binder<span class="token punctuation">.</span><span class="token function">registerCustomEditor</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> 
			<span class="token keyword">new</span> <span class="token class-name">CustomDateEditor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>3、再次测试：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411125752937.png" alt="image-20200411125752937"></p> <p>控制台输出结果为：</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411125827915.png" alt="image-20200411125827915"></p> <h2 id="跳转和乱码处理"><a href="#跳转和乱码处理" class="header-anchor">#</a> 跳转和乱码处理</h2> <h3 id="实现转发-forward"><a href="#实现转发-forward" class="header-anchor">#</a> 实现转发(forward)</h3> <p>在前面request对象的学习中，通过request对象可以实现请求转发（即资源的跳转）。同样的，springmvc也提供了请求转发的方式，具体实现如下：</p> <p>需求：通过浏览器访问 testForward方法，执行testForward方法后，将请求转发到（HelloController）hello， 也就是home.jsp页面。</p> <p>1、在HelloController中，提供testForward方法，代码实现如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 测试请求转发(forward) */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;testForward&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;测试请求转发(forward)...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">&quot;forward:hello&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、打开浏览器，在浏览器中输入：<a href="http://localhost/day16-springmvc/testForward" target="_blank" rel="noopener noreferrer">http://localhost/day16-springmvc/testForward<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>地址，访问效果如下:</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411125952494.png" alt="image-20200411125952494"></p> <p>forward方式相当于:</p> <div class="language-java extra-class"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>转发是一次请求，一次响应；</p> <p>转发后地址栏地址没有发生变化（还是访问testForward的地址）；</p> <p>转发前后的request和response对象也是同一个。</p> <h3 id="实现重定向-redirect"><a href="#实现重定向-redirect" class="header-anchor">#</a> 实现重定向(redirect)</h3> <p>在前面response对象的学习中，通过response对象可以实现请求重定向（即资源的跳转）。</p> <p>同样的，springmvc也提供了请求重定向的方式，具体实现如下：</p> <p>需求：通过浏览器访问 testRedirect方法，执行testRedirect方法后，将请求重定向到
（HelloController）hello， 也就是home.jsp页面。</p> <p>1、在HelloController中，提供testRedirect方法，代码实现如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* 测试请求重定向(redirect) */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;testRedirect&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;测试请求重定向(redirect)...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">&quot;redirect:hello&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、打开浏览器，在浏览器中输入：<a href="http://localhost/day16-springmvc/testRedirect" target="_blank" rel="noopener noreferrer">http://localhost/day16-springmvc/testRedirect<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>地址，访问效果如下:</p> <p><img src="JAVAWEB-NOTE04.assets/image-20200411130114886.png" alt="image-20200411130114886"></p> <p>redirect方式相当于：</p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>重定向是两次请求，两次响应；</p> <p>重定向后地址栏地址发生了变化(变为转发后的地址)；</p> <p>并且在重定向前后，request和response对象不是同一个。</p> <h3 id="乱码处理"><a href="#乱码处理" class="header-anchor">#</a> 乱码处理</h3> <p>在前面的Servlet学习中，我们学习了GET和POST请求参数乱码如何解决。</p> <p>springmvc也提供了解决请求参数乱码的方案，就是在web.xml中加入如下代码（配置请求参数乱码过滤器），可以解决POST提交的中文参数乱码问题！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 配置过滤器,解决POST提交的中文参数乱码问题 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>encodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>UTF8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>encodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Servlet中，两种请求方式乱码解决方案回顾：</p> <p>(1)如果请求方式为<strong>POST</strong>提交，必然会出现乱码，解决方式是在任何获取参数的代码之前，添加如下代码：</p> <div class="language-java extra-class"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>(2)如果请求方式为<strong>GET</strong>提交，tomcat8及之后的版本已经解决了GET提交的中文参数乱码问题，因此不需要处理；在 tomcat7 及之前的版本中，获取GET提交的中文参数仍有乱码，解决方法是：只需要在[tomcat]/conf/server.xml中添加如下配置也可以解决乱码问题。</p> <p><img src="JAVAWEB-NOTE04.assets/31a1d635302b07dcec001a8cb8a27a4f.png" alt=""></p> <h2 id="springmvc响应数据"><a href="#springmvc响应数据" class="header-anchor">#</a> springmvc响应数据</h2> <h3 id="model的使用"><a href="#model的使用" class="header-anchor">#</a> Model的使用</h3> <p>当请求发起访问Controller中的方法时，可以通过参数声明，在方法内使用Model。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/doorList&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doorList</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>Model对象实际上是一个Map集合，例如：往model中添加一个属性</p> <div class="language-java extra-class"><pre class="language-java"><code>model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其中，addAttribute方法会将属性保存到request域中，再通过转发将属性数据带到相应的JSP中，通过${}取出并显示。</p> <p>示例，往Model中添加属性：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testModel&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testModel</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">/* 往Model添加属性 */</span>
	model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;马云&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在home.jsp中取出属性并显示：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>hello springmvc~~~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
	${ name } <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
	${ age }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="扩展内容-4"><a href="#扩展内容-4" class="header-anchor">#</a> 扩展内容</h2> <h3 id="springmvc前端控制器放行静态资源的解决办法"><a href="#springmvc前端控制器放行静态资源的解决办法" class="header-anchor">#</a> springmvc前端控制器放行静态资源的解决办法</h3> <p>在配置SpringMVC开发环境时，会在web.xml文件中配置SpringMVC的前端控制器，将所有请求交给前端控制器处理，因此在url-pattern中配置了斜杠（/）:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 1.配置springmvc前端控制器, 并将所有请求交给springmvc处理 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 配置springmvc核心配置文件的位置，默认Springmvc的配置文件是在WEB-INF目录下，默认的名字为springmvc-servlet.xml，如果要放在其他目录，则需要指定如下配置：
	--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:springmvc-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 斜杠表示拦截所有请求（除JSP以外） --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>url-pattern中配置的斜杠（/）表示将除了JSP以外的其他请求都拦截下来，交给spring的前端控制器来处理。</p> <p>但是这样配置，会将对静态资源的访问也拦截下来，导致访问静态资源时，出现404（资源找不到），因为spring的前端控制器将对静态资源的访问也当成了一个controller请求，去配置对应的映射路径，这当然找不到。</p> <p>比如访问：<a href="http://localhost/day15-springmvc/home.html" target="_blank" rel="noopener noreferrer">http://localhost/day15-springmvc/home.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，由于配置的是斜杠（/），所以此时会拦截静态资源，到controller中匹配路径为/home.html的方法，此时自然是匹配不到的。</p> <p>如果需要访问到静态资源，让前端控制器对静态资源的请求放行。此时可以在springmvc-config.xml文件中添加放行静态资源的配置:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 1.配置前端控制器放行静态资源(html/css/js等，否则静态资源将无法访问) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="applicationcontext-xml没有提示的解决方法"><a href="#applicationcontext-xml没有提示的解决方法" class="header-anchor">#</a> applicationContext.xml没有提示的解决方法</h3> <p>1、配置spring-beans-4.1.xsd文件</p> <p>(1)找到spring-beans-4.1.xsd的文件的位置，例如：</p> <p><img src="JAVAWEB-NOTE04.assets/3526b8f7cb18db7def8c59c6b8f5a8c6.png" alt=""></p> <p>(2)复制下面的url地址：</p> <p>http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</p> <p>(3)在eclipse菜单栏中: window --&gt; Preferences --&gt; 在搜索框中搜索 [ xml ]</p> <p>XML --&gt; XML Catalog --&gt; User Specified Entries --&gt; Add…</p> <p><img src="JAVAWEB-NOTE04.assets/eef68594c0d7b072e09702b3d6289831.png" alt=""></p> <p>(4)在弹出的窗口中:</p> <p><img src="JAVAWEB-NOTE04.assets/10a6f5e3901af4d2fd9cba0d644e00bd.png" alt=""></p> <p>2、配置spring-context-4.0.xsd文件</p> <p>(1)找到spring-context-4.0.xsd的文件的位置，例如：</p> <p><img src="JAVAWEB-NOTE04.assets/f88878c81816bfccdaf534b48ecbf37d.png" alt=""></p> <p>(2)复制下面的url地址：</p> <p>http://www.springframework.org/schema/context/spring-context-4.0.xsd</p> <p>(3)在eclipse菜单栏中: window --&gt; Preferences --&gt; 在搜索框中搜索 [ xml ]</p> <p>XML --&gt; XML Catalog --&gt; User Specified Entries --&gt; Add…</p> <p><img src="JAVAWEB-NOTE04.assets/eef68594c0d7b072e09702b3d6289831.png" alt=""></p> <p>(4)在弹出的窗口中:</p> <p><img src="JAVAWEB-NOTE04.assets/bab1eb1bf264e64de4a3672c96f23e8b.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/JAVA/Sub2/day6-day10/" class="prev">
        上一篇：  Day6-Day10
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26b143c5.js" defer></script><script src="/assets/js/3.c09e7e7a.js" defer></script><script src="/assets/js/2.3613c5bc.js" defer></script><script src="/assets/js/12.88c1b978.js" defer></script>
  </body>
</html>
