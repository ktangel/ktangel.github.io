<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Php for Mac OS | LeoLiuGe Blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="LeoLiu 一个不断尝试新事情 学习新技术的80后">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta property="og:type" content="article">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta name="applicable-device" content="pc,mobile">
    <link rel="preload" href="/assets/css/0.styles.e82247ed.css" as="style"><link rel="preload" href="/assets/js/app.26b143c5.js" as="script"><link rel="preload" href="/assets/js/3.c09e7e7a.js" as="script"><link rel="preload" href="/assets/js/2.3613c5bc.js" as="script"><link rel="preload" href="/assets/js/109.592c15a8.js" as="script"><link rel="prefetch" href="/assets/js/10.8b48a5e6.js"><link rel="prefetch" href="/assets/js/100.00e14632.js"><link rel="prefetch" href="/assets/js/101.e983096c.js"><link rel="prefetch" href="/assets/js/102.cbdc022d.js"><link rel="prefetch" href="/assets/js/103.e0752f6b.js"><link rel="prefetch" href="/assets/js/104.5706802a.js"><link rel="prefetch" href="/assets/js/105.458969e3.js"><link rel="prefetch" href="/assets/js/106.447bee86.js"><link rel="prefetch" href="/assets/js/107.2794a2fc.js"><link rel="prefetch" href="/assets/js/108.69196138.js"><link rel="prefetch" href="/assets/js/11.f4dc73e6.js"><link rel="prefetch" href="/assets/js/110.7f986aa6.js"><link rel="prefetch" href="/assets/js/111.aeae13db.js"><link rel="prefetch" href="/assets/js/112.17891637.js"><link rel="prefetch" href="/assets/js/113.73acce45.js"><link rel="prefetch" href="/assets/js/114.1f735019.js"><link rel="prefetch" href="/assets/js/115.02624466.js"><link rel="prefetch" href="/assets/js/116.86bd99e5.js"><link rel="prefetch" href="/assets/js/117.101af32f.js"><link rel="prefetch" href="/assets/js/118.8c3de42b.js"><link rel="prefetch" href="/assets/js/119.48c4ce96.js"><link rel="prefetch" href="/assets/js/12.88c1b978.js"><link rel="prefetch" href="/assets/js/120.a9068d51.js"><link rel="prefetch" href="/assets/js/121.34d97451.js"><link rel="prefetch" href="/assets/js/122.e3d20fd5.js"><link rel="prefetch" href="/assets/js/123.b15a9909.js"><link rel="prefetch" href="/assets/js/124.16ddbd07.js"><link rel="prefetch" href="/assets/js/125.d42035bf.js"><link rel="prefetch" href="/assets/js/126.97cbcdbb.js"><link rel="prefetch" href="/assets/js/127.269f92d5.js"><link rel="prefetch" href="/assets/js/128.86408adc.js"><link rel="prefetch" href="/assets/js/129.7d45a6dd.js"><link rel="prefetch" href="/assets/js/13.03701fb1.js"><link rel="prefetch" href="/assets/js/130.988c9796.js"><link rel="prefetch" href="/assets/js/131.a843d739.js"><link rel="prefetch" href="/assets/js/132.628877b5.js"><link rel="prefetch" href="/assets/js/133.573adea9.js"><link rel="prefetch" href="/assets/js/134.66e89387.js"><link rel="prefetch" href="/assets/js/135.e6cef2cb.js"><link rel="prefetch" href="/assets/js/136.e5e5efbe.js"><link rel="prefetch" href="/assets/js/137.a14b0855.js"><link rel="prefetch" href="/assets/js/138.5e728b85.js"><link rel="prefetch" href="/assets/js/139.c9b1d1b4.js"><link rel="prefetch" href="/assets/js/14.a87cadd4.js"><link rel="prefetch" href="/assets/js/140.f7aaf293.js"><link rel="prefetch" href="/assets/js/141.96738168.js"><link rel="prefetch" href="/assets/js/142.952e9d63.js"><link rel="prefetch" href="/assets/js/143.6317df9d.js"><link rel="prefetch" href="/assets/js/144.4818c9d9.js"><link rel="prefetch" href="/assets/js/145.eafe018d.js"><link rel="prefetch" href="/assets/js/146.bf88a1f1.js"><link rel="prefetch" href="/assets/js/147.b0ef29a6.js"><link rel="prefetch" href="/assets/js/148.7e1bb92d.js"><link rel="prefetch" href="/assets/js/149.c1b76a69.js"><link rel="prefetch" href="/assets/js/15.d60df077.js"><link rel="prefetch" href="/assets/js/150.1dbe87cb.js"><link rel="prefetch" href="/assets/js/151.58e172dd.js"><link rel="prefetch" href="/assets/js/152.5e45a717.js"><link rel="prefetch" href="/assets/js/153.dd50b2aa.js"><link rel="prefetch" href="/assets/js/154.1f10cdd3.js"><link rel="prefetch" href="/assets/js/155.97fd8c23.js"><link rel="prefetch" href="/assets/js/156.19009773.js"><link rel="prefetch" href="/assets/js/157.60c6b1cf.js"><link rel="prefetch" href="/assets/js/158.602e7f89.js"><link rel="prefetch" href="/assets/js/159.c28a473f.js"><link rel="prefetch" href="/assets/js/16.b3578a43.js"><link rel="prefetch" href="/assets/js/17.53f42748.js"><link rel="prefetch" href="/assets/js/18.83948d00.js"><link rel="prefetch" href="/assets/js/19.f44dde2a.js"><link rel="prefetch" href="/assets/js/20.89a422c0.js"><link rel="prefetch" href="/assets/js/21.6a0ec22b.js"><link rel="prefetch" href="/assets/js/22.8541a381.js"><link rel="prefetch" href="/assets/js/23.3933c13b.js"><link rel="prefetch" href="/assets/js/24.712ae246.js"><link rel="prefetch" href="/assets/js/25.cffdf98e.js"><link rel="prefetch" href="/assets/js/26.2f5c6080.js"><link rel="prefetch" href="/assets/js/27.5f6bfa07.js"><link rel="prefetch" href="/assets/js/28.664913a5.js"><link rel="prefetch" href="/assets/js/29.ac47bba8.js"><link rel="prefetch" href="/assets/js/30.1cadedaf.js"><link rel="prefetch" href="/assets/js/31.4f8b7ea2.js"><link rel="prefetch" href="/assets/js/32.f7202c8c.js"><link rel="prefetch" href="/assets/js/33.1680bf0c.js"><link rel="prefetch" href="/assets/js/34.198aa9b0.js"><link rel="prefetch" href="/assets/js/35.1a72632a.js"><link rel="prefetch" href="/assets/js/36.837cb2f7.js"><link rel="prefetch" href="/assets/js/37.e471763d.js"><link rel="prefetch" href="/assets/js/38.d0881148.js"><link rel="prefetch" href="/assets/js/39.309026eb.js"><link rel="prefetch" href="/assets/js/4.d0490c7c.js"><link rel="prefetch" href="/assets/js/40.e24f783b.js"><link rel="prefetch" href="/assets/js/41.32829608.js"><link rel="prefetch" href="/assets/js/42.4510f96e.js"><link rel="prefetch" href="/assets/js/43.eb4bd008.js"><link rel="prefetch" href="/assets/js/44.1a1dc587.js"><link rel="prefetch" href="/assets/js/45.f7d10c65.js"><link rel="prefetch" href="/assets/js/46.35943b44.js"><link rel="prefetch" href="/assets/js/47.c6417c68.js"><link rel="prefetch" href="/assets/js/48.d49dead4.js"><link rel="prefetch" href="/assets/js/49.132da5d3.js"><link rel="prefetch" href="/assets/js/5.7950ab83.js"><link rel="prefetch" href="/assets/js/50.c75f213d.js"><link rel="prefetch" href="/assets/js/51.debfae61.js"><link rel="prefetch" href="/assets/js/52.fa9d27ed.js"><link rel="prefetch" href="/assets/js/53.d4a4a066.js"><link rel="prefetch" href="/assets/js/54.ce0b57e9.js"><link rel="prefetch" href="/assets/js/55.cb30724c.js"><link rel="prefetch" href="/assets/js/56.aecc7992.js"><link rel="prefetch" href="/assets/js/57.fe599b61.js"><link rel="prefetch" href="/assets/js/58.edb098e1.js"><link rel="prefetch" href="/assets/js/59.1bd6ce1e.js"><link rel="prefetch" href="/assets/js/6.607a91ef.js"><link rel="prefetch" href="/assets/js/60.85b29cc0.js"><link rel="prefetch" href="/assets/js/61.471d6bc0.js"><link rel="prefetch" href="/assets/js/62.6fc7e56e.js"><link rel="prefetch" href="/assets/js/63.0e9015b4.js"><link rel="prefetch" href="/assets/js/64.0e414f75.js"><link rel="prefetch" href="/assets/js/65.f2501d0c.js"><link rel="prefetch" href="/assets/js/66.60b00821.js"><link rel="prefetch" href="/assets/js/67.cd173b0e.js"><link rel="prefetch" href="/assets/js/68.7c3c6dc5.js"><link rel="prefetch" href="/assets/js/69.fe6f9a3f.js"><link rel="prefetch" href="/assets/js/7.42b15925.js"><link rel="prefetch" href="/assets/js/70.60803f91.js"><link rel="prefetch" href="/assets/js/71.7cfae612.js"><link rel="prefetch" href="/assets/js/72.eb9e1c69.js"><link rel="prefetch" href="/assets/js/73.cd435e08.js"><link rel="prefetch" href="/assets/js/74.74deecbb.js"><link rel="prefetch" href="/assets/js/75.2fd64052.js"><link rel="prefetch" href="/assets/js/76.ada03ff4.js"><link rel="prefetch" href="/assets/js/77.905af665.js"><link rel="prefetch" href="/assets/js/78.7276e0d4.js"><link rel="prefetch" href="/assets/js/79.97d45520.js"><link rel="prefetch" href="/assets/js/8.aa03d242.js"><link rel="prefetch" href="/assets/js/80.128624f8.js"><link rel="prefetch" href="/assets/js/81.1b9a9fb8.js"><link rel="prefetch" href="/assets/js/82.b3f1cec2.js"><link rel="prefetch" href="/assets/js/83.f5b8d8b4.js"><link rel="prefetch" href="/assets/js/84.a6d7fa4c.js"><link rel="prefetch" href="/assets/js/85.e8da2271.js"><link rel="prefetch" href="/assets/js/86.ea5bbf66.js"><link rel="prefetch" href="/assets/js/87.3727b949.js"><link rel="prefetch" href="/assets/js/88.e2c7d687.js"><link rel="prefetch" href="/assets/js/89.6c1aa203.js"><link rel="prefetch" href="/assets/js/9.259fe5ea.js"><link rel="prefetch" href="/assets/js/90.270b8355.js"><link rel="prefetch" href="/assets/js/91.56eec24d.js"><link rel="prefetch" href="/assets/js/92.56f04099.js"><link rel="prefetch" href="/assets/js/93.f4f8c9f0.js"><link rel="prefetch" href="/assets/js/94.0d070675.js"><link rel="prefetch" href="/assets/js/95.8122b7ce.js"><link rel="prefetch" href="/assets/js/96.1666e281.js"><link rel="prefetch" href="/assets/js/97.e4f6c281.js"><link rel="prefetch" href="/assets/js/98.70b7aa4c.js"><link rel="prefetch" href="/assets/js/99.9222f0c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e82247ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LeoLiuGe Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php-for-mac-os"><a href="#php-for-mac-os" class="header-anchor">#</a> Php for Mac OS</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <h3 id="php的运行模式"><a href="#php的运行模式" class="header-anchor">#</a> PHP的运行模式</h3> <p>公认的PHP运行模式有4种
1 CGI通用网关接口模式
2 FAST-CGI模式
3 CLI命令行模式
4 模块模式</p> <p>前两者涉及到协议升级，也就是常说的php-fpm，模块模式涉及到服务器与协议的搭配，比如Apache，nginxCLI命令行模式就是shell命令行，<code>php -v</code>;这样的命令理解这个概念，有助于判断当前运行的PHP实际版本是哪一个。 进而理解 <code>php -v</code>;结果和 网页<code>phpinfo()</code> 执行结果不一样的根本原因。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>php-fpm -v
</code></pre></div><h2 id="php安装"><a href="#php安装" class="header-anchor">#</a> php安装</h2> <h3 id="php-fpm"><a href="#php-fpm" class="header-anchor">#</a> php-fpm</h3> <h3 id="安装mongodb扩展"><a href="#安装mongodb扩展" class="header-anchor">#</a> 安装mongodb扩展</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">which</span> pecl
<span class="token function">sudo</span> /usr/local/opt/php@7.2/bin/pecl  <span class="token function">install</span> mongodb
Build process completed successfully
Installing <span class="token string">'/usr/local/Cellar/php@7.2/7.2.14/pecl/20170718/mongodb.so'</span>
<span class="token function">install</span> ok: channel://pecl.php.net/mongodb-1.5.3
Extension mongodb enabled <span class="token keyword">in</span> php.ini
</code></pre></div><p>YII2 <a href="https://packagist.org/packages/yiisoft/yii2-mongodb" target="_blank" rel="noopener noreferrer">MongoDb扩展<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;
yiisoft/yii2-mongodb&quot;: &quot;~2.1.0&quot; 2.1.0 是一个版本节点，之前使用老的mogo驱动。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>php -m <span class="token operator">|</span> <span class="token function">grep</span> mongodb
</code></pre></div><p>最后查了一圈资料发现 这个<a href="https://www.runoob.com/mongodb/php7-mongdb-tutorial.html" target="_blank" rel="noopener noreferrer">网址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>下的安装教程挺实用的，还是依靠pecl安装。</p> <h3 id="安装redis扩展"><a href="#安装redis扩展" class="header-anchor">#</a> 安装redis扩展</h3> <p>php7安装redis扩展</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> /usr/local/opt/php@7.2/bin/pecl  <span class="token function">install</span>  igbinary
<span class="token function">sudo</span> /usr/local/opt/php@7.2/bin/pecl  <span class="token function">install</span> redis

Build process completed successfully
Installing <span class="token string">'/usr/local/Cellar/php@7.2/7.2.14/pecl/20170718/redis.so'</span>
<span class="token function">install</span> ok: channel://pecl.php.net/redis-4.2.0
Extension redis enabled <span class="token keyword">in</span> php.ini
</code></pre></div><h2 id="版本控制"><a href="#版本控制" class="header-anchor">#</a> 版本控制</h2> <h3 id="brew-php-switcher"><a href="#brew-php-switcher" class="header-anchor">#</a> brew-php-switcher</h3> <p>brew-php-switcher是一个php环境版本切换工具，对通过brew安装的php版本进行切换。
<a href="https://github.com/philcook/brew-php-switcher" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>作为php版本切换管理工具，brew-php-switcher与php version功能一致，可惜php version已经放弃使用，对于mac用户，只能选择brew-php-switcher作为版本切换工具。</p> <div class="custom-block warning"><p>brew 不提供5.6的安装源了，所以brew-php-switcher也无法实现5.6的切换了。</p></div> <h4 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>brew <span class="token function">install</span> brew-php-switcher
</code></pre></div><p>基本使用</p> <p>brew-php-switcher +版本号</p> <div class="language-sh extra-class"><pre class="language-sh"><code>brew-php-switcher 
usage: brew-php-switcher version <span class="token punctuation">[</span>-s<span class="token operator">|</span>-s<span class="token operator">=</span>*<span class="token punctuation">]</span> <span class="token punctuation">[</span>-c<span class="token operator">=</span>*<span class="token punctuation">]</span>
    version    one of: <span class="token number">7.0</span>,7.1,7.2,7.3
    -s        skip change of mod_php on apache
    -s<span class="token operator">=</span>*      skip change of mod_php on apache or valet restart i.e <span class="token punctuation">(</span>apache<span class="token operator">|</span>valet,apache<span class="token operator">|</span>valet<span class="token punctuation">)</span>
    -c<span class="token operator">=</span>*      switch a specific config <span class="token punctuation">(</span>apache<span class="token operator">|</span>valet,apache<span class="token operator">|</span>valet
如切换7.2版本brew-php-switcher   <span class="token number">7.2</span>
Switching to php@7.2
Switching your shell
Unlinking /usr/local/Cellar/php@5.6/5.6.38<span class="token punctuation">..</span>. <span class="token number">25</span> symlinks removed
Unlinking /usr/local/Cellar/php@7.2/7.2.18<span class="token punctuation">..</span>. <span class="token number">0</span> symlinks removed
Unlinking /usr/local/Cellar/php/7.3.5<span class="token punctuation">..</span>. <span class="token number">0</span> symlinks removed
Linking /usr/local/Cellar/php@7.2/7.2.18<span class="token punctuation">..</span>. <span class="token number">25</span> symlinks created
If you need to have this software first <span class="token keyword">in</span> your <span class="token environment constant">PATH</span> instead consider running:
  <span class="token builtin class-name">echo</span> <span class="token string">'export PATH=&quot;/usr/local/opt/php@7.2/bin:<span class="token environment constant">$PATH</span>&quot;'</span> <span class="token operator">&gt;&gt;</span> ~/.bash_profile
  <span class="token builtin class-name">echo</span> <span class="token string">'export PATH=&quot;/usr/local/opt/php@7.2/sbin:<span class="token environment constant">$PATH</span>&quot;'</span> <span class="token operator">&gt;&gt;</span> ~/.bash_profile

</code></pre></div><p>按照以上提示修改 环境变量并且 <code>source ~/.bash_profile</code>生效之后执行<code>php -v</code>,控制台php命令生效(cli).</p> <div class="language-sh extra-class"><pre class="language-sh"><code>php -v<span class="token punctuation">;</span>
PHP <span class="token number">7.2</span>.18 <span class="token punctuation">(</span>cli<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: May <span class="token number">22</span> <span class="token number">2019</span> 00:08:35<span class="token punctuation">)</span> <span class="token punctuation">(</span> NTS <span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1997</span>-2018 The PHP Group
Zend Engine v3.2.0, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1998</span>-2018 Zend Technologies
    with Zend OPcache v7.2.18, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1999</span>-2018, by Zend Technologies
</code></pre></div><p>执行<code>php-fpm -v;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>php-fpm -v<span class="token punctuation">;</span>
PHP <span class="token number">7.2</span>.18 <span class="token punctuation">(</span>fpm-fcgi<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: May <span class="token number">22</span> <span class="token number">2019</span> 00:08:38<span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1997</span>-2018 The PHP Group
Zend Engine v3.2.0, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1998</span>-2018 Zend Technologies
    with Zend OPcache v7.2.18, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1999</span>-2018, by Zend Technologies
</code></pre></div><h4 id="查看软连接"><a href="#查看软连接" class="header-anchor">#</a> 查看软连接</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /usr/local/opt/php@7.2/sbin/local/optls -l
lrwxr-xr-x  <span class="token number">1</span>  admin  <span class="token number">19</span>  <span class="token number">6</span>  <span class="token number">2</span> 06:21 php -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/Cellar/php/7.3.5
lrwxr-xr-x  <span class="token number">1</span>  admin  <span class="token number">32</span>  <span class="token number">3</span> <span class="token number">20</span> <span class="token number">16</span>:07 php-code-sniffer -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/Cellar/php-code-sniffer/3.4.1
lrwxr-xr-x  <span class="token number">1</span>  admin  <span class="token number">24</span>  <span class="token number">5</span> <span class="token number">28</span> 09:25 php@5.6 -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/Cellar/php@5.6/5.6.38
lrwxr-xr-x  <span class="token number">1</span>  admin  <span class="token number">24</span>  <span class="token number">6</span>  <span class="token number">2</span> 05:54 php@7.2 -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/Cellar/php@7.2/7.2.18
lrwxr-xr-x  <span class="token number">1</span>  admin  <span class="token number">19</span>  <span class="token number">6</span>  <span class="token number">2</span> 06:21 php@7.3 -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/Cellar/php/7.3.5
</code></pre></div><h4 id="初步理解bash-profile"><a href="#初步理解bash-profile" class="header-anchor">#</a> 初步理解bash_profile</h4> <p>配置文件mac环境下，自定义安装的软件都会在 <code>/usr/local/Cellar</code>路径下，当安装软件与系统原有软件相互冲突时，比如Python2.7与python3.n，PHP5.6与PHP7.n, 就需要指定默认使用哪个版本。</p> <p>系统配置文件<code>~/.bash_profile</code>---通过修改<code>~/.bash_profile</code>，使系统识别默认的Python版本为3.7</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token string">&quot;/usr/local/Cellar/python/3.7.0/bin/python3.7&quot;</span>
</code></pre></div><p>命令生效</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">source</span>  ~/.bash_profilePHP7
</code></pre></div><h2 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h2> <h3 id="php服务"><a href="#php服务" class="header-anchor">#</a> PHP服务</h3> <p>服务上文中提到 brew services显示两个php服务，我们可以使用下边的命令依次关闭，检验web服务识别的是哪个PHP版本</p> <div class="language-sh extra-class"><pre class="language-sh"><code>brew services stop php
brew services stop php@7.2
</code></pre></div><p>分别使用<code>phpinfo()</code>查看当前的运行版本，当php服务全部关闭时，网页会直接显示<code>502</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>brew services restart php
</code></pre></div><h3 id="php查看进程"><a href="#php查看进程" class="header-anchor">#</a> php查看进程</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> php-fpm
brew services start php@7.2
If you need to have php@7.2 first <span class="token keyword">in</span> your <span class="token environment constant">PATH</span> run:
  <span class="token builtin class-name">echo</span> <span class="token string">'export PATH=&quot;/usr/local/opt/php@7.2/bin:<span class="token environment constant">$PATH</span>&quot;'</span> <span class="token operator">&gt;&gt;</span> ~/.bash_profile
  <span class="token builtin class-name">echo</span> <span class="token string">'export PATH=&quot;/usr/local/opt/php@7.2/sbin:<span class="token environment constant">$PATH</span>&quot;'</span> <span class="token operator">&gt;&gt;</span> ~/.bash_profile
You can also run <span class="token variable"><span class="token variable">`</span>php --ini<span class="token variable">`</span></span> inside terminal to see <span class="token function">which</span> files are used by PHP <span class="token keyword">in</span> CLI mode.
</code></pre></div><h3 id="查看php-ini配置文件路径"><a href="#查看php-ini配置文件路径" class="header-anchor">#</a> 查看<code>php ini</code>配置文件路径</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>php -i <span class="token operator">|</span> <span class="token function">grep</span> php.ini
<span class="token comment">#输出</span>
Configuration File <span class="token punctuation">(</span>php.ini<span class="token punctuation">)</span> Path <span class="token operator">=</span><span class="token operator">&gt;</span> /usr/local/etc/php/7.2
Loaded Configuration File <span class="token operator">=</span><span class="token operator">&gt;</span> /usr/local/etc/php/7.2/php.ini
</code></pre></div><h3 id="查看pecl路径"><a href="#查看pecl路径" class="header-anchor">#</a> 查看pecl路径</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">which</span> pecl
<span class="token comment"># 输出</span>
/usr/local/opt/php@7.2/bin/pecl
</code></pre></div><h3 id="查看通过brew安装的服务列表"><a href="#查看通过brew安装的服务列表" class="header-anchor">#</a> 查看通过brew安装的服务列表</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>brew services list
</code></pre></div><h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <h3 id="php-fpm配置"><a href="#php-fpm配置" class="header-anchor">#</a> php-fpm配置</h3> <h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <h2 id="gd库"><a href="#gd库" class="header-anchor">#</a> GD库</h2> <h3 id="freetype"><a href="#freetype" class="header-anchor">#</a> FreeType</h3> <p><a href="https://www.freetype.org/index.html" target="_blank" rel="noopener noreferrer">FreeType 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://download.savannah.gnu.org/releases/freetype/" target="_blank" rel="noopener noreferrer">FreeType 包列表<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>下载</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">curl</span> -O http://download.savannah.gnu.org/releases/freetype/freetype-2.4.4.tar.bz2
<span class="token comment"># 解压安装</span>
<span class="token function">tar</span> -zxf file.tar.gz
<span class="token builtin class-name">cd</span> <span class="token function">file</span>
<span class="token function">sudo</span> ./install

</code></pre></div><p>刷新<code>phpinfo()</code> 或执行命令 <code>php -m</code>;</p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="连接mysql数据库出错"><a href="#连接mysql数据库出错" class="header-anchor">#</a> 连接mysql数据库出错</h3> <div class="custom-block tip"><p class="custom-block-title">错误代码：</p> <p>SQLSTATE[HY000] [2002]  No such file or directory</p></div> <p>第一次在PHP中使用<code>mysqli()</code>函数建立与MySql的连接时，返回了上述错误信息，是配置文件<code>php.ini</code>的问题，需要做如下修改来开启mysqli扩展：</p> <p>同样在<code>/etc/php.ini</code>文件中，找到以下三项，并做修改后如下：</p> <div class="language-conf extra-class"><pre class="language-text"><code>mysql.default_socket = /tmp/mysql.sock

pdo_mysql.default_socket= /tmp/mysql.sock

mysqli.default_socket =/tmp/mysql.sock
</code></pre></div><p>如果第一次配置php,<code>/etc</code>目录下无<code>php.ini</code>,另一个默认文件<code>php.ini.default</code>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /etc
<span class="token function">sudo</span> <span class="token function">cp</span> php.ini.default php.ini
</code></pre></div><h3 id="call-to-undefined-function"><a href="#call-to-undefined-function" class="header-anchor">#</a> Call to undefined function</h3> <h4 id="imagettftext"><a href="#imagettftext" class="header-anchor">#</a> imagettftext()</h4> <p>thinkphp 验证码在 macOS Sierra 10.12 上无法显示，提示下面的错误：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>Call to undefined <span class="token keyword">function</span> think<span class="token punctuation">\</span>captcha<span class="token punctuation">\</span>imagettftext<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 或：</span>
Call to undefined <span class="token keyword">function</span> Think<span class="token punctuation">\</span>imagettftext<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>首先确定该问题为缺失 <a href="https://link.jianshu.com/?t=https://www.freetype.org/index.html" target="_blank" rel="noopener noreferrer">FreeType<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 扩展引起的，查看系统信息（phpinfo），找到 gd 项，查看有无 <code>phpinfo</code> 四项，如无，说明 FreeType 未安装或未完整安装。</p> <p>方案一：https://php-osx.liip.ch 一句话脚本(One Line Installation)</p> <p>为系统 GD 库安装 FreeType 解决问题，打开终端输入：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">curl</span> -s http://php-osx.liip.ch/install.sh <span class="token operator">|</span> <span class="token function">bash</span> -s <span class="token number">5.6</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">这里的 5.6 对应本机的 PHP 版本</p> <p>这个方案缺点是下载过程比较久，容易因网络问题安装失败；</p></div> <p>方案二
重新编译</p> <div class="language-sh extra-class"><pre class="language-sh"><code>./configure --prefix<span class="token operator">=</span>/usr/local/php/7.2 --with-config-file-path<span class="token operator">=</span>/usr/local/etc/php/7.2 --with-config-file-scan-dir<span class="token operator">=</span>/usr/local/etc/php/7.2/conf.d --enable-fpm --with-fpm-user<span class="token operator">=</span>www --with-fpm-group<span class="token operator">=</span>www --with-mysqli --with-pdo-mysql --with-iconv-dir<span class="token operator">=</span>/usr/local --enable-short-tags --with-zlib --with-libxml-dir<span class="token operator">=</span>/usr/bin/xml2-config --enable-xml --disable-rpath --enable-bcmath --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --with-mcrypt-dir<span class="token operator">=</span>/usr/local/Cellar/mcrypt/2.6.8/ --with-gd --with-openssl<span class="token operator">=</span>/usr/local/opt/openssl --with-mhash --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --disable-fileinfo --enable-maintainer-zts --enable-mysqlnd --with-freetype-dir<span class="token operator">=</span>/usr/local/Cellar/freetype/2.9.1/
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26b143c5.js" defer></script><script src="/assets/js/3.c09e7e7a.js" defer></script><script src="/assets/js/2.3613c5bc.js" defer></script><script src="/assets/js/109.592c15a8.js" defer></script>
  </body>
</html>
