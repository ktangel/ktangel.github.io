<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux 使用手册 | LeoLiuGe Blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="LeoLiu 一个不断尝试新事情 学习新技术的80后">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta property="og:type" content="article">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta name="applicable-device" content="pc,mobile">
    <link rel="preload" href="/assets/css/0.styles.e82247ed.css" as="style"><link rel="preload" href="/assets/js/app.26b143c5.js" as="script"><link rel="preload" href="/assets/js/3.c09e7e7a.js" as="script"><link rel="preload" href="/assets/js/2.3613c5bc.js" as="script"><link rel="preload" href="/assets/js/123.b15a9909.js" as="script"><link rel="prefetch" href="/assets/js/10.8b48a5e6.js"><link rel="prefetch" href="/assets/js/100.00e14632.js"><link rel="prefetch" href="/assets/js/101.e983096c.js"><link rel="prefetch" href="/assets/js/102.cbdc022d.js"><link rel="prefetch" href="/assets/js/103.e0752f6b.js"><link rel="prefetch" href="/assets/js/104.5706802a.js"><link rel="prefetch" href="/assets/js/105.458969e3.js"><link rel="prefetch" href="/assets/js/106.447bee86.js"><link rel="prefetch" href="/assets/js/107.2794a2fc.js"><link rel="prefetch" href="/assets/js/108.69196138.js"><link rel="prefetch" href="/assets/js/109.592c15a8.js"><link rel="prefetch" href="/assets/js/11.f4dc73e6.js"><link rel="prefetch" href="/assets/js/110.7f986aa6.js"><link rel="prefetch" href="/assets/js/111.aeae13db.js"><link rel="prefetch" href="/assets/js/112.17891637.js"><link rel="prefetch" href="/assets/js/113.73acce45.js"><link rel="prefetch" href="/assets/js/114.1f735019.js"><link rel="prefetch" href="/assets/js/115.02624466.js"><link rel="prefetch" href="/assets/js/116.86bd99e5.js"><link rel="prefetch" href="/assets/js/117.101af32f.js"><link rel="prefetch" href="/assets/js/118.8c3de42b.js"><link rel="prefetch" href="/assets/js/119.48c4ce96.js"><link rel="prefetch" href="/assets/js/12.88c1b978.js"><link rel="prefetch" href="/assets/js/120.a9068d51.js"><link rel="prefetch" href="/assets/js/121.34d97451.js"><link rel="prefetch" href="/assets/js/122.e3d20fd5.js"><link rel="prefetch" href="/assets/js/124.16ddbd07.js"><link rel="prefetch" href="/assets/js/125.d42035bf.js"><link rel="prefetch" href="/assets/js/126.97cbcdbb.js"><link rel="prefetch" href="/assets/js/127.269f92d5.js"><link rel="prefetch" href="/assets/js/128.86408adc.js"><link rel="prefetch" href="/assets/js/129.7d45a6dd.js"><link rel="prefetch" href="/assets/js/13.03701fb1.js"><link rel="prefetch" href="/assets/js/130.988c9796.js"><link rel="prefetch" href="/assets/js/131.a843d739.js"><link rel="prefetch" href="/assets/js/132.628877b5.js"><link rel="prefetch" href="/assets/js/133.573adea9.js"><link rel="prefetch" href="/assets/js/134.66e89387.js"><link rel="prefetch" href="/assets/js/135.e6cef2cb.js"><link rel="prefetch" href="/assets/js/136.e5e5efbe.js"><link rel="prefetch" href="/assets/js/137.a14b0855.js"><link rel="prefetch" href="/assets/js/138.5e728b85.js"><link rel="prefetch" href="/assets/js/139.c9b1d1b4.js"><link rel="prefetch" href="/assets/js/14.a87cadd4.js"><link rel="prefetch" href="/assets/js/140.f7aaf293.js"><link rel="prefetch" href="/assets/js/141.96738168.js"><link rel="prefetch" href="/assets/js/142.952e9d63.js"><link rel="prefetch" href="/assets/js/143.6317df9d.js"><link rel="prefetch" href="/assets/js/144.4818c9d9.js"><link rel="prefetch" href="/assets/js/145.eafe018d.js"><link rel="prefetch" href="/assets/js/146.bf88a1f1.js"><link rel="prefetch" href="/assets/js/147.b0ef29a6.js"><link rel="prefetch" href="/assets/js/148.7e1bb92d.js"><link rel="prefetch" href="/assets/js/149.c1b76a69.js"><link rel="prefetch" href="/assets/js/15.d60df077.js"><link rel="prefetch" href="/assets/js/150.1dbe87cb.js"><link rel="prefetch" href="/assets/js/151.58e172dd.js"><link rel="prefetch" href="/assets/js/152.5e45a717.js"><link rel="prefetch" href="/assets/js/153.dd50b2aa.js"><link rel="prefetch" href="/assets/js/154.1f10cdd3.js"><link rel="prefetch" href="/assets/js/155.97fd8c23.js"><link rel="prefetch" href="/assets/js/156.19009773.js"><link rel="prefetch" href="/assets/js/157.60c6b1cf.js"><link rel="prefetch" href="/assets/js/158.602e7f89.js"><link rel="prefetch" href="/assets/js/159.c28a473f.js"><link rel="prefetch" href="/assets/js/16.b3578a43.js"><link rel="prefetch" href="/assets/js/17.53f42748.js"><link rel="prefetch" href="/assets/js/18.83948d00.js"><link rel="prefetch" href="/assets/js/19.f44dde2a.js"><link rel="prefetch" href="/assets/js/20.89a422c0.js"><link rel="prefetch" href="/assets/js/21.6a0ec22b.js"><link rel="prefetch" href="/assets/js/22.8541a381.js"><link rel="prefetch" href="/assets/js/23.3933c13b.js"><link rel="prefetch" href="/assets/js/24.712ae246.js"><link rel="prefetch" href="/assets/js/25.cffdf98e.js"><link rel="prefetch" href="/assets/js/26.2f5c6080.js"><link rel="prefetch" href="/assets/js/27.5f6bfa07.js"><link rel="prefetch" href="/assets/js/28.664913a5.js"><link rel="prefetch" href="/assets/js/29.ac47bba8.js"><link rel="prefetch" href="/assets/js/30.1cadedaf.js"><link rel="prefetch" href="/assets/js/31.4f8b7ea2.js"><link rel="prefetch" href="/assets/js/32.f7202c8c.js"><link rel="prefetch" href="/assets/js/33.1680bf0c.js"><link rel="prefetch" href="/assets/js/34.198aa9b0.js"><link rel="prefetch" href="/assets/js/35.1a72632a.js"><link rel="prefetch" href="/assets/js/36.837cb2f7.js"><link rel="prefetch" href="/assets/js/37.e471763d.js"><link rel="prefetch" href="/assets/js/38.d0881148.js"><link rel="prefetch" href="/assets/js/39.309026eb.js"><link rel="prefetch" href="/assets/js/4.d0490c7c.js"><link rel="prefetch" href="/assets/js/40.e24f783b.js"><link rel="prefetch" href="/assets/js/41.32829608.js"><link rel="prefetch" href="/assets/js/42.4510f96e.js"><link rel="prefetch" href="/assets/js/43.eb4bd008.js"><link rel="prefetch" href="/assets/js/44.1a1dc587.js"><link rel="prefetch" href="/assets/js/45.f7d10c65.js"><link rel="prefetch" href="/assets/js/46.35943b44.js"><link rel="prefetch" href="/assets/js/47.c6417c68.js"><link rel="prefetch" href="/assets/js/48.d49dead4.js"><link rel="prefetch" href="/assets/js/49.132da5d3.js"><link rel="prefetch" href="/assets/js/5.7950ab83.js"><link rel="prefetch" href="/assets/js/50.c75f213d.js"><link rel="prefetch" href="/assets/js/51.debfae61.js"><link rel="prefetch" href="/assets/js/52.fa9d27ed.js"><link rel="prefetch" href="/assets/js/53.d4a4a066.js"><link rel="prefetch" href="/assets/js/54.ce0b57e9.js"><link rel="prefetch" href="/assets/js/55.cb30724c.js"><link rel="prefetch" href="/assets/js/56.aecc7992.js"><link rel="prefetch" href="/assets/js/57.fe599b61.js"><link rel="prefetch" href="/assets/js/58.edb098e1.js"><link rel="prefetch" href="/assets/js/59.1bd6ce1e.js"><link rel="prefetch" href="/assets/js/6.607a91ef.js"><link rel="prefetch" href="/assets/js/60.85b29cc0.js"><link rel="prefetch" href="/assets/js/61.471d6bc0.js"><link rel="prefetch" href="/assets/js/62.6fc7e56e.js"><link rel="prefetch" href="/assets/js/63.0e9015b4.js"><link rel="prefetch" href="/assets/js/64.0e414f75.js"><link rel="prefetch" href="/assets/js/65.f2501d0c.js"><link rel="prefetch" href="/assets/js/66.60b00821.js"><link rel="prefetch" href="/assets/js/67.cd173b0e.js"><link rel="prefetch" href="/assets/js/68.7c3c6dc5.js"><link rel="prefetch" href="/assets/js/69.fe6f9a3f.js"><link rel="prefetch" href="/assets/js/7.42b15925.js"><link rel="prefetch" href="/assets/js/70.60803f91.js"><link rel="prefetch" href="/assets/js/71.7cfae612.js"><link rel="prefetch" href="/assets/js/72.eb9e1c69.js"><link rel="prefetch" href="/assets/js/73.cd435e08.js"><link rel="prefetch" href="/assets/js/74.74deecbb.js"><link rel="prefetch" href="/assets/js/75.2fd64052.js"><link rel="prefetch" href="/assets/js/76.ada03ff4.js"><link rel="prefetch" href="/assets/js/77.905af665.js"><link rel="prefetch" href="/assets/js/78.7276e0d4.js"><link rel="prefetch" href="/assets/js/79.97d45520.js"><link rel="prefetch" href="/assets/js/8.aa03d242.js"><link rel="prefetch" href="/assets/js/80.128624f8.js"><link rel="prefetch" href="/assets/js/81.1b9a9fb8.js"><link rel="prefetch" href="/assets/js/82.b3f1cec2.js"><link rel="prefetch" href="/assets/js/83.f5b8d8b4.js"><link rel="prefetch" href="/assets/js/84.a6d7fa4c.js"><link rel="prefetch" href="/assets/js/85.e8da2271.js"><link rel="prefetch" href="/assets/js/86.ea5bbf66.js"><link rel="prefetch" href="/assets/js/87.3727b949.js"><link rel="prefetch" href="/assets/js/88.e2c7d687.js"><link rel="prefetch" href="/assets/js/89.6c1aa203.js"><link rel="prefetch" href="/assets/js/9.259fe5ea.js"><link rel="prefetch" href="/assets/js/90.270b8355.js"><link rel="prefetch" href="/assets/js/91.56eec24d.js"><link rel="prefetch" href="/assets/js/92.56f04099.js"><link rel="prefetch" href="/assets/js/93.f4f8c9f0.js"><link rel="prefetch" href="/assets/js/94.0d070675.js"><link rel="prefetch" href="/assets/js/95.8122b7ce.js"><link rel="prefetch" href="/assets/js/96.1666e281.js"><link rel="prefetch" href="/assets/js/97.e4f6c281.js"><link rel="prefetch" href="/assets/js/98.70b7aa4c.js"><link rel="prefetch" href="/assets/js/99.9222f0c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e82247ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LeoLiuGe Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link router-link-active">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link router-link-active">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>索引</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/server/linux/" class="active sidebar-link">Linux 使用手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/linux/#索引" class="sidebar-link">索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/linux/#shell" class="sidebar-link">SHELL</a></li><li class="sidebar-sub-header"><a href="/server/linux/#vim" class="sidebar-link">VIM</a></li></ul></li><li class="sidebar-sub-header"><a href="/server/linux/#常用命令" class="sidebar-link">常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/linux/#文件与目录操作" class="sidebar-link">文件与目录操作</a></li><li class="sidebar-sub-header"><a href="/server/linux/#查看文件内容" class="sidebar-link">查看文件内容</a></li><li class="sidebar-sub-header"><a href="/server/linux/#vi-文本编辑" class="sidebar-link">vi 文本编辑</a></li><li class="sidebar-sub-header"><a href="/server/linux/#文本内容处理" class="sidebar-link">文本内容处理</a></li><li class="sidebar-sub-header"><a href="/server/linux/#查询操作" class="sidebar-link">查询操作</a></li><li class="sidebar-sub-header"><a href="/server/linux/#压缩、解压" class="sidebar-link">压缩、解压</a></li><li class="sidebar-sub-header"><a href="/server/linux/#yum安装器" class="sidebar-link">yum安装器</a></li><li class="sidebar-sub-header"><a href="/server/linux/#网络相关" class="sidebar-link">网络相关</a></li><li class="sidebar-sub-header"><a href="/server/linux/#系统相关" class="sidebar-link">系统相关</a></li><li class="sidebar-sub-header"><a href="/server/linux/#xshell-5相关操作" class="sidebar-link">XShell 5相关操作</a></li><li class="sidebar-sub-header"><a href="/server/linux/#权限-chmod" class="sidebar-link">权限 chmod</a></li><li class="sidebar-sub-header"><a href="/server/linux/#查看cpu" class="sidebar-link">查看cpu</a></li><li class="sidebar-sub-header"><a href="/server/linux/#切换图形和命令行模式" class="sidebar-link">切换图形和命令行模式</a></li><li class="sidebar-sub-header"><a href="/server/linux/#查看监听的端口" class="sidebar-link">查看监听的端口</a></li><li class="sidebar-sub-header"><a href="/server/linux/#检查端口被哪个进程占用" class="sidebar-link">检查端口被哪个进程占用</a></li><li class="sidebar-sub-header"><a href="/server/linux/#查看进程的详细信息" class="sidebar-link">查看进程的详细信息</a></li><li class="sidebar-sub-header"><a href="/server/linux/#中止进程" class="sidebar-link">中止进程</a></li></ul></li><li class="sidebar-sub-header"><a href="/server/linux/#防火墙" class="sidebar-link">防火墙</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/linux/#firewall" class="sidebar-link">firewall</a></li><li class="sidebar-sub-header"><a href="/server/linux/#开放端口" class="sidebar-link">开放端口</a></li><li class="sidebar-sub-header"><a href="/server/linux/#查看开放的端口" class="sidebar-link">查看开放的端口</a></li><li class="sidebar-sub-header"><a href="/server/linux/#关闭防火墙" class="sidebar-link">关闭防火墙</a></li><li class="sidebar-sub-header"><a href="/server/linux/#通用选项" class="sidebar-link">通用选项</a></li><li class="sidebar-sub-header"><a href="/server/linux/#状态选项" class="sidebar-link">状态选项</a></li><li class="sidebar-sub-header"><a href="/server/linux/#日志选项" class="sidebar-link">日志选项</a></li><li class="sidebar-sub-header"><a href="/server/linux/#配置选项" class="sidebar-link">配置选项</a></li><li class="sidebar-sub-header"><a href="/server/linux/#服务管理" class="sidebar-link">服务管理</a></li><li class="sidebar-sub-header"><a href="/server/linux/#端口管理" class="sidebar-link">端口管理</a></li><li class="sidebar-sub-header"><a href="/server/linux/#直接模式" class="sidebar-link">直接模式</a></li><li class="sidebar-sub-header"><a href="/server/linux/#自定义服务管理" class="sidebar-link">自定义服务管理</a></li><li class="sidebar-sub-header"><a href="/server/linux/#控制端口-服务" class="sidebar-link">控制端口/服务</a></li><li class="sidebar-sub-header"><a href="/server/linux/#伪装ip" class="sidebar-link">伪装IP</a></li><li class="sidebar-sub-header"><a href="/server/linux/#端口转发" class="sidebar-link">端口转发</a></li></ul></li></ul></li><li><a href="/server/mysql/" class="sidebar-link">Mysql</a></li><li><a href="/server/git/" class="sidebar-link">Git</a></li><li><a href="/server/nodejs/" class="sidebar-link">NodeJS</a></li><li><a href="/server/nginx/" class="sidebar-link">Nginx</a></li><li><a href="/server/ssl/" class="sidebar-link">SSL</a></li><li><a href="/server/apache/" class="sidebar-link">Apache</a></li><li><a href="/server/php/" class="sidebar-link">PHP</a></li></ul></section></li><li><a href="/server/linux/shell.html" class="sidebar-link">Shell</a></li><li><a href="/server/linux/vim.html" class="sidebar-link">VIM命令</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux-使用手册"><a href="#linux-使用手册" class="header-anchor">#</a> Linux 使用手册</h1> <h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <h3 id="shell"><a href="#shell" class="header-anchor">#</a> <a href="shell">SHELL</a></h3> <h3 id="vim"><a href="#vim" class="header-anchor">#</a> <a href="vim">VIM</a></h3> <ul><li><p><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">常用命令</a></p> <ul><li><a href="#%E9%98%B2%E7%81%AB%E5%A2%99">防火墙</a></li> <li><a href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C">文件与目录操作</a></li></ul></li> <li><p><a href="/server/nginx">Nginx</a></p></li> <li><p><a href="./gogs">Gogs</a></p></li> <li><p><a href="./ngrok">Ngrok</a></p></li> <li><p><a href="./git">Git</a></p></li></ul> <h2 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h2> <h3 id="文件与目录操作"><a href="#文件与目录操作" class="header-anchor">#</a> 文件与目录操作</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>cd /home</td> <td>进入 ‘/home’ 目录</td></tr> <tr><td>cd ..</td> <td>返回上一级目录</td></tr> <tr><td>cd ../..</td> <td>返回上两级目录</td></tr> <tr><td>cd -</td> <td>返回上次所在目录</td></tr> <tr><td>cp file1 file2</td> <td>将file1复制为file2</td></tr> <tr><td>cp -a dir1 dir2</td> <td>复制一个目录</td></tr> <tr><td>cp -a /tmp/dir1</td> <td>复制一个目录到当前工作目录（.代表当前目录）</td></tr> <tr><td>ls</td> <td>查看目录中的文件</td></tr> <tr><td>ls -a</td> <td>显示隐藏文件</td></tr> <tr><td>ls -l</td> <td>显示详细信息</td></tr> <tr><td>ls -lrt</td> <td>按时间显示文件（l表示详细列表，r表示反向排序，t表示按时间排序）</td></tr> <tr><td>pwd</td> <td>显示工作路径</td></tr> <tr><td>mkdir dir1</td> <td>创建 ‘dir1’ 目录</td></tr> <tr><td>mkdir dir1 dir2</td> <td>同时创建两个目录</td></tr> <tr><td>mkdir -p /tmp/dir1/dir2</td> <td>创建一个目录树</td></tr> <tr><td>mv dir1 dir2</td> <td>移动/重命名一个目录</td></tr> <tr><td>rm -f file1</td> <td>删除 ‘file1’</td></tr> <tr><td>rm -rf dir1</td> <td>删除 ‘dir1’ 目录及其子目录内容</td></tr></tbody></table> <h3 id="查看文件内容"><a href="#查看文件内容" class="header-anchor">#</a> 查看文件内容</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>cat file1</td> <td>从第一个字节开始正向查看文件的内容</td></tr> <tr><td>head -2 file1</td> <td>查看一个文件的前两行</td></tr> <tr><td>more file1</td> <td>查看一个长文件的内容</td></tr> <tr><td>tac file1</td> <td>从最后一行开始反向查看一个文件的内容</td></tr> <tr><td>tail -3 file1</td> <td>查看一个文件的最后三行</td></tr></tbody></table> <h3 id="vi-文本编辑"><a href="#vi-文本编辑" class="header-anchor">#</a> vi 文本编辑</h3> <p><code>vi file</code></p> <table><thead><tr><th>操作</th> <th>解析</th></tr></thead> <tbody><tr><td>i</td> <td>进入编辑文本模式</td></tr> <tr><td>Esc</td> <td>退出编辑文本模式</td></tr> <tr><td>:w</td> <td>保存当前修改</td></tr> <tr><td>:q</td> <td>不保存退出vi</td></tr> <tr><td>:wq</td> <td>保存当前修改并退出vi</td></tr></tbody></table> <h3 id="文本内容处理"><a href="#文本内容处理" class="header-anchor">#</a> 文本内容处理</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>grep str /tmp/test</td> <td>在文件 ‘/tmp/test’ 中查找 “str”</td></tr> <tr><td>grep ^str /tmp/test</td> <td>在文件 ‘/tmp/test’ 中查找以 “str” 开始的行</td></tr> <tr><td>grep [0-9] /tmp/test</td> <td>查找 ‘/tmp/test’ 文件中所有包含数字的行</td></tr> <tr><td>grep str -r /tmp/*</td> <td>在目录 ‘/tmp’ 及其子目录中查找 “str”</td></tr> <tr><td>diff file1 file2</td> <td>找出两个文件的不同处</td></tr> <tr><td>sdiff file1 file2</td> <td>以对比的方式显示两个文件的不同</td></tr></tbody></table> <h3 id="查询操作"><a href="#查询操作" class="header-anchor">#</a> 查询操作</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>find / -name file1</td> <td>从 ‘/’ 开始进入根文件系统查找文件和目录</td></tr> <tr><td>find / -user user1</td> <td>查找属于用户 ‘user1’ 的文件和目录</td></tr> <tr><td>find /home/user1 -name *.bin</td> <td>在目录 ‘/ home/user1’ 中查找以 ‘.bin’ 结尾的文件</td></tr> <tr><td>find /usr/bin -type f -atime +100</td> <td>查找在过去100天内未被使用过的执行文件</td></tr> <tr><td>find /usr/bin -type f -mtime -10</td> <td>查找在10天内被创建或者修改过的文件</td></tr> <tr><td>locate *.ps</td> <td>寻找以 ‘.ps’ 结尾的文件，先运行 ‘updatedb’ 命令</td></tr> <tr><td>find -name ‘*.[ch]’</td> <td>xargs grep -E ‘expr’</td></tr> <tr><td>find -type f -print0</td> <td>xargs -r0 grep -F ‘expr’</td></tr> <tr><td>find -maxdepth 1 -type f</td> <td>xargs grep -F ‘expr’</td></tr></tbody></table> <h3 id="压缩、解压"><a href="#压缩、解压" class="header-anchor">#</a> 压缩、解压</h3> <ul><li>tar</li> <li>bzip2</li> <li>gzip</li> <li>unzip</li></ul> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>bzip2 file1</td> <td>压缩 file1</td></tr> <tr><td>bunzip2 file1.bz2</td> <td>解压 file1.bz2</td></tr> <tr><td>gzip file1</td> <td>压缩 file1</td></tr> <tr><td>gzip -9 file1</td> <td>最大程度压缩 file1</td></tr> <tr><td>gunzip file1.gz</td> <td>解压 file1.gz</td></tr> <tr><td>tar -cvf archive.tar file1</td> <td>把file1打包成 archive.tar（-c: 建立压缩档案；-v: 显示所有过程；-f: 使用档案名字，是必须的，是最后一个参数）</td></tr> <tr><td>tar -cvf archive.tar file1 dir1</td> <td>把 file1，dir1 打包成 archive.tar</td></tr> <tr><td>tar -tf archive.tar</td> <td>显示一个包中的内容</td></tr> <tr><td>tar -xvf archive.tar</td> <td>释放一个包</td></tr> <tr><td>tar -xvf archive.tar -C /tmp</td> <td>把压缩包释放到 /tmp目录下</td></tr> <tr><td>zip file1.zip file1</td> <td>创建一个zip格式的压缩包</td></tr> <tr><td>zip -r file1.zip file1 dir1</td> <td>把文件和目录压缩成一个zip格式的压缩包</td></tr> <tr><td>unzip file1.zip</td> <td>解压一个zip格式的压缩包到当前目录</td></tr> <tr><td>unzip test.zip -d /tmp/</td> <td>解压一个zip格式的压缩包到 /tmp 目录</td></tr></tbody></table> <h3 id="yum安装器"><a href="#yum安装器" class="header-anchor">#</a> yum安装器</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>yum -y install [package]</td> <td>下载并安装一个rpm包</td></tr> <tr><td>yum localinstall [package.rpm]</td> <td>安装一个rpm包，使用你自己的软件仓库解决所有依赖关系</td></tr> <tr><td>yum -y update</td> <td>更新当前系统中安装的所有rpm包</td></tr> <tr><td>yum update [package]</td> <td>更新一个rpm包</td></tr> <tr><td>yum remove [package]</td> <td>删除一个rpm包</td></tr> <tr><td>yum list</td> <td>列出当前系统中安装的所有包</td></tr> <tr><td>yum search [package]</td> <td>在rpm仓库中搜寻软件包</td></tr> <tr><td>yum clean [package]</td> <td>清除缓存目录（/var/cache/yum）下的软件包</td></tr> <tr><td>yum clean headers</td> <td>删除所有头文件</td></tr> <tr><td>yum clean all</td> <td>删除所有缓存的包和头文件</td></tr></tbody></table> <h3 id="网络相关"><a href="#网络相关" class="header-anchor">#</a> 网络相关</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>ifconfig eth0</td> <td>显示一个以太网卡的配置</td></tr> <tr><td>ifconfig eth0</td> <td>192.168.1.1 netmask 255.255.255.0 	配置网卡的IP地址</td></tr> <tr><td>ifdown eth0</td> <td>禁用 ‘eth0’ 网络设备</td></tr> <tr><td>ifup eth0</td> <td>启用 ‘eth0’ 网络设备</td></tr> <tr><td>iwconfig eth1</td> <td>显示一个无线网卡的配置</td></tr> <tr><td>iwlist scan</td> <td>显示无线网络</td></tr> <tr><td>ip addr show</td> <td>显示网卡的IP地址</td></tr></tbody></table> <h3 id="系统相关"><a href="#系统相关" class="header-anchor">#</a> 系统相关</h3> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>su -</td> <td>切换到root权限（与su有区别）</td></tr> <tr><td>shutdown -h now</td> <td>关机</td></tr> <tr><td>shutdown -r now</td> <td>重启</td></tr> <tr><td>top</td> <td>罗列使用CPU资源最多的linux任务 （输入q退出）</td></tr> <tr><td>pstree</td> <td>以树状图显示程序</td></tr> <tr><td>man ping</td> <td>查看参考手册（例如ping 命令）</td></tr> <tr><td>passwd</td> <td>修改密码</td></tr> <tr><td>df -h</td> <td>显示磁盘的使用情况</td></tr> <tr><td>cal -3</td> <td>显示前一个月，当前月以及下一个月的月历</td></tr> <tr><td>cal 10 1988</td> <td>显示指定月，年的月历</td></tr> <tr><td>date –date ‘1970-01-01 UTC 1427888888 seconds’</td> <td>把一相对于1970-01-01 00:00的秒数转换成时间</td></tr></tbody></table> <h3 id="xshell-5相关操作"><a href="#xshell-5相关操作" class="header-anchor">#</a> XShell 5相关操作</h3> <h4 id="窗体快捷键"><a href="#窗体快捷键" class="header-anchor">#</a> 窗体快捷键</h4> <table><thead><tr><th>命令</th> <th>解析</th></tr></thead> <tbody><tr><td>Ctrl + u</td> <td>删除光标之前到行首的字符</td></tr> <tr><td>Ctrl + k</td> <td>删除光标之前到行尾的字符</td></tr> <tr><td>Ctrl + c</td> <td>取消当前行输入的命令，相当于Ctrl + Break</td></tr> <tr><td>Ctrl + a</td> <td>光标移动到行首（ahead of line），相当于通常的Home键</td></tr> <tr><td>Ctrl + e</td> <td>光标移动到行尾（end of line）</td></tr> <tr><td>Ctrl + f</td> <td>光标向前（forward）移动一个字符位置</td></tr> <tr><td>Ctrl + b</td> <td>光标往回（backward）移动一个字符位置</td></tr> <tr><td>Ctrl + l</td> <td>清屏，相当于执行clear命令</td></tr> <tr><td>Ctrl + r</td> <td>显示:号提示，根据用户输入查找相关历史命令（reverse-i-search）</td></tr> <tr><td>Ctrl + w</td> <td>删除从光标位置前到当前所处单词（word）的开头</td></tr> <tr><td>Ctrl + t</td> <td>交换光标位置前的两个字符</td></tr> <tr><td>Ctrl + y</td> <td>粘贴最后一次被删除的单词</td></tr> <tr><td>Ctrl + Alt + d</td> <td>显示桌面</td></tr> <tr><td>Alt + b</td> <td>光标往回（backward）移动到前一个单词</td></tr> <tr><td>Alt + d</td> <td>删除从光标位置到当前所处单词的末尾</td></tr> <tr><td>Alt + F2</td> <td>运行</td></tr> <tr><td>Alt + F4</td> <td>关闭当前窗口</td></tr> <tr><td>Alt + F9</td> <td>最小化当前窗口</td></tr> <tr><td>Alt + F10</td> <td>最大化当前窗口</td></tr> <tr><td>Alt + 左键</td> <td>移动窗口（或在最下面的任务栏滚动鼠标滑轮）</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">操作小技巧</p> <ul><li><p>鼠标中间键：粘贴突出显示的文本。(使用鼠标左键来选择文本。把光标指向想粘贴文本的地方。点击鼠标中间键来粘贴。)</p></li> <li><p>Tab：命令行自动补全。使用 shell 提示时可使用这一方式。键入命令或文件名的前几个字符，然后按 [Tab] 键，它会自动补全命令或显示匹配键入字符的所有命令。</p></li> <li><p>在滚动条的空白处点击鼠标中键：屏幕即滚动到那个地方。</p></li> <li><p>在桌面或文件管理器中直接按 / 就可以输入位置，打开文件管理器。</p></li> <li><p>在 vi 或 Firefox 中直接按 / 即可进入快速搜索状态。</p></li> <li><p>网站链接和图片可直接拖放到桌面或者目录，可以马上下载。</p></li> <li><p>直接将文件管理器中的文件拖到终端中就可以在终端中得到完整的路径名。</p></li></ul></div> <h3 id="权限-chmod"><a href="#权限-chmod" class="header-anchor">#</a> 权限 chmod</h3> <h3 id="查看cpu"><a href="#查看cpu" class="header-anchor">#</a> 查看cpu</h3> <h4 id="top命令"><a href="#top命令" class="header-anchor">#</a> Top命令</h4> <p>显示系统运行状态和cpu的使用率</p> <div class="language-sh extra-class"><pre class="language-sh"><code>us：表示用户空间程序的cpu使用率（没有通过nice调度）

sy：表示系统空间的cpu使用率，主要是内核程序。

ni：表示用户空间且通过nice调度过的程序的cpu使用率。

id：空闲cpu

wa：cpu运行时在等待io的时间

hi：cpu处理硬中断的数量

si：cpu处理软中断的数量

st：被虚拟机偷走的cpu
</code></pre></div><h4 id="vmstat"><a href="#vmstat" class="header-anchor">#</a> vmstat</h4> <p>可以展现给定时间间隔的服务器的状态值,包括服务器的CPU使用率，内存使用，虚拟内存 交换情况,IO读写情况。相比top，通过vmstat可以看到整个机器的 CPU,内存,IO的使用情况，而不是单单看到各个进程的CPU使用率和内存使用率。</p> <p>一般vmstat工具的使用是通过两个数字参数来完成的，第一个参数是采样的时间间隔数，单位是秒，第二个参数是采样的次数</p> <h4 id="dstat"><a href="#dstat" class="header-anchor">#</a> dstat</h4> <p>每秒cpu使用率情况获取  : dstat -c</p> <p>最占cpu的进程获取 : dstat --top-cpu</p> <h3 id="切换图形和命令行模式"><a href="#切换图形和命令行模式" class="header-anchor">#</a> 切换图形和命令行模式</h3> <p>命令</p> <div class="language-sh extra-class"><pre class="language-sh"><code>systemctl set-default multi-user.target <span class="token comment">#设置成命令模式</span>

systemctl set-default graphical.target  <span class="token comment">#设置成图形模式</span>
</code></pre></div><h3 id="查看监听的端口"><a href="#查看监听的端口" class="header-anchor">#</a> 查看监听的端口</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">netstat</span> -lnpt
</code></pre></div><h3 id="检查端口被哪个进程占用"><a href="#检查端口被哪个进程占用" class="header-anchor">#</a> 检查端口被哪个进程占用</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">netstat</span> -lnpt <span class="token operator">|</span><span class="token function">grep</span> <span class="token number">5672</span>
</code></pre></div><h3 id="查看进程的详细信息"><a href="#查看进程的详细信息" class="header-anchor">#</a> 查看进程的详细信息</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">ps</span> <span class="token number">6832</span>
</code></pre></div><h3 id="中止进程"><a href="#中止进程" class="header-anchor">#</a> 中止进程</h3> <h4 id="kill"><a href="#kill" class="header-anchor">#</a> kill</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">## 从容停止</span>
$ <span class="token function">kill</span> -QUIT 主进程号  
<span class="token comment"># 例如：kill -QUIT 16391</span>
<span class="token comment"># 这种方式相对来说会有一个停止的过程，先将子进程停止掉，然后再停掉主进程。</span>

<span class="token comment"># 快速停止</span>
$ <span class="token function">kill</span> -<span class="token environment constant">TERM</span> 主进程号  
<span class="token comment"># 这种会比上面那种方法速度快些。</span>

<span class="token comment"># 强制停止</span>
$ <span class="token function">kill</span> -9 主进程号 
<span class="token comment"># 这种方式是最后的方法，强制停止。</span>
</code></pre></div><h4 id="killall"><a href="#killall" class="header-anchor">#</a> killall</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 结束所有相关进行</span>

<span class="token function">killall</span> nginx

</code></pre></div><h2 id="防火墙"><a href="#防火墙" class="header-anchor">#</a> 防火墙</h2> <h3 id="firewall"><a href="#firewall" class="header-anchor">#</a> firewall</h3> <h3 id="开放端口"><a href="#开放端口" class="header-anchor">#</a> 开放端口</h3> <p>firewall-cmd</p> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">5672</span>/tcp --permanent   <span class="token comment"># 开放5672端口</span>

firewall-cmd --zone<span class="token operator">=</span>public --remove-port<span class="token operator">=</span><span class="token number">5672</span>/tcp --permanent  <span class="token comment">#关闭5672端口</span>

firewall-cmd --reload   <span class="token comment"># 配置立即生效</span>
</code></pre></div><h3 id="查看开放的端口"><a href="#查看开放的端口" class="header-anchor">#</a> 查看开放的端口</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --zone<span class="token operator">=</span>public --list-ports
</code></pre></div><h3 id="关闭防火墙"><a href="#关闭防火墙" class="header-anchor">#</a> 关闭防火墙</h3> <p>如果要开放的端口太多，嫌麻烦，可以关闭防火墙，安全性自行评估</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl stop firewalld.service

</code></pre></div><h3 id="通用选项"><a href="#通用选项" class="header-anchor">#</a> 通用选项</h3> <table><thead><tr><th>参数</th> <th>功能</th></tr></thead> <tbody><tr><td>-h, --help</td> <td>显示帮助信息；</td></tr> <tr><td>-V, --version</td> <td>显示版本信息. （这个选项不能与其他选项组合）；</td></tr> <tr><td>-q, --quiet</td> <td>不打印状态消息；</td></tr></tbody></table> <h3 id="状态选项"><a href="#状态选项" class="header-anchor">#</a> 状态选项</h3> <table><thead><tr><th>参数</th> <th>功能</th></tr></thead> <tbody><tr><td>-state</td> <td>查看防火墙状态</td></tr> <tr><td>--reload</td> <td>不中断服务的重新加载；</td></tr> <tr><td>--complete-reload</td> <td>中断所有连接的重新加载；</td></tr> <tr><td>--runtime-to-permanent</td> <td>将当前防火墙的规则永久保存；</td></tr> <tr><td>--check-config</td> <td>检查配置正确性；</td></tr></tbody></table> <h3 id="日志选项"><a href="#日志选项" class="header-anchor">#</a> 日志选项</h3> <table><thead><tr><th>参数</th> <th>功能</th></tr></thead> <tbody><tr><td>--get-log-denied</td> <td>获取记录被拒绝的日志；</td></tr> <tr><td>--set-log-denied=&lt;value&gt;</td> <td>设置记录被拒绝的日志，只能为 'all','unicast','broadcast','multicast','off' 其中的一个；</td></tr></tbody></table> <h3 id="配置选项"><a href="#配置选项" class="header-anchor">#</a> 配置选项</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --state  <span class="token comment"># 显示状态</span>
firewall-cmd --get-active-zones  <span class="token comment"># 查看区域信息</span>
firewall-cmd --get-zone-of-interface<span class="token operator">=</span>eth0  <span class="token comment"># 查看指定接口所属区域</span>
firewall-cmd --panic-on  <span class="token comment"># 拒绝所有包</span>
firewall-cmd --panic-off  <span class="token comment"># 取消拒绝状态</span>
firewall-cmd --query-panic  <span class="token comment"># 查看是否拒绝</span>

firewall-cmd --reload <span class="token comment"># 更新防火墙规则</span>
firewall-cmd --complete-reload
<span class="token comment"># 两者的区别就是第一个无需断开连接，就是firewalld特性之一动态添加规则，第二个需要断开连接，类似重启服务</span>


<span class="token comment"># 将接口添加到区域，默认接口都在public</span>
firewall-cmd --zone<span class="token operator">=</span>public --add-interface<span class="token operator">=</span>eth0
<span class="token comment"># 永久生效再加上 --permanent 然后reload防火墙</span>

<span class="token comment"># 设置默认接口区域，立即生效无需重启</span>
firewall-cmd --set-default-zone<span class="token operator">=</span>public

<span class="token comment"># 查看所有打开的端口：</span>
firewall-cmd --zone<span class="token operator">=</span>dmz --list-ports

<span class="token comment"># 加入一个端口到区域：</span>
firewall-cmd --zone<span class="token operator">=</span>dmz --add-port<span class="token operator">=</span><span class="token number">8080</span>/tcp
<span class="token comment"># 若要永久生效方法同上</span>

<span class="token comment"># 打开一个服务，类似于将端口可视化，服务需要在配置文件中添加，/etc/firewalld 目录下有services文件夹，这个不详细说了，详情参考文档</span>
firewall-cmd --zone<span class="token operator">=</span>work --add-service<span class="token operator">=</span>smtp

<span class="token comment"># 移除服务</span>
firewall-cmd --zone<span class="token operator">=</span>work --remove-service<span class="token operator">=</span>smtp

<span class="token comment"># 显示支持的区域列表</span>
firewall-cmd --get-zones

<span class="token comment"># 设置为家庭区域</span>
firewall-cmd --set-default-zone<span class="token operator">=</span>home

<span class="token comment"># 查看当前区域</span>
firewall-cmd --get-active-zones

<span class="token comment"># 设置当前区域的接口</span>
firewall-cmd --get-zone-of-interface<span class="token operator">=</span>enp03s

<span class="token comment"># 显示所有公共区域（public）</span>
firewall-cmd --zone<span class="token operator">=</span>public --list-all

<span class="token comment"># 临时修改网络接口（enp0s3）为内部区域（internal）</span>
firewall-cmd --zone<span class="token operator">=</span>internal --change-interface<span class="token operator">=</span>enp03s

<span class="token comment"># 永久修改网络接口enp03s为内部区域（internal）</span>
firewall-cmd --permanent --zone<span class="token operator">=</span>internal --change-interface<span class="token operator">=</span>enp03s
</code></pre></div><h3 id="服务管理"><a href="#服务管理" class="header-anchor">#</a> 服务管理</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 显示服务列表  </span>
Amanda, FTP, Samba和TFTP等最重要的服务已经被FirewallD提供相应的服务，可以使用如下命令查看：

firewall-cmd --get-services

<span class="token comment"># 允许SSH服务通过</span>
firewall-cmd --new-service<span class="token operator">=</span>ssh

<span class="token comment"># 禁止SSH服务通过</span>
firewall-cmd --delete-service<span class="token operator">=</span>ssh

<span class="token comment"># 打开TCP的8080端口</span>
firewall-cmd --enable <span class="token assign-left variable">ports</span><span class="token operator">=</span><span class="token number">8080</span>/tcp

<span class="token comment"># 临时允许Samba服务通过600秒</span>
firewall-cmd --enable <span class="token assign-left variable">service</span><span class="token operator">=</span>samba --timeout<span class="token operator">=</span><span class="token number">600</span>

<span class="token comment"># 显示当前服务</span>
firewall-cmd --list-services

<span class="token comment"># 添加HTTP服务到内部区域（internal）</span>
firewall-cmd --permanent --zone<span class="token operator">=</span>internal --add-service<span class="token operator">=</span>http
firewall-cmd --reload     <span class="token comment"># 在不改变状态的条件下重新加载防火墙</span>
</code></pre></div><h3 id="端口管理"><a href="#端口管理" class="header-anchor">#</a> 端口管理</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 打开443/TCP端口</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">443</span>/tcp

<span class="token comment"># 永久打开3690/TCP端口</span>
firewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">3690</span>/tcp

<span class="token comment"># 永久打开端口好像需要reload一下，临时打开好像不用，如果用了reload临时打开的端口就失效了</span>
<span class="token comment"># 其它服务也可能是这样的，这个没有测试</span>
firewall-cmd --reload

<span class="token comment"># 查看防火墙，添加的端口也可以看到</span>
firewall-cmd --list-all
</code></pre></div><h3 id="直接模式"><a href="#直接模式" class="header-anchor">#</a> 直接模式</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># FirewallD包括一种直接模式，使用它可以完成一些工作，例如打开TCP协议的9999端口</span>

firewall-cmd --direct -add-rule ipv4 filter INPUT <span class="token number">0</span> -p tcp --dport <span class="token number">9000</span> -j ACCEPT
firewall-cmd --reload

</code></pre></div><h3 id="自定义服务管理"><a href="#自定义服务管理" class="header-anchor">#</a> 自定义服务管理</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>（末尾带有 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span> 的话表示该选项除了与（--permanent）之外，不能与其他选项一同使用！）
--new-service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> 新建一个自定义服务 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--new-service-from-file<span class="token operator">=</span><span class="token operator">&lt;</span>文件名<span class="token operator">&gt;</span> <span class="token punctuation">[</span>--name<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                      从文件中读取配置用以新建一个自定义服务 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--delete-service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span>
                      删除一个已存在的服务 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--load-service-defaults<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span>
                      Load icmptype default settings <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--info-service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span>
                      显示该服务的相关信息
--path-service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span>
                      显示该服务的文件的相关路径 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --set-description<span class="token operator">=</span><span class="token operator">&lt;</span>描述<span class="token operator">&gt;</span>
                      给该服务设置描述信息 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-description
                      显示该服务的描述信息 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --set-short<span class="token operator">=</span><span class="token operator">&lt;</span>描述<span class="token operator">&gt;</span>
                      给该服务设置一个简短的描述 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-short
                      显示该服务的简短描述 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --add-port<span class="token operator">=</span><span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">]</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      给该服务添加一个新的端口<span class="token punctuation">(</span>端口段<span class="token punctuation">)</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --remove-port<span class="token operator">=</span><span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">]</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      从该服务上移除一个端口<span class="token punctuation">(</span>端口段<span class="token punctuation">)</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --query-port<span class="token operator">=</span><span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">]</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      查询该服务是否添加了某个端口<span class="token punctuation">(</span>端口段<span class="token punctuation">)</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-ports
                      显示该服务添加的所有端口 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --add-protocol<span class="token operator">=</span><span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      为该服务添加一个协议 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --remove-protocol<span class="token operator">=</span><span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      从该服务上移除一个协议 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --query-protocol<span class="token operator">=</span><span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      查询该服务是否添加了某个协议 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-protocols
                      显示该服务添加的所有协议 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --add-source-port<span class="token operator">=</span><span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">]</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      添加新的源端口<span class="token punctuation">(</span>端口段<span class="token punctuation">)</span>到该服务 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --remove-source-port<span class="token operator">=</span><span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">]</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      从该服务中删除源端口<span class="token punctuation">(</span>端口段<span class="token punctuation">)</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --query-source-port<span class="token operator">=</span><span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>端口号<span class="token operator">&gt;</span><span class="token punctuation">]</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span>
                      查询该服务是否添加了某个源端口<span class="token punctuation">(</span>端口段<span class="token punctuation">)</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-source-ports
                      显示该服务所有源端口 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>

--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --add-module<span class="token operator">=</span><span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
                      为该服务添加一个模块 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --remove-module<span class="token operator">=</span><span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
                      为该服务移除一个模块 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --query-module<span class="token operator">=</span><span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
                      查询该服务是否添加了某个模块 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-modules
                      显示该服务添加的所有模块 <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --set-destination<span class="token operator">=</span><span class="token operator">&lt;</span>ipv<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>address<span class="token operator">&gt;</span><span class="token punctuation">[</span>/<span class="token operator">&lt;</span>mask<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                      Set destination <span class="token keyword">for</span> ipv to address <span class="token keyword">in</span> <span class="token function">service</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --remove-destination<span class="token operator">=</span><span class="token operator">&lt;</span>ipv<span class="token operator">&gt;</span>
                      Disable destination <span class="token keyword">for</span> ipv i <span class="token function">service</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --query-destination<span class="token operator">=</span><span class="token operator">&lt;</span>ipv<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>address<span class="token operator">&gt;</span><span class="token punctuation">[</span>/<span class="token operator">&lt;</span>mask<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                      Return whether destination ipv is <span class="token builtin class-name">set</span> <span class="token keyword">for</span> <span class="token function">service</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
--service<span class="token operator">=</span><span class="token operator">&lt;</span>服务名<span class="token operator">&gt;</span> --get-destinations
                      List destinations <span class="token keyword">in</span> <span class="token function">service</span> <span class="token punctuation">[</span>P only<span class="token punctuation">]</span>
</code></pre></div><h3 id="控制端口-服务"><a href="#控制端口-服务" class="header-anchor">#</a> 控制端口/服务</h3> <p>可以通过两种方式控制端口的开放，一种是指定端口号另一种是指定服务名。虽然开放 http 服务就是开放了 80 端口，但是还是不能通过端口号来关闭，也就是说通过指定服务名开放的就要通过指定服务名关闭；通过指定端口号开放的就要通过指定端口号关闭。还有一个要注意的就是指定端口的时候一定要指定是什么协议，tcp 还是 udp。知道这个之后以后就不用每次先关防火墙了，可以让防火墙真正的生效。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --add-service<span class="token operator">=</span>mysql        <span class="token comment"># 开放mysql端口</span>
firewall-cmd --remove-service<span class="token operator">=</span>http      <span class="token comment"># 阻止http端口</span>
firewall-cmd --list-services            <span class="token comment"># 查看开放的服务</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp        <span class="token comment"># 开放通过tcp访问3306</span>
firewall-cmd --remove-port<span class="token operator">=</span>80tcp        <span class="token comment"># 阻止通过tcp访问3306</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">233</span>/udp         <span class="token comment"># 开放通过udp访问233</span>
firewall-cmd --list-ports               <span class="token comment"># 查看开放的端口</span>
</code></pre></div><h3 id="伪装ip"><a href="#伪装ip" class="header-anchor">#</a> 伪装IP</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --query-masquerade <span class="token comment"># 检查是否允许伪装IP</span>
firewall-cmd --add-masquerade   <span class="token comment"># 允许防火墙伪装IP</span>
firewall-cmd --remove-masquerade<span class="token comment"># 禁止防火墙伪装IP</span>
</code></pre></div><h3 id="端口转发"><a href="#端口转发" class="header-anchor">#</a> 端口转发</h3> <p>端口转发可以将指定地址访问指定的端口时，将流量转发至指定地址的指定端口。转发的目的如果不指定 ip 的话就默认为本机，如果指定了 ip 却没指定端口，则默认使用来源端口。 如果配置好端口转发之后不能用，可以检查下面两个问题：</p> <p>比如我将 80 端口转发至 8080 端口，首先检查本地的 80 端口和目标的 8080 端口是否开放监听了
其次检查是否允许伪装 IP，没允许的话要开启伪装 IP</p> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --add-forward-port<span class="token operator">=</span>port<span class="token operator">=</span><span class="token number">80</span>:proto<span class="token operator">=</span>tcp:toport<span class="token operator">=</span><span class="token number">8080</span>   <span class="token comment"># 将80端口的流量转发至8080</span>
firewall-cmd --add-forward-port<span class="token operator">=</span>port<span class="token operator">=</span><span class="token number">80</span>:proto<span class="token operator">=</span>tcp:toaddr<span class="token operator">=</span><span class="token number">192.168</span>.0.1 <span class="token comment"># 将80端口的流量转发至192.168.0.1</span>
firewall-cmd --add-forward-port<span class="token operator">=</span>port<span class="token operator">=</span><span class="token number">80</span>:proto<span class="token operator">=</span>tcp:toaddr<span class="token operator">=</span><span class="token number">192.168</span>.0.1:toport<span class="token operator">=</span><span class="token number">8080</span> <span class="token comment"># 将80端口的流量转发至192.168.0.1的8080端口</span>
</code></pre></div><p>当我们想把某个端口隐藏起来的时候，就可以在防火墙上阻止那个端口访问，然后再开一个不规则的端口，之后配置防火墙的端口转发，将流量转发过去。
端口转发还可以做流量分发，一个防火墙拖着好多台运行着不同服务的机器，然后用防火墙将不同端口的流量转发至不同机器。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/server/mysql/">
         下一篇： Mysql
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26b143c5.js" defer></script><script src="/assets/js/3.c09e7e7a.js" defer></script><script src="/assets/js/2.3613c5bc.js" defer></script><script src="/assets/js/123.b15a9909.js" defer></script>
  </body>
</html>
