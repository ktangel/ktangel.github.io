<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gogs | LeoLiuGe Blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="LeoLiu 一个不断尝试新事情 学习新技术的80后">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta property="og:type" content="article">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta name="applicable-device" content="pc,mobile">
    <link rel="preload" href="/assets/css/0.styles.e82247ed.css" as="style"><link rel="preload" href="/assets/js/app.26b143c5.js" as="script"><link rel="preload" href="/assets/js/3.c09e7e7a.js" as="script"><link rel="preload" href="/assets/js/2.3613c5bc.js" as="script"><link rel="preload" href="/assets/js/120.a9068d51.js" as="script"><link rel="prefetch" href="/assets/js/10.8b48a5e6.js"><link rel="prefetch" href="/assets/js/100.00e14632.js"><link rel="prefetch" href="/assets/js/101.e983096c.js"><link rel="prefetch" href="/assets/js/102.cbdc022d.js"><link rel="prefetch" href="/assets/js/103.e0752f6b.js"><link rel="prefetch" href="/assets/js/104.5706802a.js"><link rel="prefetch" href="/assets/js/105.458969e3.js"><link rel="prefetch" href="/assets/js/106.447bee86.js"><link rel="prefetch" href="/assets/js/107.2794a2fc.js"><link rel="prefetch" href="/assets/js/108.69196138.js"><link rel="prefetch" href="/assets/js/109.592c15a8.js"><link rel="prefetch" href="/assets/js/11.f4dc73e6.js"><link rel="prefetch" href="/assets/js/110.7f986aa6.js"><link rel="prefetch" href="/assets/js/111.aeae13db.js"><link rel="prefetch" href="/assets/js/112.17891637.js"><link rel="prefetch" href="/assets/js/113.73acce45.js"><link rel="prefetch" href="/assets/js/114.1f735019.js"><link rel="prefetch" href="/assets/js/115.02624466.js"><link rel="prefetch" href="/assets/js/116.86bd99e5.js"><link rel="prefetch" href="/assets/js/117.101af32f.js"><link rel="prefetch" href="/assets/js/118.8c3de42b.js"><link rel="prefetch" href="/assets/js/119.48c4ce96.js"><link rel="prefetch" href="/assets/js/12.88c1b978.js"><link rel="prefetch" href="/assets/js/121.34d97451.js"><link rel="prefetch" href="/assets/js/122.e3d20fd5.js"><link rel="prefetch" href="/assets/js/123.b15a9909.js"><link rel="prefetch" href="/assets/js/124.16ddbd07.js"><link rel="prefetch" href="/assets/js/125.d42035bf.js"><link rel="prefetch" href="/assets/js/126.97cbcdbb.js"><link rel="prefetch" href="/assets/js/127.269f92d5.js"><link rel="prefetch" href="/assets/js/128.86408adc.js"><link rel="prefetch" href="/assets/js/129.7d45a6dd.js"><link rel="prefetch" href="/assets/js/13.03701fb1.js"><link rel="prefetch" href="/assets/js/130.988c9796.js"><link rel="prefetch" href="/assets/js/131.a843d739.js"><link rel="prefetch" href="/assets/js/132.628877b5.js"><link rel="prefetch" href="/assets/js/133.573adea9.js"><link rel="prefetch" href="/assets/js/134.66e89387.js"><link rel="prefetch" href="/assets/js/135.e6cef2cb.js"><link rel="prefetch" href="/assets/js/136.e5e5efbe.js"><link rel="prefetch" href="/assets/js/137.a14b0855.js"><link rel="prefetch" href="/assets/js/138.5e728b85.js"><link rel="prefetch" href="/assets/js/139.c9b1d1b4.js"><link rel="prefetch" href="/assets/js/14.a87cadd4.js"><link rel="prefetch" href="/assets/js/140.f7aaf293.js"><link rel="prefetch" href="/assets/js/141.96738168.js"><link rel="prefetch" href="/assets/js/142.952e9d63.js"><link rel="prefetch" href="/assets/js/143.6317df9d.js"><link rel="prefetch" href="/assets/js/144.4818c9d9.js"><link rel="prefetch" href="/assets/js/145.eafe018d.js"><link rel="prefetch" href="/assets/js/146.bf88a1f1.js"><link rel="prefetch" href="/assets/js/147.b0ef29a6.js"><link rel="prefetch" href="/assets/js/148.7e1bb92d.js"><link rel="prefetch" href="/assets/js/149.c1b76a69.js"><link rel="prefetch" href="/assets/js/15.d60df077.js"><link rel="prefetch" href="/assets/js/150.1dbe87cb.js"><link rel="prefetch" href="/assets/js/151.58e172dd.js"><link rel="prefetch" href="/assets/js/152.5e45a717.js"><link rel="prefetch" href="/assets/js/153.dd50b2aa.js"><link rel="prefetch" href="/assets/js/154.1f10cdd3.js"><link rel="prefetch" href="/assets/js/155.97fd8c23.js"><link rel="prefetch" href="/assets/js/156.19009773.js"><link rel="prefetch" href="/assets/js/157.60c6b1cf.js"><link rel="prefetch" href="/assets/js/158.602e7f89.js"><link rel="prefetch" href="/assets/js/159.c28a473f.js"><link rel="prefetch" href="/assets/js/16.b3578a43.js"><link rel="prefetch" href="/assets/js/17.53f42748.js"><link rel="prefetch" href="/assets/js/18.83948d00.js"><link rel="prefetch" href="/assets/js/19.f44dde2a.js"><link rel="prefetch" href="/assets/js/20.89a422c0.js"><link rel="prefetch" href="/assets/js/21.6a0ec22b.js"><link rel="prefetch" href="/assets/js/22.8541a381.js"><link rel="prefetch" href="/assets/js/23.3933c13b.js"><link rel="prefetch" href="/assets/js/24.712ae246.js"><link rel="prefetch" href="/assets/js/25.cffdf98e.js"><link rel="prefetch" href="/assets/js/26.2f5c6080.js"><link rel="prefetch" href="/assets/js/27.5f6bfa07.js"><link rel="prefetch" href="/assets/js/28.664913a5.js"><link rel="prefetch" href="/assets/js/29.ac47bba8.js"><link rel="prefetch" href="/assets/js/30.1cadedaf.js"><link rel="prefetch" href="/assets/js/31.4f8b7ea2.js"><link rel="prefetch" href="/assets/js/32.f7202c8c.js"><link rel="prefetch" href="/assets/js/33.1680bf0c.js"><link rel="prefetch" href="/assets/js/34.198aa9b0.js"><link rel="prefetch" href="/assets/js/35.1a72632a.js"><link rel="prefetch" href="/assets/js/36.837cb2f7.js"><link rel="prefetch" href="/assets/js/37.e471763d.js"><link rel="prefetch" href="/assets/js/38.d0881148.js"><link rel="prefetch" href="/assets/js/39.309026eb.js"><link rel="prefetch" href="/assets/js/4.d0490c7c.js"><link rel="prefetch" href="/assets/js/40.e24f783b.js"><link rel="prefetch" href="/assets/js/41.32829608.js"><link rel="prefetch" href="/assets/js/42.4510f96e.js"><link rel="prefetch" href="/assets/js/43.eb4bd008.js"><link rel="prefetch" href="/assets/js/44.1a1dc587.js"><link rel="prefetch" href="/assets/js/45.f7d10c65.js"><link rel="prefetch" href="/assets/js/46.35943b44.js"><link rel="prefetch" href="/assets/js/47.c6417c68.js"><link rel="prefetch" href="/assets/js/48.d49dead4.js"><link rel="prefetch" href="/assets/js/49.132da5d3.js"><link rel="prefetch" href="/assets/js/5.7950ab83.js"><link rel="prefetch" href="/assets/js/50.c75f213d.js"><link rel="prefetch" href="/assets/js/51.debfae61.js"><link rel="prefetch" href="/assets/js/52.fa9d27ed.js"><link rel="prefetch" href="/assets/js/53.d4a4a066.js"><link rel="prefetch" href="/assets/js/54.ce0b57e9.js"><link rel="prefetch" href="/assets/js/55.cb30724c.js"><link rel="prefetch" href="/assets/js/56.aecc7992.js"><link rel="prefetch" href="/assets/js/57.fe599b61.js"><link rel="prefetch" href="/assets/js/58.edb098e1.js"><link rel="prefetch" href="/assets/js/59.1bd6ce1e.js"><link rel="prefetch" href="/assets/js/6.607a91ef.js"><link rel="prefetch" href="/assets/js/60.85b29cc0.js"><link rel="prefetch" href="/assets/js/61.471d6bc0.js"><link rel="prefetch" href="/assets/js/62.6fc7e56e.js"><link rel="prefetch" href="/assets/js/63.0e9015b4.js"><link rel="prefetch" href="/assets/js/64.0e414f75.js"><link rel="prefetch" href="/assets/js/65.f2501d0c.js"><link rel="prefetch" href="/assets/js/66.60b00821.js"><link rel="prefetch" href="/assets/js/67.cd173b0e.js"><link rel="prefetch" href="/assets/js/68.7c3c6dc5.js"><link rel="prefetch" href="/assets/js/69.fe6f9a3f.js"><link rel="prefetch" href="/assets/js/7.42b15925.js"><link rel="prefetch" href="/assets/js/70.60803f91.js"><link rel="prefetch" href="/assets/js/71.7cfae612.js"><link rel="prefetch" href="/assets/js/72.eb9e1c69.js"><link rel="prefetch" href="/assets/js/73.cd435e08.js"><link rel="prefetch" href="/assets/js/74.74deecbb.js"><link rel="prefetch" href="/assets/js/75.2fd64052.js"><link rel="prefetch" href="/assets/js/76.ada03ff4.js"><link rel="prefetch" href="/assets/js/77.905af665.js"><link rel="prefetch" href="/assets/js/78.7276e0d4.js"><link rel="prefetch" href="/assets/js/79.97d45520.js"><link rel="prefetch" href="/assets/js/8.aa03d242.js"><link rel="prefetch" href="/assets/js/80.128624f8.js"><link rel="prefetch" href="/assets/js/81.1b9a9fb8.js"><link rel="prefetch" href="/assets/js/82.b3f1cec2.js"><link rel="prefetch" href="/assets/js/83.f5b8d8b4.js"><link rel="prefetch" href="/assets/js/84.a6d7fa4c.js"><link rel="prefetch" href="/assets/js/85.e8da2271.js"><link rel="prefetch" href="/assets/js/86.ea5bbf66.js"><link rel="prefetch" href="/assets/js/87.3727b949.js"><link rel="prefetch" href="/assets/js/88.e2c7d687.js"><link rel="prefetch" href="/assets/js/89.6c1aa203.js"><link rel="prefetch" href="/assets/js/9.259fe5ea.js"><link rel="prefetch" href="/assets/js/90.270b8355.js"><link rel="prefetch" href="/assets/js/91.56eec24d.js"><link rel="prefetch" href="/assets/js/92.56f04099.js"><link rel="prefetch" href="/assets/js/93.f4f8c9f0.js"><link rel="prefetch" href="/assets/js/94.0d070675.js"><link rel="prefetch" href="/assets/js/95.8122b7ce.js"><link rel="prefetch" href="/assets/js/96.1666e281.js"><link rel="prefetch" href="/assets/js/97.e4f6c281.js"><link rel="prefetch" href="/assets/js/98.70b7aa4c.js"><link rel="prefetch" href="/assets/js/99.9222f0c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e82247ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LeoLiuGe Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link router-link-active">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/JAVA/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/ide/" class="nav-link">IDE</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/ios/" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link router-link-active">Server</a></li><li class="dropdown-item"><!----> <a href="/unity/" class="nav-link">Unity</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ktangel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ktangel.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ago Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/server/git/" class="sidebar-link">Git</a></li><li><a href="/server/git/gogs.html" class="active sidebar-link">Gogs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/git/gogs.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/git/gogs.html#先创建一个git用户" class="sidebar-link">先创建一个git用户</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#二进制包" class="sidebar-link">二进制包</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#包管理安装" class="sidebar-link">包管理安装</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#源码安装" class="sidebar-link">源码安装</a></li></ul></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#配置" class="sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/git/gogs.html#建立数据库" class="sidebar-link">建立数据库</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#首次安装" class="sidebar-link">首次安装</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#注册系统服务" class="sidebar-link">注册系统服务</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#关闭selinux防火墙" class="sidebar-link">关闭Selinux防火墙</a></li></ul></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#配置文档说明" class="sidebar-link">配置文档说明</a></li><li class="sidebar-sub-header"><a href="/server/git/gogs.html#问题" class="sidebar-link">问题</a></li></ul></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>索引</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/server/linux/" class="sidebar-link">Linux 使用手册</a></li><li><a href="/server/mysql/" class="sidebar-link">Mysql</a></li><li><a href="/server/git/" class="sidebar-link">Git</a></li><li><a href="/server/nodejs/" class="sidebar-link">NodeJS</a></li><li><a href="/server/nginx/" class="sidebar-link">Nginx</a></li><li><a href="/server/ssl/" class="sidebar-link">SSL</a></li><li><a href="/server/apache/" class="sidebar-link">Apache</a></li><li><a href="/server/php/" class="sidebar-link">PHP</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gogs"><a href="#gogs" class="header-anchor">#</a> Gogs</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>gogs是一个基于go语言的易安装、跨平台、轻量级的git服务</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <h3 id="先创建一个git用户"><a href="#先创建一个git用户" class="header-anchor">#</a> 先创建一个git用户</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#Ubuntu</span>
<span class="token function">sudo</span> adduser --disabled-login --gecos <span class="token string">'Gogs'</span> <span class="token function">git</span>

<span class="token comment">## Centos 7之后是不支持--disabled-login参数</span>
adduser 

</code></pre></div><p>然后登陆git用户，在git用户环境下继续下面的安装。</p> <h3 id="二进制包"><a href="#二进制包" class="header-anchor">#</a> 二进制包</h3> <p><a href="https://gogs.io/docs/installation/install_from_binary" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
根据所用平台去<a href="https://dl.gogs.io/" target="_blank" rel="noopener noreferrer">官网下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>编译好的程序包</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#登录 git帐户</span>
<span class="token function">su</span> - <span class="token function">git</span> 
<span class="token comment"># 下载安装包</span>
<span class="token function">wget</span> https://cdn.gogs.io/0.11.91/gogs_0.11.91_linux_amd64.tar.gz
<span class="token comment"># 解压</span>
<span class="token function">tar</span> -xvf

</code></pre></div><h3 id="包管理安装"><a href="#包管理安装" class="header-anchor">#</a> 包管理安装</h3> <p><a href="https://packager.io/gh/gogs/gogs/builds/241/install/centos-7" target="_blank" rel="noopener noreferrer">官方给的包管理安装文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这个包管理不是官方提供的，官方不对包的安全性负责。建议二进制包安装。</p> <h3 id="源码安装"><a href="#源码安装" class="header-anchor">#</a> 源码安装</h3> <p>官方给的方法太慢太没效率了，因为下载和编译速度都蛮花时间。所以还是建议二进制包安装。</p> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <h3 id="建立数据库"><a href="#建立数据库" class="header-anchor">#</a> 建立数据库</h3> <p>可以直接执行<code>gogs/script/mysql.sql</code>脚本</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--- 这个脚本中有一条判断是否存在数据库gogs并删除，如果不是首次安装，请谨慎使用</span>
source <span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span>gogs<span class="token operator">/</span>scripts<span class="token operator">/</span>mysql<span class="token punctuation">.</span><span class="token keyword">sql</span>
</code></pre></div><p>或者自己建立一个数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> gogs<span class="token punctuation">;</span> <span class="token keyword">use</span> gogs<span class="token punctuation">;</span> <span class="token keyword">set</span> <span class="token keyword">global</span> storage_engine<span class="token operator">=</span><span class="token keyword">INNODB</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="首次安装"><a href="#首次安装" class="header-anchor">#</a> 首次安装</h3> <p>回到git用户环境，进入./gogs/ 项目文件夹。</p> <p>服务默认是监听3000端口，如果启动失败请检查是否商品被占用</p> <p>提前先把端口在防火墙中打开</p> <div class="language-sh extra-class"><pre class="language-sh"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3000</span>/tcp --permanent
<span class="token comment"># 重启生效</span>
firewall-cmd --reload
</code></pre></div><p>运行服务，如果启动失败请检查是否商品被占用</p> <div class="language-sh extra-class"><pre class="language-sh"><code>./gogs web
</code></pre></div><p>运行网页访问3000端口，应该会出现首次安装时的配置页面。</p> <p>这里注意下面几个配置项就行</p> <ul><li>数据库用户和密码</li> <li>域名</li> <li>应用 URL</li> <li>端口号 3000</li> <li>服务器和其它服务设置</li> <li>管理员帐号设置</li></ul> <p>然后点安装</p> <p>这些选项想修改可以随时更改<a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E6%A1%A3%E8%AF%B4%E6%98%8E">配置文件</a><code>app.ini</code>也可以的。</p> <p>如果想重新初始化安装，可以修改app.ini的<code>INSTALL_LOCK</code>为false。</p> <h3 id="运行"><a href="#运行" class="header-anchor">#</a> 运行</h3> <p>手动运行</p> <div class="language-sh extra-class"><pre class="language-sh"><code>./gogs/gogs web
<span class="token comment"># 更多参数</span>
./gogs -h
NAME:
   Gogs - A painless self-hosted Git <span class="token function">service</span>

USAGE:
   gogs <span class="token punctuation">[</span>global options<span class="token punctuation">]</span> <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>command options<span class="token punctuation">]</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

VERSION:
   <span class="token number">0.11</span>.91.0811

COMMANDS:
     web      Start web server
     serv     This <span class="token builtin class-name">command</span> should only be called by SSH shell
     hook     Delegate commands to corresponding Git hooks
     cert     Generate self-signed certificate
     admin    Perform admin operations on <span class="token builtin class-name">command</span> line
     <span class="token function">import</span>   Import portable data as <span class="token builtin class-name">local</span> Gogs data
     backup   Backup files and database
     restore  Restore files and database from backup
     help, h  Shows a list of commands or <span class="token builtin class-name">help</span> <span class="token keyword">for</span> one <span class="token builtin class-name">command</span>

GLOBAL OPTIONS:
   --help, -h     show <span class="token builtin class-name">help</span>
   --version, -v  print the version
</code></pre></div><h3 id="注册系统服务"><a href="#注册系统服务" class="header-anchor">#</a> 注册系统服务</h3> <p>切换至有root权限的用户。</p> <p>直接将项目中的<code>scripts/systemd</code>目录里的服务文件<code>gogs.service</code>拷贝到用户服务目录<code>/usr/lib/systemd/system/</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">cp</span> /home/git/gogs/scripts/systemd/gogs.service /usr/lib/systemd/system/
<span class="token comment"># 关闭手动运行过的gogs</span>
<span class="token function">killall</span> gogs
<span class="token comment"># 通过系统服务启动gogs</span>
systemctl start gogs
<span class="token comment"># 查看是否成功启动</span>
systemctl status gogs
<span class="token comment"># 打开服务开机启动</span>
systemctl <span class="token builtin class-name">enable</span> gogs
</code></pre></div><div class="custom-block tip"><p>在centos中有时候会出现手动可以正常启动服务，而服务无法正常启动，这里面排查完权限问题依然存在的话，还有一个原因可能就是<code>Selinux防火墙</code>未关闭，尝试关闭后看能否解决</p></div> <h3 id="关闭selinux防火墙"><a href="#关闭selinux防火墙" class="header-anchor">#</a> 关闭Selinux防火墙</h3> <p>执行<code>sestatus</code>查看当前状态，如果不为disabled
可先执行<code>setenforce 0</code>临时关闭，然后尝试运行服务看是否正常。</p> <p>如果正常，说明问题就出在这。然后彻底关闭Selinux防火墙</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vi</span> /etc/selinux/conf

<span class="token comment"># SELINUX=enforcing更改为SELINUX=disabled</span>
<span class="token comment"># 然后重启生效</span>
<span class="token function">reboot</span>
</code></pre></div><h2 id="配置文档说明"><a href="#配置文档说明" class="header-anchor">#</a> 配置文档说明</h2> <p>用户自定义配置文件位于 ./gogs/custom/conf/app.ini</p> <div class="language-conf extra-class"><pre class="language-text"><code>APP_NAME = Gogs         # 进程名
RUN_USER = git          # 运行用户
RUN_MODE = prod         # 运行模式

[database]
DB_TYPE  = mysql            # 数据库类型
HOST     = 127.0.0.1:3306   # 数据库地址和端口
NAME     = gogs             # gogs存取的数据库名
USER     = root             # 登陆数据库用户
PASSWD   = root123456       # 密码
SSL_MODE = disable          # 是否使用ssh链接
PATH     = data/gogs.db     # 数据库存放路径

[repository]
ROOT = /home/git/gogs-repositories          # 仓库数据文件存放目录

[server]
DOMAIN           = cent8v.cn            # 域名，对应SSH clone地址
HTTP_ADDR        = 127.0.0.1            # 监听地址，nginx建议 127.0.0.1，否则 0.0.0.0
HTTP_PORT        = 3000                 # 服务监听端口
ROOT_URL         = http://cent8v.cn:3000/   # 仓库URL地址，对应HTTP clone地址
DISABLE_SSH      = false                # 是否禁用SSH连接
SSH_PORT         = 22                   # SSH服务端口
START_SSH_SERVER = false                # 是否开启自建的SSH服务而非使用系统的
OFFLINE_MODE     = false                # 离线模式，影响的是远程仓库的同步

[mailer]
ENABLED = false                             # 邮件服务

[service]
REGISTER_EMAIL_CONFIRM = false              # 是否开启注册邮件通知
ENABLE_NOTIFY_MAIL     = false              # 是否开启邮件通知
DISABLE_REGISTRATION   = false
ENABLE_CAPTCHA         = true
REQUIRE_SIGNIN_VIEW    = true

[picture]
DISABLE_GRAVATAR        = false             # 禁用用户自定义头像
ENABLE_FEDERATED_AVATAR = false             # 开户用户上传用户头像

[session]
PROVIDER = file                             # 会话存储方式

[log]
MODE      = file                            # log存放方式
LEVEL     = Info                            # logo信息显示级别
ROOT_PATH = /home/git/gogs/log              # log的存放目录

[security]
INSTALL_LOCK = true                         # 初始化安装锁定开关
SECRET_KEY   = L4IHTplL0Dy91gX              # SECRET_KEY
</code></pre></div><h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <p>遇到启动问题，可以根据Log查看相关错误日志，针对性地解决。</p> <p>log默认存放在<code>./gogs/log</code>，或者你在安装的时候自己选择的相应目录里。</p> <p><a href="https://blog.mynook.info/post/host-your-own-git-server-using-gogs/" target="_blank" rel="noopener noreferrer">更多安装参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/server/git/" class="prev router-link-active">
        上一篇：  Git
        </a></span> <span class="next"><a href="/server/linux/">
         下一篇： Linux 使用手册
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26b143c5.js" defer></script><script src="/assets/js/3.c09e7e7a.js" defer></script><script src="/assets/js/2.3613c5bc.js" defer></script><script src="/assets/js/120.a9068d51.js" defer></script>
  </body>
</html>
