(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{431:function(s,a,t){"use strict";t.r(a);var e=t(33),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"php-for-mac-os"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php-for-mac-os"}},[s._v("#")]),s._v(" Php for Mac OS")]),s._v(" "),t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),t("h3",{attrs:{id:"php的运行模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php的运行模式"}},[s._v("#")]),s._v(" PHP的运行模式")]),s._v(" "),t("p",[s._v("公认的PHP运行模式有4种\n1 CGI通用网关接口模式\n2 FAST-CGI模式\n3 CLI命令行模式\n4 模块模式")]),s._v(" "),t("p",[s._v("前两者涉及到协议升级，也就是常说的php-fpm，模块模式涉及到服务器与协议的搭配，比如Apache，nginxCLI命令行模式就是shell命令行，"),t("code",[s._v("php -v")]),s._v(";这样的命令理解这个概念，有助于判断当前运行的PHP实际版本是哪一个。 进而理解 "),t("code",[s._v("php -v")]),s._v(";结果和 网页"),t("code",[s._v("phpinfo()")]),s._v(" 执行结果不一样的根本原因。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("php-fpm -v\n")])])]),t("h2",{attrs:{id:"php安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php安装"}},[s._v("#")]),s._v(" php安装")]),s._v(" "),t("h3",{attrs:{id:"php-fpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php-fpm"}},[s._v("#")]),s._v(" php-fpm")]),s._v(" "),t("h3",{attrs:{id:"安装mongodb扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装mongodb扩展"}},[s._v("#")]),s._v(" 安装mongodb扩展")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" pecl\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /usr/local/opt/php@7.2/bin/pecl  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mongodb\nBuild process completed successfully\nInstalling "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/local/Cellar/php@7.2/7.2.14/pecl/20170718/mongodb.so'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ok: channel://pecl.php.net/mongodb-1.5.3\nExtension mongodb enabled "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" php.ini\n")])])]),t("p",[s._v("YII2 "),t("a",{attrs:{href:"https://packagist.org/packages/yiisoft/yii2-mongodb",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDb扩展"),t("OutboundLink")],1),s._v('"\nyiisoft/yii2-mongodb": "~2.1.0" 2.1.0 是一个版本节点，之前使用老的mogo驱动。')]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("php -m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mongodb\n")])])]),t("p",[s._v("最后查了一圈资料发现 这个"),t("a",{attrs:{href:"https://www.runoob.com/mongodb/php7-mongdb-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("网址"),t("OutboundLink")],1),s._v("下的安装教程挺实用的，还是依靠pecl安装。")]),s._v(" "),t("h3",{attrs:{id:"安装redis扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装redis扩展"}},[s._v("#")]),s._v(" 安装redis扩展")]),s._v(" "),t("p",[s._v("php7安装redis扩展")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /usr/local/opt/php@7.2/bin/pecl  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  igbinary\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /usr/local/opt/php@7.2/bin/pecl  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis\n\nBuild process completed successfully\nInstalling "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/local/Cellar/php@7.2/7.2.14/pecl/20170718/redis.so'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ok: channel://pecl.php.net/redis-4.2.0\nExtension redis enabled "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" php.ini\n")])])]),t("h2",{attrs:{id:"版本控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本控制"}},[s._v("#")]),s._v(" 版本控制")]),s._v(" "),t("h3",{attrs:{id:"brew-php-switcher"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#brew-php-switcher"}},[s._v("#")]),s._v(" brew-php-switcher")]),s._v(" "),t("p",[s._v("brew-php-switcher是一个php环境版本切换工具，对通过brew安装的php版本进行切换。\n"),t("a",{attrs:{href:"https://github.com/philcook/brew-php-switcher",target:"_blank",rel:"noopener noreferrer"}},[s._v("github"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("作为php版本切换管理工具，brew-php-switcher与php version功能一致，可惜php version已经放弃使用，对于mac用户，只能选择brew-php-switcher作为版本切换工具。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",[s._v("brew 不提供5.6的安装源了，所以brew-php-switcher也无法实现5.6的切换了。")])]),s._v(" "),t("h4",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("brew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" brew-php-switcher\n")])])]),t("p",[s._v("基本使用")]),s._v(" "),t("p",[s._v("brew-php-switcher +版本号")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("brew-php-switcher \nusage: brew-php-switcher version "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-c"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    version    one of: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.0")]),s._v(",7.1,7.2,7.3\n    -s        skip change of mod_php on apache\n    -s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("*      skip change of mod_php on apache or valet restart i.e "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("valet,apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("valet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    -c"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("*      switch a specific config "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("valet,apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("valet\n如切换7.2版本brew-php-switcher   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.2")]),s._v("\nSwitching to php@7.2\nSwitching your shell\nUnlinking /usr/local/Cellar/php@5.6/5.6.38"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" symlinks removed\nUnlinking /usr/local/Cellar/php@7.2/7.2.18"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" symlinks removed\nUnlinking /usr/local/Cellar/php/7.3.5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" symlinks removed\nLinking /usr/local/Cellar/php@7.2/7.2.18"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" symlinks created\nIf you need to have this software first "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" instead consider running:\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export PATH=\"/usr/local/opt/php@7.2/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\"'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bash_profile\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export PATH=\"/usr/local/opt/php@7.2/sbin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\"'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bash_profile\n\n")])])]),t("p",[s._v("按照以上提示修改 环境变量并且 "),t("code",[s._v("source ~/.bash_profile")]),s._v("生效之后执行"),t("code",[s._v("php -v")]),s._v(",控制台php命令生效(cli).")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("php -v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nPHP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.2")]),s._v(".18 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("built: May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" 00:08:35"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" NTS "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCopyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),s._v("-2018 The PHP Group\nZend Engine v3.2.0, Copyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1998")]),s._v("-2018 Zend Technologies\n    with Zend OPcache v7.2.18, Copyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1999")]),s._v("-2018, by Zend Technologies\n")])])]),t("p",[s._v("执行"),t("code",[s._v("php-fpm -v;")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("php-fpm -v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nPHP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.2")]),s._v(".18 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fpm-fcgi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("built: May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" 00:08:38"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCopyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),s._v("-2018 The PHP Group\nZend Engine v3.2.0, Copyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1998")]),s._v("-2018 Zend Technologies\n    with Zend OPcache v7.2.18, Copyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1999")]),s._v("-2018, by Zend Technologies\n")])])]),t("h4",{attrs:{id:"查看软连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看软连接"}},[s._v("#")]),s._v(" 查看软连接")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/opt/php@7.2/sbin/local/optls -l\nlrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  admin  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 06:21 php -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/Cellar/php/7.3.5\nlrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  admin  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":07 php-code-sniffer -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/Cellar/php-code-sniffer/3.4.1\nlrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  admin  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" 09:25 php@5.6 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/Cellar/php@5.6/5.6.38\nlrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  admin  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 05:54 php@7.2 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/Cellar/php@7.2/7.2.18\nlrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  admin  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 06:21 php@7.3 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/Cellar/php/7.3.5\n")])])]),t("h4",{attrs:{id:"初步理解bash-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初步理解bash-profile"}},[s._v("#")]),s._v(" 初步理解bash_profile")]),s._v(" "),t("p",[s._v("配置文件mac环境下，自定义安装的软件都会在 "),t("code",[s._v("/usr/local/Cellar")]),s._v("路径下，当安装软件与系统原有软件相互冲突时，比如Python2.7与python3.n，PHP5.6与PHP7.n, 就需要指定默认使用哪个版本。")]),s._v(" "),t("p",[s._v("系统配置文件"),t("code",[s._v("~/.bash_profile")]),s._v("---通过修改"),t("code",[s._v("~/.bash_profile")]),s._v("，使系统识别默认的Python版本为3.7")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("python")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/Cellar/python/3.7.0/bin/python3.7"')]),s._v("\n")])])]),t("p",[s._v("命令生效")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("  ~/.bash_profilePHP7\n")])])]),t("h2",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("h3",{attrs:{id:"php服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php服务"}},[s._v("#")]),s._v(" PHP服务")]),s._v(" "),t("p",[s._v("服务上文中提到 brew services显示两个php服务，我们可以使用下边的命令依次关闭，检验web服务识别的是哪个PHP版本")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("brew services stop php\nbrew services stop php@7.2\n")])])]),t("p",[s._v("分别使用"),t("code",[s._v("phpinfo()")]),s._v("查看当前的运行版本，当php服务全部关闭时，网页会直接显示"),t("code",[s._v("502")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("brew services restart php\n")])])]),t("h3",{attrs:{id:"php查看进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php查看进程"}},[s._v("#")]),s._v(" php查看进程")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" php-fpm\nbrew services start php@7.2\nIf you need to have php@7.2 first "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" run:\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export PATH=\"/usr/local/opt/php@7.2/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\"'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bash_profile\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export PATH=\"/usr/local/opt/php@7.2/sbin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\"'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bash_profile\nYou can also run "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("php --ini"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" inside terminal to see "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" files are used by PHP "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" CLI mode.\n")])])]),t("h3",{attrs:{id:"查看php-ini配置文件路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看php-ini配置文件路径"}},[s._v("#")]),s._v(" 查看"),t("code",[s._v("php ini")]),s._v("配置文件路径")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("php -i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" php.ini\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#输出")]),s._v("\nConfiguration File "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("php.ini"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/etc/php/7.2\nLoaded Configuration File "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/etc/php/7.2/php.ini\n")])])]),t("h3",{attrs:{id:"查看pecl路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看pecl路径"}},[s._v("#")]),s._v(" 查看pecl路径")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" pecl\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出")]),s._v("\n/usr/local/opt/php@7.2/bin/pecl\n")])])]),t("h3",{attrs:{id:"查看通过brew安装的服务列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看通过brew安装的服务列表"}},[s._v("#")]),s._v(" 查看通过brew安装的服务列表")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("brew services list\n")])])]),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("h3",{attrs:{id:"php-fpm配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php-fpm配置"}},[s._v("#")]),s._v(" php-fpm配置")]),s._v(" "),t("h2",{attrs:{id:"插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[s._v("#")]),s._v(" 插件")]),s._v(" "),t("h2",{attrs:{id:"gd库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gd库"}},[s._v("#")]),s._v(" GD库")]),s._v(" "),t("h3",{attrs:{id:"freetype"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#freetype"}},[s._v("#")]),s._v(" FreeType")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.freetype.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("FreeType 官网"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"http://download.savannah.gnu.org/releases/freetype/",target:"_blank",rel:"noopener noreferrer"}},[s._v("FreeType 包列表"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("下载")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -O http://download.savannah.gnu.org/releases/freetype/freetype-2.4.4.tar.bz2\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxf file.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./install\n\n")])])]),t("p",[s._v("刷新"),t("code",[s._v("phpinfo()")]),s._v(" 或执行命令 "),t("code",[s._v("php -m")]),s._v(";")]),s._v(" "),t("h2",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题")]),s._v(" "),t("h3",{attrs:{id:"连接mysql数据库出错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接mysql数据库出错"}},[s._v("#")]),s._v(" 连接mysql数据库出错")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("错误代码：")]),s._v(" "),t("p",[s._v("SQLSTATE[HY000] [2002]  No such file or directory")])]),s._v(" "),t("p",[s._v("第一次在PHP中使用"),t("code",[s._v("mysqli()")]),s._v("函数建立与MySql的连接时，返回了上述错误信息，是配置文件"),t("code",[s._v("php.ini")]),s._v("的问题，需要做如下修改来开启mysqli扩展：")]),s._v(" "),t("p",[s._v("同样在"),t("code",[s._v("/etc/php.ini")]),s._v("文件中，找到以下三项，并做修改后如下：")]),s._v(" "),t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql.default_socket = /tmp/mysql.sock\n\npdo_mysql.default_socket= /tmp/mysql.sock\n\nmysqli.default_socket =/tmp/mysql.sock\n")])])]),t("p",[s._v("如果第一次配置php,"),t("code",[s._v("/etc")]),s._v("目录下无"),t("code",[s._v("php.ini")]),s._v(",另一个默认文件"),t("code",[s._v("php.ini.default")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" php.ini.default php.ini\n")])])]),t("h3",{attrs:{id:"call-to-undefined-function"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#call-to-undefined-function"}},[s._v("#")]),s._v(" Call to undefined function")]),s._v(" "),t("h4",{attrs:{id:"imagettftext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#imagettftext"}},[s._v("#")]),s._v(" imagettftext()")]),s._v(" "),t("p",[s._v("thinkphp 验证码在 macOS Sierra 10.12 上无法显示，提示下面的错误：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("Call to undefined "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" think"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("captcha"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("imagettftext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或：")]),s._v("\nCall to undefined "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" Think"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("imagettftext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("首先确定该问题为缺失 "),t("a",{attrs:{href:"https://link.jianshu.com/?t=https://www.freetype.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("FreeType"),t("OutboundLink")],1),s._v(" 扩展引起的，查看系统信息（phpinfo），找到 gd 项，查看有无 "),t("code",[s._v("phpinfo")]),s._v(" 四项，如无，说明 FreeType 未安装或未完整安装。")]),s._v(" "),t("p",[s._v("方案一：https://php-osx.liip.ch 一句话脚本(One Line Installation)")]),s._v(" "),t("p",[s._v("为系统 GD 库安装 FreeType 解决问题，打开终端输入：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s http://php-osx.liip.ch/install.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("这里的 5.6 对应本机的 PHP 版本")]),s._v(" "),t("p",[s._v("这个方案缺点是下载过程比较久，容易因网络问题安装失败；")])]),s._v(" "),t("p",[s._v("方案二\n重新编译")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/php/7.2 --with-config-file-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/etc/php/7.2 --with-config-file-scan-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/etc/php/7.2/conf.d --enable-fpm --with-fpm-user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("www --with-fpm-group"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("www --with-mysqli --with-pdo-mysql --with-iconv-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local --enable-short-tags --with-zlib --with-libxml-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/xml2-config --enable-xml --disable-rpath --enable-bcmath --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --with-mcrypt-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/Cellar/mcrypt/2.6.8/ --with-gd --with-openssl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/opt/openssl --with-mhash --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --disable-fileinfo --enable-maintainer-zts --enable-mysqlnd --with-freetype-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/Cellar/freetype/2.9.1/\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);